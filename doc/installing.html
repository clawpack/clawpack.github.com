

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation instructions &mdash; Clawpack v4.6.x documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '4.6.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/clawicon.ico"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="Clawpack v4.6.x documentation" href="index.html" />
    <link rel="next" title="Clawpack 4.3 documentation" href="claw43.html" />
    <link rel="prev" title="Recent changes" href="changes.html" /> 
  </head>
  <body>

<div style="background-color: #FFFFE8; text-align: left; padding: 10px 10px 15px 15px">
<table>
<tr>
<!--
<td>
&nbsp;
<br>
<a href="http://www.clawpack.org/"><img src="_static/clawlogo.jpg" border="0" alt="Clawpack logo"/></a>
</td>
-->
<td>
<br>
&nbsp;
<br>
<a href
<font size="7"  color="#7F0000"> Clawpack Documentation</font>
<br>
&nbsp;
<br>
</td>
</tr>
</table>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="claw43.html" title="Clawpack 4.3 documentation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="changes.html" title="Recent changes"
             accesskey="P">previous</a> |</li>
<li><a href="http://www.clawpack.org"><font color="#7F0000">Clawpack Webpage</font></a>|&nbsp;</li>
<li><a href="apps.html"><font color="#7F0000">Gallery</font></a>|&nbsp;</li>
<li><a href="index.html"><font color="#7F0000">Contents</font></a>|&nbsp;</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/clawlogo.jpg" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation instructions</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#downloading-clawpack">Downloading Clawpack</a></li>
<li><a class="reference internal" href="#setting-environment-variables">Setting environment variables</a></li>
<li><a class="reference internal" href="#testing-your-installation-and-running-an-example">Testing your installation and running an example</a></li>
<li><a class="reference internal" href="#starting-a-python-web-server">Starting a Python web server</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="changes.html"
                        title="previous chapter">Recent changes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="claw43.html"
                        title="next chapter">Clawpack 4.3 documentation</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/installing.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installation-instructions">
<span id="installing"></span><h1>Installation instructions<a class="headerlink" href="#installation-instructions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p><strong>Operating systems.</strong>
Clawpack should work fine on Unix/Linux or Mac OS X systems.  Much
of it will work under Windows using Cygwin, but this is not officially
supported.</p>
<p>On OS X you need to have the <a class="reference external" href="http://developer.apple.com/technologies/tools/xcode.html">Xcode developer tools</a>
installed in order to have &#8220;make&#8221; working.</p>
<p><strong>Fortran.</strong>
The main Clawpack routines are written in Fortran (a mixture of
Fortran 77 and Fortran 90/95) and so compiling and running the code
requires a Fortran compiler, such as <a class="reference external" href="http://gcc.gnu.org/wiki/GFortran">gfortran</a>, which is part of the GNU gcc compiler
suite.
For Mac OSX, see <a class="reference external" href="http://hpc.sourceforge.net/">hpc.sourceforge.net</a> for
some installation options.</p>
<p>Makefiles are used in libraries and directories and you will need some
version of <em>make</em>.</p>
<p><strong>Python.</strong>
Starting with Version 4.4, we use Python for visualization of results
(see <a class="reference internal" href="visclaw_doc/plotting.html#plotting"><em>Plotting options in Python</em></a>) and also for user input (see <a class="reference internal" href="setrun.html#setrun"><em>Specifying run-time parameters in setrun.py</em></a>).
Older Matlab plotting scripts are still available but are no longer
being developed and the examples now included in Clawpack include
<cite>setplot.py</cite> files to facilitate use of the Python plotting tools
(see <a class="reference internal" href="visclaw_doc/setplot.html#setplot"><em>Using setplot.py to specify the desired plots</em></a>).</p>
<p>You will need Python Version 2.5 or above (but <strong>not</strong> 3.0 or above,
which is not backwards compatible).  You will also need <em>NumPy</em> and
<em>matplotlib</em> for plotting.</p>
<p>See <a class="reference internal" href="python.html#python"><em>Python Hints</em></a> for information on
installing the required modules and to get started using Python if
you are not familiar with it.</p>
<p><strong>Virtual Machine.</strong>
An alternative to installing the prerequisites and Clawpack itself is to use the
<a class="reference internal" href="vm.html#vm"><em>Clawpack Virtual Machine</em></a>.</p>
</div>
<div class="section" id="downloading-clawpack">
<span id="downloading"></span><h2>Downloading Clawpack<a class="headerlink" href="#downloading-clawpack" title="Permalink to this headline">¶</a></h2>
<p>For instructions on using the version of Clawpack in the Subversion repository instead of
the tar file described below, see the <a class="reference external" href="http://kingkong.amath.washington.edu/trac/clawpack">Clawpack wiki</a></p>
<p>First download the tar file from the Clawpack download page:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://kingkong.amath.washington.edu/clawpack/clawdownload">http://kingkong.amath.washington.edu/clawpack/clawdownload</a></li>
</ul>
</div></blockquote>
<p>This file will be of the form clawpack-N.tar.gz  where N is the
version number.</p>
<p>Move this tar file to the directory where you want to install claw and then:</p>
<div class="highlight-python"><pre>$  tar -zxvf clawpack-N.tar.gz
$  cd clawpack-N</pre>
</div>
</div>
<div class="section" id="setting-environment-variables">
<span id="setenv"></span><h2>Setting environment variables<a class="headerlink" href="#setting-environment-variables" title="Permalink to this headline">¶</a></h2>
<p>In this claw directory modify the <em>setenv.py</em> file if necessary and then:</p>
<div class="highlight-python"><pre>$  python setenv.py</pre>
</div>
<p>This will provide files to set environment variables appropriately.
In particular, the variable <cite>CLAW</cite> should be set to point to this directory.</p>
<p>Now execute</p>
<div class="highlight-python"><pre>$ source setenv.bash</pre>
</div>
<p>if you are using the bash shell, or</p>
<div class="highlight-python"><pre>$ source setenv.csh</pre>
</div>
<p>if you use <cite>csh</cite>.  If you don&#8217;t know what shell you are using, try both and see which one
doesn&#8217;t give errors, you won&#8217;t hurt anything.</p>
<p>If you don&#8217;t know about Unix shells, see these <a class="reference external" href="http://kingkong.amath.washington.edu/uwamath583/sphinx/notes/html/shells.html">class notes</a>, for an
introduction and other links.</p>
<p>Consider putting the commands  contained in the appropriate file
<cite>setenv.bash</cite> or <cite>setenv.csh</cite> in your .cshrc or .bashrc
file (which is executed automatically in each new shell you create).</p>
<p>In particular, the commands found in these files set the following
<a class="reference external" href="http://kingkong.amath.washington.edu/uwamath583/sphinx/notes/html/vars.html">environment variables</a></p>
<blockquote>
<div><ul class="simple">
<li><cite>CLAW</cite> is set to the path to the main directory of the Clawpack files.</li>
<li><cite>PYTHONPATH</cite> is a list of paths that should include $CLAW/python.
If this variable is already set in the shell from which you execute <cite>setenv.py</cite>
then it should provide an extension of the original path to include this.</li>
<li><cite>FC</cite> is set to <cite>gfortran</cite> as the default compiler to use for Fortran.  You may
want to change this.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="testing-your-installation-and-running-an-example">
<span id="first-test"></span><h2>Testing your installation and running an example<a class="headerlink" href="#testing-your-installation-and-running-an-example" title="Permalink to this headline">¶</a></h2>
<p>There are a number of test cases bundled with Clawpack in the directories
<cite>$CLAW/apps</cite> and <cite>$CLAW/book</cite>.  Here and below it is assumed that the
environment variable <cite>CLAW</cite> has been set properly as described above.</p>
<p>As a first test, go to the directory
<a class="reference external" href="claw/apps/advection/1d/example1">$CLAW/apps/advection/1d/example1</a>.
You can try the following test in this directory, or you may want to first
make a copy of it (see the instructions in <a class="reference internal" href="newapp.html#copyex"><em>Copying an existing example</em></a>).</p>
<p>The Makefiles are set up to do dependency checking so that in many
application directories you can simply type:</p>
<div class="highlight-python"><pre>$ make .plots</pre>
</div>
<p>and the Fortran code will be compiled, data files created, the code
run, and the results plotted automatically, resulting in a set of webpages
showing the results.</p>
<p>However, if this is your first attempt to run a code, it is useful to go
through these steps one at a time, both to understand the steps and so that
any problems with your installation can be properly identified.</p>
<p>You might want to start by examining the Makefile.  This sets a number of
variables, which at some point you might need to modify for other examples,
see <a class="reference internal" href="makefiles.html#makefiles"><em>Clawpack Makefiles</em></a> for more about this.  At the bottom of the Makefile is
an <cite>include</cite> statement that points to a common Makefile that is used by most
applications, and where all the details of the make process can be found.</p>
<p>To compile the code, type:</p>
<div class="highlight-python"><pre>$ make .exe</pre>
</div>
<p>If this gives an error, see <a class="reference internal" href="trouble.html#trouble-makeexe"><em>Trouble running &#8220;make .exe&#8221;</em></a>.</p>
<p>This should compile the example code (after first compiling the required
library routines) and produce an executable named <cite>xclaw</cite> in this directory.</p>
<p>Before running the code, it is necessary to also create a set of data files
that are read in by the Fortran code.  This can be done via:</p>
<div class="highlight-python"><pre>$ make .data</pre>
</div>
<p>If this gives an error, see <a class="reference internal" href="trouble.html#trouble-makedata"><em>Trouble running &#8220;make .data&#8221;</em></a>.</p>
<p>This uses the Python code in <cite>setrun.py</cite> to create data files that have the
form <cite>*.data</cite>.  For the 1d advection example, two files are created,
<cite>claw.data</cite> and <cite>setprob.data</cite>.  The file <cite>claw.data</cite>
contains standard run-time
parameters of Clawpack (such as the number of grid cells <cite>mx</cite>, indications
of what method to use, what boundary conditions to impose, etc.).
The file <cite>setprob.data</cite> typically contains parameters specific to a
particular application, in this case the advection velocity <cite>u</cite>.</p>
<p>In Clawpack 4.3 and earlier versions, the user would modify the <cite>claw.data</cite>
and <cite>setprob.data</cite> files directly.  Starting with Clawpack 4.4, the
recommended approach is to only modify the Python function <cite>setrun</cite> defined
in the file <cite>setrun.py</cite>, and use &#8220;make .data&#8221; to create the <cite>*.data</cite> files.
See <a class="reference internal" href="setrun.html#setrun"><em>Specifying run-time parameters in setrun.py</em></a> for more details.</p>
<p>Once the executable and the data files all exist, we can run the code.  The
recommended way to do this is to type:</p>
<div class="highlight-python"><pre>$ make .output</pre>
</div>
<p>If this gives an error, see <a class="reference internal" href="trouble.html#trouble-makeoutput"><em>Trouble running &#8220;make .output&#8221;</em></a>.</p>
<p>One could run the code by typing &#8221;./xclaw&#8221;, but using the make option has
several advantages.  For one thing,
this checks dependencies to make sure the executable and data files are up
to date, so you could have typed &#8220;make .output&#8221; without the first two steps
above.</p>
<p>Also, before running the code a subdirectory <cite>_output</cite> is created
and the output of the code (often a large number of files) is directed to
this subdirectory.  This is convenient if you want to do several runs with
different parameter values and keep the results organized.  After the code
has run you can rename the subdirectory, or you can modify the variable
<cite>OUTDIR</cite> in the Makefile to direct results to a different directory.  See
<a class="reference internal" href="makefiles.html#makefiles"><em>Clawpack Makefiles</em></a> for more details.  Copies of all the data files are also
placed in the output directory for future reference.</p>
<p>If the code runs successfully, you should see output like the following:</p>
<div class="highlight-python"><pre>Reading data file, first 5 lines are comments: claw.data
 running...

Reading data file, first 5 lines are comments: setprob.data
CLAW1EZ: Frame    0 output plot files done at time t =  0.0000D+00

CLAW1... Step   1   Courant number = 5.000  dt =  0.1000D+00  t =  0.1000D+00
CLAW1 rejecting step... Courant number too large
CLAW1... Step   1   Courant number = 0.900  dt =  0.1800D-01  t =  0.1800D-01
CLAW1... Step   2   Courant number = 0.900  dt =  0.1800D-01  t =  0.3600D-01
CLAW1... Step   3   Courant number = 0.900  dt =  0.1800D-01  t =  0.5400D-01
CLAW1... Step   4   Courant number = 0.900  dt =  0.1800D-01  t =  0.7200D-01
CLAW1... Step   5   Courant number = 0.900  dt =  0.1800D-01  t =  0.9000D-01
CLAW1... Step   6   Courant number = 0.500  dt =  0.1000D-01  t =  0.1000D+00
CLAW1EZ: Frame    1 output plot files done at time t =  0.1000D+00

--- etc --- etc ---

CLAW1EZ: Frame    9 output plot files done at time t =  0.9000D+00

CLAW1... Step   1   Courant number = 0.900  dt =  0.1800D-01  t =  0.9180D+00
CLAW1... Step   2   Courant number = 0.900  dt =  0.1800D-01  t =  0.9360D+00
CLAW1... Step   3   Courant number = 0.900  dt =  0.1800D-01  t =  0.9540D+00
CLAW1... Step   4   Courant number = 0.900  dt =  0.1800D-01  t =  0.9720D+00
CLAW1... Step   5   Courant number = 0.900  dt =  0.1800D-01  t =  0.9900D+00
CLAW1... Step   6   Courant number = 0.500  dt =  0.1000D-01  t =  0.1000D+01
CLAW1EZ: Frame   10 output plot files done at time t =  0.1000D+01</pre>
</div>
<p>If you don&#8217;t like seeing output from every time step, you can suppress this by setting
<cite>verbosity = 0</cite> in the file <cite>setrun.py</cite>.  You might try doing that and then typing:</p>
<div class="highlight-python"><pre>$ make .output</pre>
</div>
<p>It should recreate the data files and rerun the code, with less output along the way.</p>
<p>If the code runs properly, the subdirectory <cite>_output</cite> should contain the following files:</p>
<div class="highlight-python"><pre>claw.data   fort.q0003  fort.q0008  fort.t0002  fort.t0007
fort.info   fort.q0004  fort.q0009  fort.t0003  fort.t0008
fort.q0000  fort.q0005  fort.q0010  fort.t0004  fort.t0009
fort.q0001  fort.q0006  fort.t0000  fort.t0005  fort.t0010
fort.q0002  fort.q0007  fort.t0001  fort.t0006  setprob.data</pre>
</div>
<p>The <cite>fort.info</cite> file contains information about the run just completed.  The files
with names of the form <cite>fort.t000N</cite> and <cite>fort.q000N</cite> contain the computed results for
Frame <cite>N</cite>.  See <em class="xref std std-ref">fortfiles</em> for more information about the contents of these files.</p>
<p>Normally you will not want to examine these files directly, but instead will use a
plotting tool to plot the results.</p>
<p><strong>Plotting the results.</strong>
Once the code has run and the files listed above have been created, there are several
options for plotting the results.</p>
<p>To try the Python tools, type:</p>
<div class="highlight-python"><pre>$ make .plots</pre>
</div>
<p>If this gives an error, see <a class="reference internal" href="trouble.html#trouble-makeplots"><em>Trouble running &#8220;make .plots&#8221;</em></a>.</p>
<p>If this works, it will create a subdirectory named <cite>_plots</cite> that contains a number of
image files (the <cite>*.png</cite> files) and a set of html files that can be used to view the
results from a web browser.  See <em class="xref std std-ref">plotting_makeplots</em> for more details.</p>
<p>An alternative is to view the plots from an interactive Python session, as described in
the section <a class="reference internal" href="visclaw_doc/plotting.html#plotting-iplotclaw"><em>Interactive plotting with Iplotclaw</em></a>.</p>
<p>If you wish to use Matlab instead, see <a class="reference internal" href="visclaw_doc/matlab_plotting.html#matlabplots"><em>Plotting using Matlab</em></a>.</p>
<p>Other visualization packages could also be used to display the results, but you will need
to figure out how to read in the data.  See <em class="xref std std-ref">fortfiles</em> for information about the
format of the files produced by Clawpack.</p>
<p><strong>Creating html versions of source files.*</strong></p>
<p>To best view the results, and the source code and README files,
type:</p>
<div class="highlight-python"><pre>$ make .htmls</pre>
</div>
<p>and view the resulting README.html file with a web browser.</p>
</div>
<div class="section" id="starting-a-python-web-server">
<span id="startserver"></span><h2>Starting a Python web server<a class="headerlink" href="#starting-a-python-web-server" title="Permalink to this headline">¶</a></h2>
<p>This part is not required, but
to best view README.html and other Clawpack generated html files,
it is convenient to start a local webserver via:</p>
<div class="highlight-python"><pre>$ cd $CLAW
$ python python/startserver.py</pre>
</div>
<p>Note that this will take over the window, so do this in a new window, or
else do:</p>
<div class="highlight-python"><pre>$ xterm -e python python/startserver.py &amp;</pre>
</div>
<p>to execute it in a new xterm (if available).
The setenv commands described above will define an alias so that this last
command can be simplified to:</p>
<div class="highlight-python"><pre>$ clawserver</pre>
</div>
<p>The main $CLAW directory will then be available at <a class="reference external" href="http://localhost:50005">http://localhost:50005</a>
and jsMath should work properly to display latex on the webpages (once you&#8217;ve
downloaded the required fonts, see
<a class="reference external" href="http://www.math.union.edu/locate/jsMath/users/fonts.html">http://www.math.union.edu/locate/jsMath/users/fonts.html</a>).</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="claw43.html" title="Clawpack 4.3 documentation"
             >next</a> |</li>
        <li class="right" >
          <a href="changes.html" title="Recent changes"
             >previous</a> |</li>
<li><a href="http://www.clawpack.org"><font color="#7F0000">Clawpack Webpage</font></a>|&nbsp;</li>
<li><a href="apps.html"><font color="#7F0000">Gallery</font></a>|&nbsp;</li>
<li><a href="index.html"><font color="#7F0000">Contents</font></a>|&nbsp;</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Randall J. LeVeque and others.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>