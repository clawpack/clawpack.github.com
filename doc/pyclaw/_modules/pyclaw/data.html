

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pyclaw.data &mdash; PyClaw v0.1 documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/jsmath/easy/load.js"></script>
    <link rel="shortcut icon" href="../../_static/clawicon.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="top" title="PyClaw v0.1 documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" /> 
  </head>
  <body>

<div style="background-color: #FFFFE8; text-align: left; padding: 10px 10px 15px 15px">
<table>
<tr>
<!--
<td>
&nbsp;
<br>
<a href="http://www.clawpack.org/"><img src="../../_static/clawlogo.jpg" border="0" alt="Clawpack logo"/></a>
</td>
-->
<td>
<br>
&nbsp;
<br>
<a href
<font size="7"  color="#7F0000"> PyClaw Documentation</font>
<br>
&nbsp;
<br>
</td>
</tr>
</table>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
<li><a href="http://www.clawpack.org"><font color="#7F0000">Clawpack Webpage</font></a>|&nbsp;</li>
<li><a href="../../apps.html"><font color="#7F0000">Gallery</font></a>|&nbsp;</li>
<li><a href="../../index.html"><font color="#7F0000">Contents</font></a>|&nbsp;</li>

          <li><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/clawlogo.jpg" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for pyclaw.data</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/env python</span>
<span class="c"># encoding: utf-8</span>
<span class="s">r&quot;&quot;&quot;</span>
<span class="s">Data Module</span>

<span class="s">Contains the general class definition and the subclasses of the Clawpack data</span>
<span class="s">objects.</span>

<span class="s">:Authors:</span>
<span class="s">    Kyle T. Mandli and Randall J. LeVeque (2008-08-07) Initial version</span>

<span class="s">    Randall J. LeVeque (2008-08-07) Plotting data objects</span>

<span class="s">    Alan McIntyre (2009-01-01) Speed ups and rebuilding of Data</span>

<span class="s">    Kyle T. Mandli (2009-04-01) Stripped down and improved version</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="c"># ============================================================================</span>
<span class="c">#      Copyright (C) 2008 Kyle T. Mandli &lt;mandli@amath.washington.edu&gt;</span>
<span class="c">#      Copyright (C) 2008 Randall J. LeVeque &lt;rjl@amath.washington.edu&gt;</span>
<span class="c">#      Copyright (C) 2009 Alan McIntyre &lt;amcin001@amath.washington.edu&gt;</span>
<span class="c">#</span>
<span class="c">#  Distributed under the terms of the Berkeley Software Distribution (BSD)</span>
<span class="c">#  license</span>
<span class="c">#                     http://www.opensource.org/licenses/</span>
<span class="c"># ============================================================================</span>

<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="c"># ========== Parse Value Utility Function ====================================</span>
<span class="k">def</span> <span class="nf">_parse_value</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="s">r&quot;&quot;&quot;</span>
<span class="s">    Attempt to make sense of a value string from a config file.  If the</span>
<span class="s">    value is not obviously an integer, float, or boolean, it is returned as</span>
<span class="s">    a string stripped of leading and trailing whitespace.</span>

<span class="s">    :Input:</span>
<span class="s">        - *value* - (string) Value string to be parsed</span>

<span class="s">    :Output:</span>
<span class="s">        - (id) - Appropriate object based on *value*</span>
<span class="s">    &quot;&quot;&quot;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>

    <span class="c"># assume that values containing spaces are lists of values</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">_parse_value</span><span class="p">(</span><span class="n">vv</span><span class="p">)</span> <span class="k">for</span> <span class="n">vv</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c"># see if it&#39;s an integer</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c"># see if it&#39;s a float</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="c"># see if it&#39;s a bool</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;T&#39;</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">elif</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;F&#39;</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">return</span> <span class="n">value</span>


<span class="c"># ============================================================================</span>
<span class="c">#  General Data Class</span>
<span class="c"># ============================================================================</span>
<div class="viewcode-block" id="Data"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.Data">[docs]</a><span class="k">class</span> <span class="nc">Data</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="s">r&quot;&quot;&quot;</span>
<span class="s">    Generalized clawpack data object</span>

<span class="s">    Generalized class for Clawpack data.  Contains generic methods for reading</span>
<span class="s">    and writing data to and from a data file.</span>

<span class="s">    :Initialization:</span>
<span class="s">        Input:</span>
<span class="s">         - *data_files* - (List of strings) Paths to data files to be read in,</span>
<span class="s">           an empty data object can be created by providing no data files.</span>
<span class="s">         - *attributes* - (List of strings) List of required attribute names</span>
<span class="s">           which will be initialized to None.</span>

<span class="s">    :Version: 1.2 (2009-04-01)</span>
<span class="s">    &quot;&quot;&quot;</span>

    <span class="n">__name__</span> <span class="o">=</span> <span class="s">&#39;Data&#39;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_files</span><span class="o">=</span><span class="p">[],</span> <span class="n">attributes</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a Data object</span>

<span class="sd">        See :class:`Data` for more info.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c"># Internal bookkeeping variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__attributes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__owners</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c"># Setup data logger</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">&#39;data&#39;</span><span class="p">)</span>

        <span class="c"># Initialize from attribute list provided</span>
        <span class="k">if</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">)</span>

        <span class="c"># Read data files from data_files list</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data_files</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
            <span class="n">data_files</span> <span class="o">=</span> <span class="p">[</span><span class="n">data_files</span><span class="p">]</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data_files</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&quot;data_files must be a list of strings&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_files</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">data_files</span><span class="p">)</span>

    <span class="c"># ========== Return string representation of this Data Object ========</span>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">output</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%s%s%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s">&quot;Name&quot;</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">25</span><span class="p">),</span><span class="s">&quot;Value&quot;</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span>
                                    <span class="s">&quot;Owner&quot;</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">output</span> <span class="o">+=</span> <span class="s">&quot;</span><span class="si">%s%s%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">25</span><span class="p">),</span>
                                    <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span>
                                    <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__owners</span><span class="p">[</span><span class="n">k</span><span class="p">])</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">output</span>

    <span class="c"># ========== Access Methods ==============================================</span>
<div class="viewcode-block" id="Data.add_attribute"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.Data.add_attribute">[docs]</a>    <span class="k">def</span> <span class="nf">add_attribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">owner</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="s">r&quot;&quot;&quot;</span>
<span class="s">        Adds an attribute called name to the data object</span>

<span class="s">        If an attribute needs to be added to the object, this routine must be</span>
<span class="s">        called or the attribute will not be written out.</span>

<span class="s">        :Input:</span>
<span class="s">         - *name* - (string) Name of the data attribute</span>
<span class="s">         - *value* - (id) Value to set *name* to, defaults to None</span>
<span class="s">         - *owner* - (id) Owner of this particular attribute</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__owners</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">owner</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__attributes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__attributes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Data.remove_attributes"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.Data.remove_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">remove_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg_list</span><span class="p">):</span>
        <span class="s">r&quot;&quot;&quot;</span>
<span class="s">        Remove the listed attributes.</span>
<span class="s">        &quot;&quot;&quot;</span>

        <span class="c"># Convert to list if args is not already a list</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg_list</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
            <span class="n">arg_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">arg_list</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">arg_list</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__owners</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__attributes</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
            <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">arg</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">attributes</span><span class="p">():</span>
        <span class="k">def</span> <span class="nf">fget</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__attributes</span>
        <span class="k">return</span> <span class="nb">locals</span><span class="p">()</span>
    <span class="n">attributes</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="o">**</span><span class="n">attributes</span><span class="p">())</span>

<div class="viewcode-block" id="Data.has_attribute"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.Data.has_attribute">[docs]</a>    <span class="k">def</span> <span class="nf">has_attribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="s">r&quot;&quot;&quot;</span>
<span class="s">        Check if this data object has the given attributes</span>

<span class="s">        :Input:</span>
<span class="s">         - *name* - (string) Name of attribute</span>

<span class="s">        :Output:</span>
<span class="s">         - (bool) - True if data object contains a data attribute name</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__attributes</span>
</div>
<div class="viewcode-block" id="Data.set_owner"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.Data.set_owner">[docs]</a>    <span class="k">def</span> <span class="nf">set_owner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">owner</span><span class="p">):</span>
        <span class="s">r&quot;&quot;&quot;</span>
<span class="s">        Sets the owner of the given data</span>

<span class="s">        :Input:</span>
<span class="s">         - *name* - (string) Name of attribute</span>
<span class="s">         - *owner* - (id) Owner of the attribute</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__attributes</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s">&quot;No attribute named </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__owners</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">owner</span>
</div>
<div class="viewcode-block" id="Data.get_owner"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.Data.get_owner">[docs]</a>    <span class="k">def</span> <span class="nf">get_owner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="s">r&quot;&quot;&quot;</span>
<span class="s">        Returns the owner of the data attribute name</span>

<span class="s">        :Input:</span>
<span class="s">         - *name* - (string) Name of attribute</span>

<span class="s">        :Output:</span>
<span class="s">         - (id) - Owner of attribute</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__owners</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Data.get_owners"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.Data.get_owners">[docs]</a>    <span class="k">def</span> <span class="nf">get_owners</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">supplementary_file</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="s">r&quot;&quot;&quot;</span>
<span class="s">        Returns a list of owners excluding the owner None</span>

<span class="s">        If supplementary_file is provided, None is replace by that owner.</span>

<span class="s">        :Input:</span>
<span class="s">         - *supplementary_file* - (string) Supplementary file, defaults to</span>
<span class="s">           None.</span>

<span class="s">        :Output:</span>
<span class="s">         - (list) - Returns a list of owners</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">owners</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">owner</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__owners</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">owner</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__owners</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">supplementary_file</span>
            <span class="c"># This simultaneously finds one instance of an owner and tests</span>
            <span class="c"># to see if the supplementary_file is not None</span>
            <span class="n">owner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__owners</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">owner</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">owners</span> <span class="ow">and</span> <span class="n">owner</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">owners</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">owner</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">owners</span>
</div>
<div class="viewcode-block" id="Data.iteritems"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.Data.iteritems">[docs]</a>    <span class="k">def</span> <span class="nf">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">r&quot;&quot;&quot;</span>
<span class="s">        Returns an iterator of keys and values from this object</span>

<span class="s">        :Output:</span>
<span class="s">         - (Iterator) Iterator over keys and values</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">k</span><span class="p">,</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__attributes</span><span class="p">]</span>

    <span class="c"># ========== Read in a collection of data files ==========================</span></div>
<div class="viewcode-block" id="Data.read"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.Data.read">[docs]</a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">data_paths</span><span class="p">):</span>
        <span class="s">r&quot;&quot;&quot;</span>
<span class="s">        Read data in from a clawpack style data file.</span>

<span class="s">        Any lines of the form::</span>

<span class="s">           values  =:  name</span>

<span class="s">        is used to set an attribute of self.</span>

<span class="s">        INPUT</span>

<span class="s">        data_paths : Path to a data file to be read in, can also be a list</span>
<span class="s">                    of files to be read in.</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data_paths</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
            <span class="n">data_paths</span> <span class="o">=</span> <span class="p">[</span><span class="n">data_paths</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">data_paths</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&quot;No such data file: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">filename</span><span class="p">)</span>

            <span class="c"># self.logger.info(&quot;Reading from %s&quot; % filename)</span>

            <span class="k">for</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">file</span><span class="p">(</span><span class="n">filename</span><span class="p">)):</span>
                <span class="k">if</span> <span class="s">&#39;=:&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">value</span><span class="p">,</span> <span class="n">tail</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;=:&#39;</span><span class="p">)</span>
                <span class="n">varname</span> <span class="o">=</span> <span class="n">tail</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

                <span class="n">oldval</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">varname</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
                <span class="n">newval</span> <span class="o">=</span> <span class="n">_parse_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">oldval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">vals</span> <span class="o">=</span> <span class="s">&quot;(old=</span><span class="si">%r</span><span class="s">,new=</span><span class="si">%r</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">oldval</span><span class="p">,</span> <span class="n">newval</span><span class="p">)</span>
                    <span class="c"># self.logger.debug(&quot;Overwriting %s %s&quot; % (varname, vals))</span>

                <span class="c"># if newval is None:</span>
                    <span class="c"># self.logger.warning(&quot;Empty value for %s&quot; % varname)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="n">varname</span><span class="p">,</span> <span class="n">newval</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

    <span class="c"># ========== Write out the data from this object =========================</span></div>
<div class="viewcode-block" id="Data.write"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.Data.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">data_files</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">supplementary_file</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="s">r&quot;&quot;&quot;</span>
<span class="s">        Write out the contents of the data object</span>

<span class="s">        This method writes out the current required attributes of the data</span>
<span class="s">        object to a file or list of files.  The format for the output will be</span>
<span class="s">        in the form::</span>

<span class="s">            values =: name</span>

<span class="s">        The order is either retained from the files in the data list or</span>
<span class="s">        written in the order they are in the list of attributes</span>

<span class="s">        The behavior is determined by the arguments passed into the routine:</span>

<span class="s">        No arguments:</span>

<span class="s">            The contents of the object will be written out to the files listed</span>
<span class="s">            in data_files only if each attribute is contained in the file.</span>
<span class="s">            This implies that if an attribute is not located in any of the</span>
<span class="s">            files in data_files then it will not be written out to file.</span>

<span class="s">        If data_files is provided and data_files is a valid owner:</span>

<span class="s">            Write out the attributes appropriate to that file</span>

<span class="s">        If data_files is provided and not(data_files in owner):</span>

<span class="s">            Write all attributes to the data_file given</span>

<span class="s">        If supplementary_file is provided:</span>

<span class="s">            Write out any attributes without an owner to this file, all owned</span>
<span class="s">            attributes will be written out to the approriate files</span>
<span class="s">        &quot;&quot;&quot;</span>

        <span class="c"># Expand supplementary_file if it is not None</span>
        <span class="k">if</span> <span class="n">supplementary_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">supplementary_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">supplementary_file</span><span class="p">)</span>

        <span class="c"># Create list of owners</span>
        <span class="n">owners</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_owners</span><span class="p">(</span><span class="n">supplementary_file</span><span class="o">=</span><span class="n">supplementary_file</span><span class="p">)</span>

        <span class="c">#print &#39;in write: data_files = &#39;,data_files</span>
        <span class="c"># Write to the entire owner list</span>
        <span class="k">if</span> <span class="n">data_files</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">file_list</span> <span class="o">=</span> <span class="n">owners</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data_files</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
            <span class="c">#print &#39;&lt;p&gt;in write&#39;; import sys; sys.exit(0)</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">data_files</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">owners</span><span class="p">:</span>
                <span class="c"># Create temporary data file to store all data in the object</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">temp_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__attributes</span><span class="p">:</span>
                        <span class="n">temp_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;1 =: </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">key</span><span class="p">)</span>
                    <span class="n">temp_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">IOError</span><span class="p">,</span> <span class="p">(</span><span class="n">errno</span><span class="p">,</span> <span class="n">strerror</span><span class="p">):</span>
                    <span class="k">print</span> <span class="s">&quot;I/O error(</span><span class="si">%s</span><span class="s">): </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">errno</span><span class="p">,</span> <span class="n">strerror</span><span class="p">)</span>
                    <span class="k">raise</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">raise</span>
            <span class="c"># Add the path to the file_list</span>
            <span class="n">file_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">path</span><span class="p">]</span>
        <span class="c"># Check to make sure all the paths are in the owner list</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data_files</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">data_files</span><span class="p">:</span>
                <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">path</span> <span class="ow">in</span> <span class="n">owners</span><span class="p">):</span>
                    <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> is not a registered owner!&quot;</span>
                    <span class="k">return</span>
            <span class="n">file_list</span> <span class="o">=</span> <span class="n">data_files</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&quot;Invalid argument list given to write().&quot;</span><span class="p">)</span>

        <span class="c"># Create temporary supplementary file if requested</span>
        <span class="k">if</span> <span class="n">supplementary_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">sup_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">supplementary_file</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__attributes</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__owners</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="ow">is</span> <span class="n">supplementary_file</span><span class="p">:</span>
                        <span class="n">sup_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;-1 =: </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">attr</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__owners</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="n">supplementary_file</span>
                <span class="n">sup_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">raise</span>


        <span class="c"># Regular expression for searching each file</span>
        <span class="n">regexp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&quot;(?P&lt;values&gt;.*)=:(?P&lt;name&gt;.*)&quot;</span><span class="p">)</span>
        <span class="c"># Loop over each file</span>
        <span class="k">for</span> <span class="n">data_path</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
            <span class="c"># Open the data file and temporary file</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">data_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span><span class="s">&#39;r&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">(</span><span class="ne">IOError</span><span class="p">):</span>
                <span class="k">raise</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">temp_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">data_path</span><span class="p">),</span> \
                    <span class="s">&#39;temp.&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">data_path</span><span class="p">))</span>
                <span class="n">temp_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">temp_path</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">(</span><span class="ne">IOError</span><span class="p">):</span>
                <span class="k">print</span> <span class="s">&quot;IOERROR&quot;</span>
                <span class="k">raise</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">data_file</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">regexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
                        <span class="n">name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">r&#39;\s+&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">values</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">r&#39;\s+&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">&#39;values&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">line</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
                        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__owners</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">==</span> <span class="n">data_path</span> <span class="ow">or</span> \
                                <span class="n">data_path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__owners</span><span class="p">:</span>
                            <span class="n">newvalues</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">)</span>

                            <span class="c"># Convert newvalues to an appropriate string repr</span>
                            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">newvalues</span><span class="p">,</span><span class="nb">tuple</span><span class="p">)</span> \
                                <span class="o">|</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">newvalues</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
                                <span class="c"># Remove [], (), and &#39;,&#39;</span>
                                <span class="n">newstring</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">newvalues</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                                <span class="n">newstring</span> <span class="o">=</span> <span class="n">newstring</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>
                            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">newvalues</span><span class="p">,</span><span class="nb">bool</span><span class="p">):</span>
                                <span class="k">if</span> <span class="n">newvalues</span><span class="p">:</span>
                                    <span class="n">newstring</span> <span class="o">=</span> <span class="s">&#39;T&#39;</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">newstring</span> <span class="o">=</span> <span class="s">&#39;F&#39;</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">newstring</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">newvalues</span><span class="p">)</span>

                            <span class="n">newstart</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="n">newstring</span><span class="p">,</span><span class="mi">25</span><span class="p">)</span>
                            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">&#39;values&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;=:&quot;</span><span class="p">,</span> \
                                <span class="n">newstart</span> <span class="o">+</span> <span class="s">&quot; =:&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">print</span> <span class="s">&quot;Error writing out </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">name</span>
                            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">,</span> <span class="n">name</span>

                    <span class="c"># Write the new line</span>
                    <span class="n">temp_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">raise</span>

            <span class="c"># Close files</span>
            <span class="n">data_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">temp_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="c"># Rename the temporary file to the data_path name</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">temp_path</span><span class="p">,</span><span class="n">data_path</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">raise</span>


<span class="c">#-----------------------------------------------------------------------</span>

<span class="c"># New classes and functions for dealing with data in setrun function.</span>
</div></div>
<div class="viewcode-block" id="ClawInputData"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.ClawInputData">[docs]</a><span class="k">class</span> <span class="nc">ClawInputData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
    <span class="s">r&quot;&quot;&quot;</span>
<span class="s">    Object that will be written out to claw.data.</span>
<span class="s">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ndim</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ClawInputData</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;ndim&#39;</span><span class="p">,</span><span class="n">ndim</span><span class="p">)</span>

        <span class="c"># Set default values:</span>
        <span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mx&#39;</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;nout&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;outstyle&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;tfinal&#39;</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_initial&#39;</span><span class="p">,</span><span class="mf">1.e-5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_max&#39;</span><span class="p">,</span><span class="mf">1.e99</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;cfl_desired&#39;</span><span class="p">,</span><span class="mf">0.9</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;cfl_max&#39;</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;max_steps&#39;</span><span class="p">,</span><span class="mi">5000</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_variable&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;order&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;order_trans&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;verbosity&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;src_split&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mcapa&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;maux&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;meqn&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mwaves&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthlim&#39;</span><span class="p">,[</span><span class="mi">4</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;t0&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;xlower&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;xupper&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mbc&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_xlower&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_xupper&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;restart&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;N_restart&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>


        <span class="k">elif</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mx&#39;</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;my&#39;</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;nout&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;outstyle&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;tfinal&#39;</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_initial&#39;</span><span class="p">,</span><span class="mf">1.e-5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_max&#39;</span><span class="p">,</span><span class="mf">1.e99</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;cfl_desired&#39;</span><span class="p">,</span><span class="mf">0.9</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;cfl_max&#39;</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;max_steps&#39;</span><span class="p">,</span><span class="mi">5000</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_variable&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;order&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;order_trans&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;verbosity&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;src_split&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mcapa&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;maux&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;meqn&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mwaves&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthlim&#39;</span><span class="p">,[</span><span class="mi">4</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;t0&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;xlower&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;xupper&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;ylower&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;yupper&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mbc&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_xlower&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_xupper&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_ylower&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_yupper&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;restart&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;N_restart&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s">&quot;Only ndim=1 or 2 supported so far&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&#39;Creating data file claw.data for use with xclaw&#39;</span>
        <span class="n">make_clawdatafile</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


</div>
<div class="viewcode-block" id="AmrclawInputData"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.AmrclawInputData">[docs]</a><span class="k">class</span> <span class="nc">AmrclawInputData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
    <span class="s">r&quot;&quot;&quot;</span>
<span class="s">    Object that will be written out to amr2ez.data.</span>
<span class="s">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ndim</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">AmrclawInputData</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;ndim&#39;</span><span class="p">,</span><span class="n">ndim</span><span class="p">)</span>

        <span class="c"># Set default values:</span>
        <span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mx&#39;</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;nout&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;outstyle&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;tfinal&#39;</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_initial&#39;</span><span class="p">,</span><span class="mf">1.e-5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_max&#39;</span><span class="p">,</span><span class="mf">1.e99</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;cfl_desired&#39;</span><span class="p">,</span><span class="mf">0.9</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;cfl_max&#39;</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;max_steps&#39;</span><span class="p">,</span><span class="mi">5000</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_variable&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;order&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;order_trans&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;verbosity&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;src_split&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mcapa&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;maux&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;meqn&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mwaves&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthlim&#39;</span><span class="p">,[</span><span class="mi">4</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;t0&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;xlower&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;xupper&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mbc&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_xlower&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_xupper&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;restart&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;N_restart&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

            <span class="c"># attributes need only since AMR is done using 2d amrclaw:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;my&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;ylower&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;yupper&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_ylower&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_yupper&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;inraty&#39;</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">elif</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mx&#39;</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;my&#39;</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;nout&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;outstyle&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;tfinal&#39;</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_initial&#39;</span><span class="p">,</span><span class="mf">1.e-5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_max&#39;</span><span class="p">,</span><span class="mf">1.e99</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;cfl_desired&#39;</span><span class="p">,</span><span class="mf">0.9</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;cfl_max&#39;</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;max_steps&#39;</span><span class="p">,</span><span class="mi">5000</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_variable&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;order&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;order_trans&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;verbosity&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;src_split&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mcapa&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;maux&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;meqn&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mwaves&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthlim&#39;</span><span class="p">,[</span><span class="mi">4</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;t0&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;xlower&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;xupper&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;ylower&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;yupper&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mbc&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_xlower&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_xupper&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_ylower&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_yupper&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;restart&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;N_restart&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;inraty&#39;</span><span class="p">,[</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">ndim</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="c"># AMR parameters:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mxnest&#39;</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;inratx&#39;</span><span class="p">,[</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;inratt&#39;</span><span class="p">,[</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;auxtype&#39;</span><span class="p">,[])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;restart&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;checkpt_iousr&#39;</span><span class="p">,</span><span class="mi">1000</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;tchk&#39;</span><span class="p">,[])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;tol&#39;</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;tolsp&#39;</span><span class="p">,</span><span class="mf">0.05</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;kcheck&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;ibuff&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;cutoff&#39;</span><span class="p">,</span><span class="mf">0.7</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;PRINT&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;NCAR&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;fortq&#39;</span><span class="p">,</span><span class="bp">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dprint&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;eprint&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;edebug&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;gprint&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;nprint&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;pprint&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;rprint&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;sprint&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;tprint&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;uprint&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&#39;*** Error: only ndim=1 or 2 supported so far ***&#39;</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s">&quot;Only ndim=1 or 2 supported so far&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&#39;Creating data file amr2ez.data for use with xamr&#39;</span>
        <span class="n">make_amrclawdatafile</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">make_setgauges_datafile</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="SharpclawInputData"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.SharpclawInputData">[docs]</a><span class="k">class</span> <span class="nc">SharpclawInputData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
    <span class="s">r&quot;&quot;&quot;</span>
<span class="s">    Object that will be written out to claw.data.</span>
<span class="s">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ndim</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SharpclawInputData</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;ndim&#39;</span><span class="p">,</span><span class="n">ndim</span><span class="p">)</span>

        <span class="c"># Set default values:</span>
        <span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mx&#39;</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;nout&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;outstyle&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;tfinal&#39;</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_initial&#39;</span><span class="p">,</span><span class="mf">1.e-5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_max&#39;</span><span class="p">,</span><span class="mf">1.e99</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;cfl_desired&#39;</span><span class="p">,</span><span class="mf">0.9</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;cfl_max&#39;</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;max_steps&#39;</span><span class="p">,</span><span class="mi">5000</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_variable&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;verbosity&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mcapa&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;maux&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;meqn&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mwaves&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthlim&#39;</span><span class="p">,[</span><span class="mi">5</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;t0&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;xlower&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;xupper&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mbc&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_xlower&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_xupper&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;restart&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;N_restart&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;time_integrator&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;tfluct_solver&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;char_decomp&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;lim_type&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;src_term&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>


        <span class="k">elif</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mx&#39;</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;my&#39;</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;nout&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;outstyle&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;tfinal&#39;</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_initial&#39;</span><span class="p">,</span><span class="mf">1.e-5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_max&#39;</span><span class="p">,</span><span class="mf">1.e99</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;cfl_desired&#39;</span><span class="p">,</span><span class="mf">0.9</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;cfl_max&#39;</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;max_steps&#39;</span><span class="p">,</span><span class="mi">5000</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;dt_variable&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;verbosity&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mcapa&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;maux&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;meqn&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mwaves&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthlim&#39;</span><span class="p">,[</span><span class="mi">5</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;t0&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;xlower&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;xupper&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;ylower&#39;</span><span class="p">,</span><span class="mf">0.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;yupper&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mbc&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_xlower&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_xupper&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_ylower&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;mthbc_yupper&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;restart&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;N_restart&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;time_integrator&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;tfluct_solver&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;char_decomp&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;lim_type&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;src_term&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s">&quot;Only ndim=1 or 2 supported so far&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&#39;Creating data file sharpclaw.data for use with xsclaw&#39;</span>
        <span class="n">make_sharpclawdatafile</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>



</div>
<div class="viewcode-block" id="open_datafile"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.open_datafile">[docs]</a><span class="k">def</span> <span class="nf">open_datafile</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">datasource</span><span class="o">=</span><span class="s">&#39;setrun.py&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Open a data file and write a warning header.</span>
<span class="sd">    Warning header starts with &#39;#&#39; character.  These lines are skipped if</span>
<span class="sd">    data file is opened using the library routine opendatafile.</span>

<span class="sd">    :Input:</span>
<span class="sd">     - *name* - (string) Name of data file</span>
<span class="sd">     - *datasource* - (string) Source for the data</span>

<span class="sd">    :Output:</span>
<span class="sd">     - (file) - file object</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">string</span>

    <span class="n">source</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="n">datasource</span><span class="p">,</span><span class="mi">25</span><span class="p">)</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
    <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;########################################################</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
    <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;### DO NOT EDIT THIS FILE:  GENERATED AUTOMATICALLY ####</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
    <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;### To modify data, edit  </span><span class="si">%s</span><span class="s"> ####</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">source</span><span class="p">)</span>
    <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;###    and then &quot;make .data&quot;                        ####</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
    <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;########################################################</span><span class="se">\n\n</span><span class="s">&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="nb">file</span>

</div>
<div class="viewcode-block" id="data_write"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.data_write">[docs]</a><span class="k">def</span> <span class="nf">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">dataobj</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">descr</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
    <span class="s">r&quot;&quot;&quot;</span>
<span class="s">    Write out value to data file, in the form ::</span>

<span class="s">       value =: name  descr</span>

<span class="s">    Remove brackets and commas from lists, and replace booleans by T/F.</span>
<span class="s">    Also convert numpy array to a list first.</span>

<span class="s">    :Input:</span>
<span class="s">     - *name* - (string) normally a string defining the variable,</span>
<span class="s">       ``if name==None``, write a blank line.</span>
<span class="s">     - *descr* - (string) A short description to appear on the line</span>
<span class="s">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">string</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">dataobj</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;Variable missing: &quot;</span><span class="p">,</span><span class="n">name</span>
            <span class="k">print</span> <span class="s">&quot;  from dataobj = &quot;</span><span class="p">,</span> <span class="n">dataobj</span>
            <span class="k">raise</span>
        <span class="c"># Convert value to an appropriate string repr</span>
        <span class="kn">import</span> <span class="nn">numpy</span> 
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="nb">tuple</span><span class="p">)</span> <span class="o">|</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
            <span class="c"># Remove [], (), and &#39;,&#39;</span>
            <span class="n">string_value</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">value</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">string_value</span> <span class="o">=</span> <span class="n">string_value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="nb">bool</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                <span class="n">string_value</span> <span class="o">=</span> <span class="s">&#39;T&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">string_value</span> <span class="o">=</span> <span class="s">&#39;F&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">string_value</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">padded_value</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="n">string_value</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="n">padded_name</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> =: </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">padded_value</span><span class="p">,</span> <span class="n">padded_name</span><span class="p">,</span> <span class="n">descr</span><span class="p">))</span>

</div>
<div class="viewcode-block" id="make_clawdatafile"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.make_clawdatafile">[docs]</a><span class="k">def</span> <span class="nf">make_clawdatafile</span><span class="p">(</span><span class="n">clawdata</span><span class="p">):</span>
    <span class="s">r&quot;&quot;&quot;</span>
<span class="s">    Take the data specified in clawdata and write it to claw.data in the</span>
<span class="s">    form required by the Fortran code lib/main.f95.</span>
<span class="s">    &quot;&quot;&quot;</span>


    <span class="c"># open file and write a warning header:</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="n">open_datafile</span><span class="p">(</span><span class="s">&#39;claw.data&#39;</span><span class="p">)</span>

    <span class="n">ndim</span> <span class="o">=</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">ndim</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;ndim&#39;</span><span class="p">,</span> <span class="s">&#39;(number of dimensions)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mx&#39;</span><span class="p">,</span> <span class="s">&#39;(cells in x direction)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;my&#39;</span><span class="p">,</span> <span class="s">&#39;(cells in y direction)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mz&#39;</span><span class="p">,</span> <span class="s">&#39;(cells in z direction)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>  <span class="c"># writes blank line</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;nout&#39;</span><span class="p">,</span> <span class="s">&#39;(number of output times)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;outstyle&#39;</span><span class="p">,</span> <span class="s">&#39;(style of specifying output times)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">outstyle</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;tfinal&#39;</span><span class="p">,</span> <span class="s">&#39;(final time)&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">outstyle</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;tout&#39;</span><span class="p">,</span> <span class="s">&#39;(output times)&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">outstyle</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;iout&#39;</span><span class="p">,</span> <span class="s">&#39;(output every iout steps)&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">outstyle</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;output_time_interval&#39;</span><span class="p">,</span> <span class="s">&#39;(between outputs)&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;tfinal&#39;</span><span class="p">,</span> <span class="s">&#39;(final time)&#39;</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;*** Error: unrecognized outstyle&#39;</span>
        <span class="k">raise</span>
        <span class="k">return</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;dt_initial&#39;</span><span class="p">,</span> <span class="s">&#39;(initial time step dt)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;dt_max&#39;</span><span class="p">,</span> <span class="s">&#39;(max allowable dt)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;cfl_max&#39;</span><span class="p">,</span> <span class="s">&#39;(max allowable Courant number)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;cfl_desired&#39;</span><span class="p">,</span> <span class="s">&#39;(desired Courant number)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;max_steps&#39;</span><span class="p">,</span> <span class="s">&#39;(max time steps per call to claw)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;dt_variable&#39;</span><span class="p">,</span> <span class="s">&#39;(1 for variable dt, 0 for fixed)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;order&#39;</span><span class="p">,</span> <span class="s">&#39;(1 or 2)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;order_trans&#39;</span><span class="p">,</span> <span class="s">&#39;(not used in 1d)&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;order_trans&#39;</span><span class="p">,</span> <span class="s">&#39;(transverse order)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;verbosity&#39;</span><span class="p">,</span> <span class="s">&#39;(verbosity of output)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;src_split&#39;</span><span class="p">,</span> <span class="s">&#39;(source term splitting)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mcapa&#39;</span><span class="p">,</span> <span class="s">&#39;(aux index for capacity fcn)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;maux&#39;</span><span class="p">,</span> <span class="s">&#39;(number of aux variables)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;meqn&#39;</span><span class="p">,</span> <span class="s">&#39;(number of equations)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mwaves&#39;</span><span class="p">,</span> <span class="s">&#39;(number of waves)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthlim&#39;</span><span class="p">,</span> <span class="s">&#39;(limiter choice for each wave)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;t0&#39;</span><span class="p">,</span> <span class="s">&#39;(initial time)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;xlower&#39;</span><span class="p">,</span> <span class="s">&#39;(xlower)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;xupper&#39;</span><span class="p">,</span> <span class="s">&#39;(xupper)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;ylower&#39;</span><span class="p">,</span> <span class="s">&#39;(ylower)&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;yupper&#39;</span><span class="p">,</span> <span class="s">&#39;(yupper)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;zlower&#39;</span><span class="p">,</span> <span class="s">&#39;(zlower)&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;zupper&#39;</span><span class="p">,</span> <span class="s">&#39;(zupper)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mbc&#39;</span><span class="p">,</span> <span class="s">&#39;(number of ghost cells)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_xlower&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at xlower)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_xupper&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at xupper)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_ylower&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at ylower)&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_yupper&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at yupper)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_zlower&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at zlower)&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_zupper&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at zupper)&#39;</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;restart&#39;</span><span class="p">,</span> <span class="s">&#39;(1 to restart from a past run)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;N_restart&#39;</span><span class="p">,</span> <span class="s">&#39;(which frame to restart from)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="make_amrclawdatafile"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.make_amrclawdatafile">[docs]</a><span class="k">def</span> <span class="nf">make_amrclawdatafile</span><span class="p">(</span><span class="n">clawdata</span><span class="p">):</span>
    <span class="s">r&quot;&quot;&quot;</span>
<span class="s">    Take the data specified in clawdata and write it to claw.data in the</span>
<span class="s">    form required by the Fortran code lib/main.f95.</span>
<span class="s">    &quot;&quot;&quot;</span>


    <span class="c"># open file and write a warning header:</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="n">open_datafile</span><span class="p">(</span><span class="s">&#39;amr2ez.data&#39;</span><span class="p">)</span>

    <span class="n">ndim</span> <span class="o">=</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">ndim</span>
    <span class="c">#data_write(file, clawdata, &#39;ndim&#39;, &#39;(number of dimensions)&#39;)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mx&#39;</span><span class="p">,</span> <span class="s">&#39;(cells in x direction)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;my&#39;</span><span class="p">,</span> <span class="s">&#39;(cells in y direction)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mz&#39;</span><span class="p">,</span> <span class="s">&#39;(cells in z direction)&#39;</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mxnest&#39;</span><span class="p">,</span> <span class="s">&#39;(max number of grid levels)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">clawdata</span><span class="o">.</span><span class="n">inratx</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">clawdata</span><span class="o">.</span><span class="n">mxnest</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
	<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;*** Error in data parameter: &quot;</span> <span class="o">+</span> \
              <span class="s">&quot;require len(inratx) &gt;= </span><span class="si">%s</span><span class="s"> &quot;</span> <span class="o">%</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">clawdata</span><span class="o">.</span><span class="n">mxnest</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;inratx&#39;</span><span class="p">,</span> <span class="s">&#39;(refinement ratios)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">mxnest</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
	<span class="c"># negative mxnest indicates anisotropic refinement</span>
	<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">clawdata</span><span class="o">.</span><span class="n">inraty</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">clawdata</span><span class="o">.</span><span class="n">mxnest</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
	    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;*** Error in data parameter: &quot;</span> <span class="o">+</span> \
              <span class="s">&quot;require len(inraty) &gt;= </span><span class="si">%s</span><span class="s"> &quot;</span> <span class="o">%</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">clawdata</span><span class="o">.</span><span class="n">mxnest</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;inraty&#39;</span><span class="p">,</span> <span class="s">&#39;(refinement ratios)&#39;</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
	    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">clawdata</span><span class="o">.</span><span class="n">inratz</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">clawdata</span><span class="o">.</span><span class="n">mxnest</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
	        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;*** Error in data parameter: &quot;</span> <span class="o">+</span> \
		  <span class="s">&quot;require len(inratz) &gt;= </span><span class="si">%s</span><span class="s"> &quot;</span> <span class="o">%</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">clawdata</span><span class="o">.</span><span class="n">mxnest</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
	    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;inratz&#39;</span><span class="p">,</span> <span class="s">&#39;(refinement ratios)&#39;</span><span class="p">)</span>
	<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">clawdata</span><span class="o">.</span><span class="n">inratt</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">clawdata</span><span class="o">.</span><span class="n">mxnest</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
	    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;*** Error in data parameter: &quot;</span> <span class="o">+</span> \
		  <span class="s">&quot;require len(inratt) &gt;= </span><span class="si">%s</span><span class="s"> &quot;</span> <span class="o">%</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">clawdata</span><span class="o">.</span><span class="n">mxnest</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
	<span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;inratt&#39;</span><span class="p">,</span> <span class="s">&#39;(refinement ratios)&#39;</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>  <span class="c"># writes blank line</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;nout&#39;</span><span class="p">,</span> <span class="s">&#39;(number of output times)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;outstyle&#39;</span><span class="p">,</span> <span class="s">&#39;(style of specifying output times)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">outstyle</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;tfinal&#39;</span><span class="p">,</span> <span class="s">&#39;(final time)&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">outstyle</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;tout&#39;</span><span class="p">,</span> <span class="s">&#39;(output times)&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">outstyle</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;iout&#39;</span><span class="p">,</span> <span class="s">&#39;(output every iout steps)&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">outstyle</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;output_time_interval&#39;</span><span class="p">,</span> <span class="s">&#39;(between outputs)&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;tfinal&#39;</span><span class="p">,</span> <span class="s">&#39;(final time)&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;*** Error: unrecognized outstyle&#39;</span>
        <span class="k">raise</span>
        <span class="k">return</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;dt_initial&#39;</span><span class="p">,</span> <span class="s">&#39;(initial time step dt)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;dt_max&#39;</span><span class="p">,</span> <span class="s">&#39;(max allowable dt)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;cfl_max&#39;</span><span class="p">,</span> <span class="s">&#39;(max allowable Courant number)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;cfl_desired&#39;</span><span class="p">,</span> <span class="s">&#39;(desired Courant number)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;max_steps&#39;</span><span class="p">,</span> <span class="s">&#39;(max time steps per call to claw)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;dt_variable&#39;</span><span class="p">,</span> <span class="s">&#39;(1 for variable dt, 0 for fixed)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;order&#39;</span><span class="p">,</span> <span class="s">&#39;(1 or 2)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;order_trans&#39;</span><span class="p">,</span> <span class="s">&#39;(not used in 1d)&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;order_trans&#39;</span><span class="p">,</span> <span class="s">&#39;(transverse order)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;verbosity&#39;</span><span class="p">,</span> <span class="s">&#39;(verbosity of output)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;src_split&#39;</span><span class="p">,</span> <span class="s">&#39;(source term splitting)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mcapa&#39;</span><span class="p">,</span> <span class="s">&#39;(aux index for capacity fcn)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;maux&#39;</span><span class="p">,</span> <span class="s">&#39;(number of aux variables)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">clawdata</span><span class="o">.</span><span class="n">auxtype</span><span class="p">)</span> <span class="o">!=</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">maux</span><span class="p">:</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;*** Error: An auxtype array must be specified of length maux&quot;</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">,</span> <span class="s">&quot;require len(clawdata.auxtype) == clawdata.maux&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">clawdata</span><span class="o">.</span><span class="n">maux</span><span class="p">):</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&#39;</span><span class="si">%s</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">auxtype</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;meqn&#39;</span><span class="p">,</span> <span class="s">&#39;(number of equations)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mwaves&#39;</span><span class="p">,</span> <span class="s">&#39;(number of waves)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthlim&#39;</span><span class="p">,</span> <span class="s">&#39;(limiter choice for each wave)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;t0&#39;</span><span class="p">,</span> <span class="s">&#39;(initial time)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;xlower&#39;</span><span class="p">,</span> <span class="s">&#39;(xlower)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;xupper&#39;</span><span class="p">,</span> <span class="s">&#39;(xupper)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;ylower&#39;</span><span class="p">,</span> <span class="s">&#39;(ylower)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;yupper&#39;</span><span class="p">,</span> <span class="s">&#39;(yupper)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;zlower&#39;</span><span class="p">,</span> <span class="s">&#39;(zlower)&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;zupper&#39;</span><span class="p">,</span> <span class="s">&#39;(zupper)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mbc&#39;</span><span class="p">,</span> <span class="s">&#39;(number of ghost cells)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_xlower&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at xlower)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_xupper&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at xupper)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_ylower&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at ylower)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_yupper&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at yupper)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_zlower&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at zlower)&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_zupper&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at zupper)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;restart&#39;</span><span class="p">,</span> <span class="s">&#39;(1 to restart from a past run)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;checkpt_iousr&#39;</span><span class="p">,</span> <span class="s">&#39;(how often to checkpoint)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">checkpt_iousr</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;tchk&#39;</span><span class="p">,</span> <span class="s">&#39;(checkpoint times)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;tol&#39;</span><span class="p">,</span> <span class="s">&#39;(tolerance for Richardson extrap)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;tolsp&#39;</span><span class="p">,</span> <span class="s">&#39;(tolerance used in flag2refine)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;kcheck&#39;</span><span class="p">,</span> <span class="s">&#39;(how often to regrid)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;ibuff&#39;</span><span class="p">,</span> <span class="s">&#39;(buffer zone around flagged pts)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;cutoff&#39;</span><span class="p">,</span> <span class="s">&#39;(efficiency cutoff for grid gen.)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;PRINT&#39;</span><span class="p">,</span> <span class="s">&#39;(print to fort.amr)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;NCAR&#39;</span><span class="p">,</span> <span class="s">&#39;(obsolete!)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;fortq&#39;</span><span class="p">,</span> <span class="s">&#39;(Output to fort.q* files)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;dprint&#39;</span><span class="p">,</span> <span class="s">&#39;(print domain flags)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;eprint&#39;</span><span class="p">,</span> <span class="s">&#39;(print err est flags)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;edebug&#39;</span><span class="p">,</span> <span class="s">&#39;(even more err est flags)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;gprint&#39;</span><span class="p">,</span> <span class="s">&#39;(grid bisection/clustering)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;nprint&#39;</span><span class="p">,</span> <span class="s">&#39;(proper nesting output)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;pprint&#39;</span><span class="p">,</span> <span class="s">&#39;(proj. of tagged points)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;rprint&#39;</span><span class="p">,</span> <span class="s">&#39;(print regridding summary)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;sprint&#39;</span><span class="p">,</span> <span class="s">&#39;(space/memory output)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;tprint&#39;</span><span class="p">,</span> <span class="s">&#39;(time step reporting each level)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;uprint&#39;</span><span class="p">,</span> <span class="s">&#39;(update/upbnd reporting)&#39;</span><span class="p">)</span>

    <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="make_sharpclawdatafile"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.make_sharpclawdatafile">[docs]</a><span class="k">def</span> <span class="nf">make_sharpclawdatafile</span><span class="p">(</span><span class="n">clawdata</span><span class="p">):</span>
    <span class="s">r&quot;&quot;&quot;</span>
<span class="s">    Take the data specified in clawdata and write it to sharpclaw.data in the</span>
<span class="s">    form required by the Fortran code lib/main.f95.</span>
<span class="s">    &quot;&quot;&quot;</span>


    <span class="c"># open file and write a warning header:</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="n">open_datafile</span><span class="p">(</span><span class="s">&#39;sharpclaw.data&#39;</span><span class="p">)</span>

    <span class="n">ndim</span> <span class="o">=</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">ndim</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;ndim&#39;</span><span class="p">,</span> <span class="s">&#39;(number of dimensions)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mx&#39;</span><span class="p">,</span> <span class="s">&#39;(cells in x direction)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;my&#39;</span><span class="p">,</span> <span class="s">&#39;(cells in y direction)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mz&#39;</span><span class="p">,</span> <span class="s">&#39;(cells in z direction)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>  <span class="c"># writes blank line</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;nout&#39;</span><span class="p">,</span> <span class="s">&#39;(number of output times)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;outstyle&#39;</span><span class="p">,</span> <span class="s">&#39;(style of specifying output times)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">outstyle</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;tfinal&#39;</span><span class="p">,</span> <span class="s">&#39;(final time)&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">outstyle</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;tout&#39;</span><span class="p">,</span> <span class="s">&#39;(output times)&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">clawdata</span><span class="o">.</span><span class="n">outstyle</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;iout&#39;</span><span class="p">,</span> <span class="s">&#39;(output every iout steps)&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;*** Error: unrecognized outstyle&#39;</span>
        <span class="k">raise</span>
        <span class="k">return</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;dt_initial&#39;</span><span class="p">,</span> <span class="s">&#39;(initial time step dt)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;dt_max&#39;</span><span class="p">,</span> <span class="s">&#39;(max allowable dt)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;cfl_max&#39;</span><span class="p">,</span> <span class="s">&#39;(max allowable Courant number)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;cfl_desired&#39;</span><span class="p">,</span> <span class="s">&#39;(desired Courant number)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;max_steps&#39;</span><span class="p">,</span> <span class="s">&#39;(max time steps per call to claw)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;dt_variable&#39;</span><span class="p">,</span> <span class="s">&#39;(1 for variable dt, 0 for fixed)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;time_integrator&#39;</span><span class="p">,</span> <span class="s">&#39;(time stepping scheme)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;verbosity&#39;</span><span class="p">,</span> <span class="s">&#39;(verbosity of output)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;src_term&#39;</span><span class="p">,</span> <span class="s">&#39;(source term present)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mcapa&#39;</span><span class="p">,</span> <span class="s">&#39;(aux index for capacity fcn)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;maux&#39;</span><span class="p">,</span> <span class="s">&#39;(number of aux variables)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;tfluct_solver&#39;</span><span class="p">,</span> <span class="s">&#39;(total fluctuation solver)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;char_decomp&#39;</span><span class="p">,</span> <span class="s">&#39;(characteristic decomposition)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;meqn&#39;</span><span class="p">,</span> <span class="s">&#39;(number of equations)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mwaves&#39;</span><span class="p">,</span> <span class="s">&#39;(number of waves)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;lim_type&#39;</span><span class="p">,</span> <span class="s">&#39;(0=None, 1=TVD, 2=WENO)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthlim&#39;</span><span class="p">,</span> <span class="s">&#39;(limiter choice for each wave)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;t0&#39;</span><span class="p">,</span> <span class="s">&#39;(initial time)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;xlower&#39;</span><span class="p">,</span> <span class="s">&#39;(xlower)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;xupper&#39;</span><span class="p">,</span> <span class="s">&#39;(xupper)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;ylower&#39;</span><span class="p">,</span> <span class="s">&#39;(ylower)&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;yupper&#39;</span><span class="p">,</span> <span class="s">&#39;(yupper)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;zlower&#39;</span><span class="p">,</span> <span class="s">&#39;(zlower)&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;zupper&#39;</span><span class="p">,</span> <span class="s">&#39;(zupper)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mbc&#39;</span><span class="p">,</span> <span class="s">&#39;(number of ghost cells)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_xlower&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at xlower)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_xupper&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at xupper)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_ylower&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at ylower)&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_yupper&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at yupper)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ndim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_zlower&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at zlower)&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;mthbc_zupper&#39;</span><span class="p">,</span> <span class="s">&#39;(type of BC at zupper)&#39;</span><span class="p">)</span>

    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;restart&#39;</span><span class="p">,</span> <span class="s">&#39;(1 to restart from a past run)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="s">&#39;N_restart&#39;</span><span class="p">,</span> <span class="s">&#39;(which frame to restart from)&#39;</span><span class="p">)</span>
    <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="make_userdatafile"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.make_userdatafile">[docs]</a><span class="k">def</span> <span class="nf">make_userdatafile</span><span class="p">(</span><span class="n">userdata</span><span class="p">):</span>
    <span class="s">r&quot;&quot;&quot;</span>
<span class="s">    Create the data file using the parameters in userdata.</span>
<span class="s">    The parameters will be written to this file in the same order they were</span>
<span class="s">    specified using userdata.add_attribute.</span>
<span class="s">    Presumably the user will read these in using a Fortran routine, such as</span>
<span class="s">    setprob.f95, and the order is important.</span>
<span class="s">    &quot;&quot;&quot;</span>

    <span class="c"># open file and write a warning header:</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="n">open_datafile</span><span class="p">(</span><span class="n">userdata</span><span class="o">.</span><span class="n">_UserData__fname</span><span class="p">)</span>

    <span class="c"># write all the parameters:</span>
    <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">userdata</span><span class="o">.</span><span class="n">attributes</span><span class="p">:</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">userdata</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> \
                   <span class="n">userdata</span><span class="o">.</span><span class="n">_UserData__descr</span><span class="p">[</span><span class="n">param</span><span class="p">])</span>

    <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="make_setgauges_datafile"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.make_setgauges_datafile">[docs]</a><span class="k">def</span> <span class="nf">make_setgauges_datafile</span><span class="p">(</span><span class="n">clawdata</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create setgauges.data using gauges attribute of clawdata.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">gauges</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">clawdata</span><span class="p">,</span><span class="s">&#39;gauges&#39;</span><span class="p">,[])</span>
    <span class="n">ngauges</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">gauges</span><span class="p">)</span>

    <span class="k">print</span> <span class="s">&#39;Creating data file setgauges.data&#39;</span>
    <span class="c"># open file and write a warning header:</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="n">open_datafile</span><span class="p">(</span><span class="s">&#39;setgauges.data&#39;</span><span class="p">)</span>
    <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%4i</span><span class="s">   =: ngauges</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">ngauges</span><span class="p">)</span>
    <span class="n">gaugeno_used</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">gauge</span> <span class="ow">in</span> <span class="n">gauges</span><span class="p">:</span>
        <span class="n">gaugeno</span> <span class="o">=</span> <span class="n">gauge</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">gaugeno</span> <span class="ow">in</span> <span class="n">gaugeno_used</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;*** Gauge number </span><span class="si">%s</span><span class="s"> used more than once! &quot;</span> <span class="o">%</span> <span class="n">gaugeno</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&quot;Repeated gauge number&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gaugeno_used</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gauge</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%4i</span><span class="s"> </span><span class="si">%19.10e</span><span class="s">  </span><span class="si">%17.10e</span><span class="s">  </span><span class="si">%13.6e</span><span class="s">  </span><span class="si">%13.6e</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">gauge</span><span class="p">))</span>
        <span class="c"># or use this variant with =:</span>
        <span class="c">#gauge.append(gaugeno)</span>
        <span class="c">#file.write(&quot;%4i %19.10e  %17.10e  %13.6e  %13.6e  =: gauge%s\n&quot; % tuple(gauge))</span>
    <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


<span class="c">#-----------------------------------------------------</span>
<span class="c"># New version 6/30/09</span>
</div>
<div class="viewcode-block" id="ClawRunData"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.ClawRunData">[docs]</a><span class="k">class</span> <span class="nc">ClawRunData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
    <span class="s">r&quot;&quot;&quot;</span>
<span class="s">    Object that will be written out to claw.data.</span>
<span class="s">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pkg</span><span class="p">,</span> <span class="n">ndim</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ClawRunData</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;pkg&#39;</span><span class="p">,</span><span class="n">pkg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;ndim&#39;</span><span class="p">,</span><span class="n">ndim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;datalist&#39;</span><span class="p">,[])</span>


        <span class="k">if</span> <span class="n">pkg</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;classic&#39;</span><span class="p">,</span> <span class="s">&#39;classicclaw&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;xclawcmd&#39;</span><span class="p">,</span> <span class="s">&#39;xclaw&#39;</span><span class="p">)</span>

            <span class="c"># Required data set for basic run parameters:</span>
            <span class="n">clawdata</span> <span class="o">=</span> <span class="n">ClawInputData</span><span class="p">(</span><span class="n">ndim</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;clawdata&#39;</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">datalist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clawdata</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">pkg</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;amrclaw&#39;</span><span class="p">,</span> <span class="s">&#39;amr&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;xclawcmd&#39;</span><span class="p">,</span> <span class="s">&#39;xamr&#39;</span><span class="p">)</span>

            <span class="c"># Required data set for basic run parameters:</span>
            <span class="n">clawdata</span> <span class="o">=</span> <span class="n">AmrclawInputData</span><span class="p">(</span><span class="n">ndim</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;clawdata&#39;</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">datalist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clawdata</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">pkg</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;geoclaw&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;xclawcmd&#39;</span><span class="p">,</span> <span class="s">&#39;xgeoclaw&#39;</span><span class="p">)</span>

            <span class="c"># Required data set for basic run parameters:</span>
            <span class="n">clawdata</span> <span class="o">=</span> <span class="n">AmrclawInputData</span><span class="p">(</span><span class="n">ndim</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;clawdata&#39;</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">datalist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clawdata</span><span class="p">)</span>
            <span class="n">geodata</span> <span class="o">=</span> <span class="n">GeoclawInputData</span><span class="p">(</span><span class="n">ndim</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;geodata&#39;</span><span class="p">,</span> <span class="n">geodata</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">datalist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">geodata</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">pkg</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;sharpclaw&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;xclawcmd&#39;</span><span class="p">,</span> <span class="s">&#39;xsclaw&#39;</span><span class="p">)</span>

            <span class="c"># Required data set for basic run parameters:</span>
            <span class="n">clawdata</span> <span class="o">=</span> <span class="n">SharpclawInputData</span><span class="p">(</span><span class="n">ndim</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;clawdata&#39;</span><span class="p">,</span> <span class="n">clawdata</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">datalist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clawdata</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s">&quot;Unrecognized Clawpack pkg = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">pkg</span><span class="p">)</span>

<div class="viewcode-block" id="ClawRunData.new_UserData"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.ClawRunData.new_UserData">[docs]</a>    <span class="k">def</span> <span class="nf">new_UserData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">fname</span><span class="p">):</span>
        <span class="s">r&quot;&quot;&quot;</span>
<span class="s">        Create a new attribute called name</span>
<span class="s">        for application specific data to be written</span>
<span class="s">        to the data file fname.</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">userdata</span> <span class="o">=</span> <span class="n">UserData</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datalist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">userdata</span><span class="p">)</span>
        <span class="k">exec</span><span class="p">(</span><span class="s">&#39;self.</span><span class="si">%s</span><span class="s"> = userdata&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">userdata</span>
</div>
<div class="viewcode-block" id="ClawRunData.add_GaugeData"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.ClawRunData.add_GaugeData">[docs]</a>    <span class="k">def</span> <span class="nf">add_GaugeData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">r&quot;&quot;&quot;</span>
<span class="s">        Create a gaugedata attribute for writing to gauges.data.</span>
<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">gaugedata</span> <span class="o">=</span> <span class="n">GaugeData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ndim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datalist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gaugedata</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gaugedata</span> <span class="o">=</span> <span class="n">gaugedata</span>
        <span class="k">return</span> <span class="n">gaugedata</span>
</div>
    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">datalist</span><span class="p">:</span>
            <span class="n">d</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="UserData"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.UserData">[docs]</a><span class="k">class</span> <span class="nc">UserData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
    <span class="s">r&quot;&quot;&quot;</span>
<span class="s">    Object that will be written out to user file such as setprob.data, as</span>
<span class="s">    determined by the fname attribute.</span>
<span class="s">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fname</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">UserData</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__fname</span> <span class="o">=</span> <span class="n">fname</span>  <span class="c"># file to be read by Fortran for this data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__descr</span> <span class="o">=</span> <span class="p">{}</span>     <span class="c"># dictionary to hold descriptions</span>

    <span class="k">def</span> <span class="nf">add_param</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="n">descr</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">__descr</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">descr</span>

    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
         <span class="k">print</span> <span class="s">&#39;Creating data file </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fname</span>
         <span class="n">make_userdatafile</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GaugeData"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.GaugeData">[docs]</a><span class="k">class</span> <span class="nc">GaugeData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
    <span class="s">r&quot;&quot;&quot;</span>
<span class="s">    Data to be written out to gauge.data specifying gauges.</span>
<span class="s">    DEPRECATED:  Use GeoclawInputData  instead.</span>
<span class="s">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ndim</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">GaugeData</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;ndim&#39;</span><span class="p">,</span><span class="n">ndim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;ngauges&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__gauge_dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">add_gauge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">gaugeno</span><span class="p">,</span><span class="n">location</span><span class="p">,</span><span class="n">time_interval</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__gauge_dict</span><span class="p">[</span><span class="n">gaugeno</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">gaugeno</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">time_interval</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ngauges</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__gauge_dict</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&#39;Creating data file gauges.data&#39;</span>

        <span class="c"># open file and write a warning header:</span>
        <span class="nb">file</span> <span class="o">=</span> <span class="n">open_datafile</span><span class="p">(</span><span class="s">&#39;gauges.data&#39;</span><span class="p">)</span>

        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;ngauges&#39;</span><span class="p">,</span> <span class="s">&#39;Number of gauges&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

        <span class="n">ndim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndim</span>

        <span class="c"># write a line for each gauge:</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">gaugeno</span><span class="p">,</span> <span class="n">gdata</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__gauge_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">tmin</span> <span class="o">=</span> <span class="n">gdata</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">tmax</span> <span class="o">=</span> <span class="n">gdata</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gdata</span><span class="p">[</span><span class="mi">1</span><span class="p">],(</span><span class="nb">list</span><span class="p">,</span><span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">xyz</span> <span class="o">=</span> <span class="n">gdata</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">ndim</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">ndim</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">:</span>
                    <span class="n">z</span> <span class="o">=</span> <span class="n">xyz</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">gdata</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">ndim</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%i</span><span class="s">   </span><span class="si">%e</span><span class="s">   </span><span class="si">%e</span><span class="s">   </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">gdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">x</span><span class="p">,</span><span class="n">tmin</span><span class="p">,</span><span class="n">tmax</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">ndim</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
                <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%i</span><span class="s">   </span><span class="si">%e</span><span class="s">   </span><span class="si">%e</span><span class="s">   </span><span class="si">%e</span><span class="s">   </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">gdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">tmin</span><span class="p">,</span><span class="n">tmax</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">ndim</span><span class="o">==</span><span class="mi">3</span><span class="p">:</span>
                <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%i</span><span class="s">   </span><span class="si">%e</span><span class="s">   </span><span class="si">%e</span><span class="s">   </span><span class="si">%e</span><span class="s">   </span><span class="si">%e</span><span class="s">   </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">gdata</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">tmin</span><span class="p">,</span><span class="n">tmax</span><span class="p">))</span>

        <span class="n">printxyz</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s">&#39;x  &#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s">&#39;x  y  &#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s">&#39;x  y  z&#39;</span><span class="p">}</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n\n</span><span class="s"># Format of each line: </span><span class="se">\n</span><span class="s">#   gaugeno  </span><span class="si">%s</span><span class="s"> tmin tmax&#39;</span>\
                     <span class="o">%</span> <span class="n">printxyz</span><span class="p">[</span><span class="n">ndim</span><span class="p">])</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="GeoclawInputData"><a class="viewcode-back" href="../../sphinx/pyclaw/data.html#pyclaw.data.GeoclawInputData">[docs]</a><span class="k">class</span> <span class="nc">GeoclawInputData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
    <span class="s">r&quot;&quot;&quot;</span>
<span class="s">    Object that will be written out to the various GeoClaw data files.</span>
<span class="s">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ndim</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">GeoclawInputData</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>

        <span class="c"># Set default values:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;igravity&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;iqinit&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;icoriolis&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;Rearth&#39;</span><span class="p">,</span><span class="mf">6367500.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_attribute</span><span class="p">(</span><span class="s">&#39;variable_dt_refinement_ratios&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
        <span class="c"># NEED TO CONTINUE!</span>

    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">print</span> <span class="s">&#39;Creating data file setgeo.data&#39;</span>
        <span class="c"># open file and write a warning header:</span>
        <span class="nb">file</span> <span class="o">=</span> <span class="n">open_datafile</span><span class="p">(</span><span class="s">&#39;setgeo.data&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;igravity&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;gravity&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;icoordsys&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;icoriolis&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;Rearth&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;variable_dt_refinement_ratios&#39;</span><span class="p">)</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="k">print</span> <span class="s">&#39;Creating data file settsunami.data&#39;</span>
        <span class="c"># open file and write a warning header:</span>
        <span class="nb">file</span> <span class="o">=</span> <span class="n">open_datafile</span><span class="p">(</span><span class="s">&#39;settsunami.data&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;sealevel&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;drytolerance&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;wavetolerance&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;depthdeep&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;maxleveldeep&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;ifriction&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;coeffmanning&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;frictiondepth&#39;</span><span class="p">)</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="k">print</span> <span class="s">&#39;Creating data file settopo.data&#39;</span>
        <span class="c"># open file and write a warning header:</span>
        <span class="nb">file</span> <span class="o">=</span> <span class="n">open_datafile</span><span class="p">(</span><span class="s">&#39;settopo.data&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ntopofiles</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">topofiles</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;ntopofiles&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">tfile</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">topofiles</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">tfile</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&quot;*** Error: file not found: &quot;</span><span class="p">,</span><span class="n">tfile</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">raise</span> <span class="n">MissingFile</span><span class="p">(</span><span class="s">&quot;file not found&quot;</span><span class="p">)</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">&#39; </span><span class="se">\n</span><span class="s"> &quot;</span> <span class="o">%</span> <span class="n">fname</span><span class="p">)</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%3i</span><span class="s"> </span><span class="si">%3i</span><span class="s"> </span><span class="si">%3i</span><span class="s"> </span><span class="si">%20.10e</span><span class="s"> </span><span class="si">%20.10e</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">tfile</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="k">print</span> <span class="s">&#39;Creating data file setdtopo.data&#39;</span>
        <span class="c"># open file and write a warning header:</span>
        <span class="nb">file</span> <span class="o">=</span> <span class="n">open_datafile</span><span class="p">(</span><span class="s">&#39;setdtopo.data&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mdtopofiles</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dtopofiles</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;mdtopofiles&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">tfile</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtopofiles</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fname</span> <span class="o">=</span> <span class="s">&quot;&#39;</span><span class="si">%s</span><span class="s">&#39;&quot;</span> <span class="o">%</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">tfile</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&quot;*** Error: file not found: &quot;</span><span class="p">,</span><span class="n">tfile</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">raise</span> <span class="n">MissingFile</span><span class="p">(</span><span class="s">&quot;file not found&quot;</span><span class="p">)</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="si">%s</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">fname</span><span class="p">)</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%3i</span><span class="s"> </span><span class="si">%3i</span><span class="s"> </span><span class="si">%3i</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">tfile</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="k">print</span> <span class="s">&#39;Creating data file setqinit.data&#39;</span>
        <span class="c"># open file and write a warning header:</span>
        <span class="nb">file</span> <span class="o">=</span> <span class="n">open_datafile</span><span class="p">(</span><span class="s">&#39;setqinit.data&#39;</span><span class="p">)</span>
        <span class="c"># self.iqinit tells which component of q is perturbed!</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;iqinit&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">tfile</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">qinitfiles</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fname</span> <span class="o">=</span> <span class="s">&quot;&#39;</span><span class="si">%s</span><span class="s">&#39;&quot;</span> <span class="o">%</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">tfile</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&quot;*** Error: file not found: &quot;</span><span class="p">,</span><span class="n">tfile</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">raise</span> <span class="n">MissingFile</span><span class="p">(</span><span class="s">&quot;file not found&quot;</span><span class="p">)</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="si">%s</span><span class="s">  </span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">fname</span><span class="p">)</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%3i</span><span class="s"> </span><span class="si">%3i</span><span class="s"> </span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">tfile</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="n">make_setgauges_datafile</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<span class="c">#        print &#39;Creating data file setgauges.data&#39;</span>
<span class="c">#        # open file and write a warning header:</span>
<span class="c">#        file = open_datafile(&#39;setgauges.data&#39;)</span>
<span class="c">#        self.ngauges = len(self.gauges)</span>
<span class="c">#        data_write(file, self, &#39;ngauges&#39;)</span>
<span class="c">#        data_write(file, self, None)</span>
<span class="c">#        gaugeno_used = []</span>
<span class="c">#        for gauge in self.gauges:</span>
<span class="c">#            gaugeno = gauge[0]</span>
<span class="c">#            if gaugeno in gaugeno_used:</span>
<span class="c">#                print &quot;*** Gauge number %s used more than once! &quot; % gaugeno</span>
<span class="c">#                raise Exception(&quot;Repeated gauge number&quot;)</span>
<span class="c">#            else:</span>
<span class="c">#                gaugeno_used.append(gauge[0])</span>
<span class="c">#            gauge.append(gaugeno)</span>
<span class="c">#            file.write(&quot;%3i %19.10e  %19.10e  %15.6e  %15.6e  =: gauge%s\n&quot; % tuple(gauge))</span>
<span class="c">#        file.close()</span>


        <span class="k">print</span> <span class="s">&#39;Creating data file setfixedgrids.data&#39;</span>
        <span class="c"># open file and write a warning header:</span>
        <span class="nb">file</span> <span class="o">=</span> <span class="n">open_datafile</span><span class="p">(</span><span class="s">&#39;setfixedgrids.data&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nfixedgrids</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fixedgrids</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;nfixedgrids&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">fixedgrid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixedgrids</span><span class="p">:</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">11</span><span class="o">*</span><span class="s">&quot;</span><span class="si">%g</span><span class="s">  &quot;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">fixedgrid</span><span class="p">)</span> <span class="o">+</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


        <span class="k">print</span> <span class="s">&#39;Creating data file setregions.data&#39;</span>
        <span class="c"># open file and write a warning header:</span>
        <span class="nb">file</span> <span class="o">=</span> <span class="n">open_datafile</span><span class="p">(</span><span class="s">&#39;setregions.data&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nregions</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">regions</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;nregions&#39;</span><span class="p">)</span>
        <span class="n">data_write</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">regions</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">regions</span><span class="p">:</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">8</span><span class="o">*</span><span class="s">&quot;</span><span class="si">%g</span><span class="s">  &quot;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">regions</span><span class="p">)</span> <span class="o">+</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div></div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
<li><a href="http://www.clawpack.org"><font color="#7F0000">Clawpack Webpage</font></a>|&nbsp;</li>
<li><a href="../../apps.html"><font color="#7F0000">Gallery</font></a>|&nbsp;</li>
<li><a href="../../index.html"><font color="#7F0000">Contents</font></a>|&nbsp;</li>

          <li><a href="../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010-2011, Kyle Mandli, David I. Ketcheson, Amal Alghamdi, and Aron Ahmadia.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>