

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation of PetClaw dependencies on Mac OS X 10.6.x &mdash; PyClaw v0.1 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="/Users/ketch/Software/jsmath/easy/load.js"></script>
    <link rel="shortcut icon" href="../_static/clawicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="PyClaw v0.1 documentation" href="../index.html" />
    <link rel="next" title="Pyclaw Controller Class" href="../controller.html" />
    <link rel="prev" title="About PetClaw" href="about.html" /> 
  </head>
  <body>

<div style="background-color: #FFFFE8; text-align: left; padding: 10px 10px 15px 15px">
<table>
<tr>
<!--
<td>
&nbsp;
<br>
<a href="http://www.clawpack.org/"><img src="../_static/clawlogo.jpg" border="0" alt="Clawpack logo"/></a>
</td>
-->
<td>
<br>
&nbsp;
<br>
<a href
<font size="7"  color="#7F0000"> PyClaw Documentation</font>
<br>
&nbsp;
<br>
</td>
</tr>
</table>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../controller.html" title="Pyclaw Controller Class"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="about.html" title="About PetClaw"
             accesskey="P">previous</a> |</li>
<li><a href="http://www.clawpack.org"><font color="#7F0000">Clawpack Webpage</font></a>|&nbsp;</li>
<li><a href="../gallery/gallery_all.html.html"><font color="#7F0000">Gallery</font></a>|&nbsp;</li>
<li><a href="../index.html"><font color="#7F0000">Contents</font></a>|&nbsp;</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/clawlogo.jpg" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation of PetClaw dependencies on Mac OS X 10.6.x</a><ul>
<li><a class="reference internal" href="#installation-of-python-2-7">Installation of python 2.7</a></li>
<li><a class="reference internal" href="#installation-of-numpy-1-5-or-1-5-1">Installation of Numpy 1.5 or 1.5.1</a></li>
<li><a class="reference internal" href="#installation-of-petsc">Installation of PETSc</a></li>
<li><a class="reference internal" href="#installation-of-petsc4py">Installation of petsc4py</a></li>
<li><a class="reference internal" href="#installation-of-mpi4py">Installation of mpi4py</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="about.html"
                        title="previous chapter">About PetClaw</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../controller.html"
                        title="next chapter">Pyclaw Controller Class</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/petclaw/installationMac.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installation-of-petclaw-dependencies-on-mac-os-x-10-6-x">
<span id="installationdepspetclawmacosx"></span><h1>Installation of PetClaw dependencies on Mac OS X 10.6.x<a class="headerlink" href="#installation-of-petclaw-dependencies-on-mac-os-x-10-6-x" title="Permalink to this headline">¶</a></h1>
<p>This section explains how to install all the PetClaw dependencies on Mac OS X 10.6.x (Snow Leopard).
The following softwares will be installed:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://www.python.org/">Python</a>.The current recommended python version is 2.7.
Python 3.0 will be supported in the near future.</li>
<li><a class="reference external" href="http://numpy.scipy.org/">Numpy</a> 1.5 or 1.5.1.</li>
<li><a class="reference external" href="http://www.mcs.anl.gov/petsc/petsc-as/">PETSc</a>-dev.</li>
<li><a class="reference external" href="http://code.google.com/p/petsc4py/">petsc4py</a>-dev</li>
<li><a class="reference external" href="http://mpi4py.scipy.org/docs/usrman/index.html">mpi4py</a>.
The current recommended version is 1.2.2.</li>
</ul>
</div></blockquote>
<div class="section" id="installation-of-python-2-7">
<h2>Installation of python 2.7<a class="headerlink" href="#installation-of-python-2-7" title="Permalink to this headline">¶</a></h2>
<p>Enthought python 2.7 academic distribution is considered in this notes. However, other python distributions also work fine.</p>
<p>At the time of writing this document the most recent stable release is EPD-7.0-2. Download 32- or 64-bit Enthought python distribution from: <a class="reference external" href="http://download.enthought.com/academic-epd-7.0/">http://download.enthought.com/academic-epd-7.0/</a>.</p>
<p>Then:</p>
<blockquote>
<div><ul class="simple">
<li>Double-click on the .dmg file to mount the image</li>
<li>Double-click on the .mpkg file to run the installer</li>
</ul>
</div></blockquote>
<p>The installer will install EPD Python 2.7 in your system (typically in /Library/Frameworks/EPD64.framework/) and it will set the path for EPD-7.0-2.</p>
</div>
<div class="section" id="installation-of-numpy-1-5-or-1-5-1">
<h2>Installation of Numpy 1.5 or 1.5.1<a class="headerlink" href="#installation-of-numpy-1-5-or-1-5-1" title="Permalink to this headline">¶</a></h2>
<p>Enthought Python 2.7 comes already with numpy 1.5 or 1.5.1 (see <a class="reference external" href="http://www.enthought.com/EPDChangelog.html">EPDChangelog</a>) which is the supported and recommended version for PetClaw. If you have a different Python distribution check if you have numpy 1.5 or 1.5.1. In case you need to install it, do:</p>
<div class="highlight-python"><pre>$ cd path/to/the/dir/where/you/want/download/numpy</pre>
</div>
<p>Then,</p>
<div class="highlight-python"><pre>$ svn co http://svn.scipy.org/svn/numpy/tags/1.5.0 numpy</pre>
</div>
<p>or</p>
<div class="highlight-python"><pre>$ svn co http://svn.scipy.org/svn/numpy/tags/1.5.1 numpy</pre>
</div>
<p>Next,</p>
<div class="highlight-python"><pre>$ cd numpy
$ sudo python setup.py install</pre>
</div>
<p>To test the numpy 1.5 or 1.5.1 functionality open a terminal and run python</p>
<div class="highlight-python"><pre>$ python</pre>
</div>
<p>Then type</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>
</pre></div>
</div>
<p>You should get something like</p>
<blockquote>
<div><ul class="simple">
<li>Ran 2983 tests in 10.194s</li>
<li>OK (KNOWNFAIL=4, SKIP=1) &lt;nose.result.TextTestResult run=2983 errors=0 failures=0&gt;</li>
</ul>
</div></blockquote>
<p><strong>NOTE</strong>:On 2011-05-14 numpy 1.6 has been released. This release has not been tested yet with PetClaw!</p>
</div>
<div class="section" id="installation-of-petsc">
<h2>Installation of PETSc<a class="headerlink" href="#installation-of-petsc" title="Permalink to this headline">¶</a></h2>
<p>In order to use PetClaw in combination with the implicit time stepping schemes implemented in PETSc the development version of PETSc i needed. PETSc-dev can be obtained using three approaches. Here we use <a class="reference external" href="http://mercurial.selenic.com/">Mercurial</a> to get it. Look at <a class="reference external" href="http://www.mcs.anl.gov/petsc/petsc-as/developers/index.html">http://www.mcs.anl.gov/petsc/petsc-as/developers/index.html</a> for more information.</p>
<p>Do:</p>
<div class="highlight-python"><pre>$ cd path/to/the/dir/where/you/want/download/Petsc-dev
$ hg clone http://petsc.cs.iit.edu/petsc/petsc-dev
$ cd petsc-dev/config
$ hg clone http://petsc.cs.iit.edu/petsc/BuildSystem BuildSystem</pre>
</div>
<p>For sh, bash, or zsh shells add the following lines to your shell start-up file:</p>
<div class="highlight-python"><pre>$ export PETSC_DIR=path/to/the/dir/where/you/downloaded/Petsc-dev/petsc-dev
$ export PETSC_ARCH=arch-darwin-c-debug</pre>
</div>
<p>whereas for csh/tcsh shells add the following lines to your shell start-up file:</p>
<div class="highlight-python"><pre>$ setenv PETSC_DIR path/to/the/dir/where/you/downloaded/Petsc-dev/petsc-dev
$ setenv PETSC_ARCH arch-darwin-c-debug</pre>
</div>
<p>Then configure PETSc-dev with the following command</p>
<div class="highlight-python"><pre>$ ./config/configure.py --with-cc=gcc --with-cxx=g++ --with-python=1 --download-mpich=1 --with-shared-libraries=1</pre>
</div>
<p>Note that one of the option is &#8211;download-mpich=1. This means that mpich is downloaded. If you do not need/want mpich, remove this option.</p>
<p>Once the configuration phase is completed, build PETSc libraries with</p>
<div class="highlight-python"><pre>$ make PETSC_DIR=path/to/the/dir/where/you/have/Petsc-dev PETSC_ARCH=arch-darwin-c-debug all</pre>
</div>
<p>Check if the libraries are working by running</p>
<div class="highlight-python"><pre>$ make PETSC_DIR=path/to/the/dir/where/you/have/Petsc-dev PETSC_ARCH=arch-darwin-c-debug test</pre>
</div>
</div>
<div class="section" id="installation-of-petsc4py">
<h2>Installation of petsc4py<a class="headerlink" href="#installation-of-petsc4py" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://code.google.com/p/petsc4py/">petsc4py</a> is a python binding for PETSc. Since in the previous step PETSc-dev has been installed, we also need to install petsc4py-dev. To install this binding correctly make sure that the PETSC_DIR and PETSC_ARCH are part of your shell start-up file.</p>
<p>Obtain petsc4py-dev with mercurial:</p>
<div class="highlight-python"><pre>$ cd path/to/the/dir/where/you/want/download/petsc4py
$ hg clone https://petsc4py.googlecode.com/hg/ petsc4py -r latest-changeset</pre>
</div>
<p>Install it:</p>
<div class="highlight-python"><pre>$ cd petsc4py-dev
$ python setup.py build --petsc_arch=arch-darwin-c-debug
$ python setup.py install --user</pre>
</div>
<p>To check petsc4py-dev installation do:</p>
<div class="highlight-python"><pre>$ cd petsc4py/test
$ python runtests.py</pre>
</div>
<p>All the tests cases should pass, i.e. OK should be printed at the screen.</p>
<p><strong>NOTE</strong> An alternative easier way to install petsc4py is using <a class="reference external" href="http://pypi.python.org/pypi/pip">pip</a>., i.e.</p>
<div class="highlight-python"><pre>$ cd petsc4py-dev
$ pip install . --user</pre>
</div>
</div>
<div class="section" id="installation-of-mpi4py">
<h2>Installation of mpi4py<a class="headerlink" href="#installation-of-mpi4py" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://mpi4py.scipy.org/docs/usrman/index.html">mpi4py</a> is a python bindings for MPI. Therefore, make sure that the MPI distributuion used by PETSc and petsc4py in your system is the same one that is used by mpi4py. During the PETSc configuration the option -–download-mpich=1 has been used. The binaries for the mpich used by PETSc can be found in the path $PETSC_DIR/$PETSC_ARCH/bin. This path should also be added to the environment variable PATH in the shell start-up file, i.e.:</p>
<blockquote>
<div><ul>
<li><p class="first">for sh, bash, or zsh shells add the following line to your shell start-up file</p>
<div class="highlight-python"><pre>$ export PATH=$PETSC_DIR/$PETSC_ARCH/bin:$PATH</pre>
</div>
</li>
<li><p class="first">for csh/tcsh shells add the following line to your shell start-up file</p>
<div class="highlight-python"><pre>$ setenv PATH "$PETSC_DIR/$PETSC_ARCH/bin:$PATH"</pre>
</div>
</li>
</ul>
</div></blockquote>
<p>Do the aforementioned step before installing mpi4py to guarantee that mpi4py is using the same binaries of mpich. Overlooking this point might cause errors in importing petsc4py.PETSc mpi4py.MPI modules.</p>
<p>Next, add the following line to your shell start-up file:</p>
<div class="highlight-python"><pre>$ export ARCHFLAGS="-arch x86_64"</pre>
</div>
<p>or</p>
<div class="highlight-python"><pre>$ setenv ARCHFLAGS "-arch x86_64"</pre>
</div>
<p>The current recommended version is 1.2.2. Download it from <a class="reference external" href="http://code.google.com/p/mpi4py/downloads/list">http://code.google.com/p/mpi4py/downloads/list</a>. Afterwards go to the directory where you have got mpi4py-1.2.2.tar.gz and do:</p>
<div class="highlight-python"><pre>$ tar -xzvf (or -xvf) mpi4py-1.2.2.tar.gz
$ cd mpi4py-1.1.2</pre>
</div>
<p>Install it:</p>
<div class="highlight-python"><pre>$ python setup.py install --user</pre>
</div>
<p>To check mpi4py installation do:</p>
<div class="highlight-python"><pre>$ mpiexec -n 4 python test/runalltest.py
$ mpiexec -n 4 python demo/helloworld.py</pre>
</div>
<dl class="docutils">
<dt>All the tests cases should pass, i.e. you should get</dt>
<dd><ul class="first last simple">
<li>OK</li>
</ul>
</dd>
<dt>and</dt>
<dd><ul class="first last simple">
<li>Hello, World! I am process 0 of 4 on kl-11638.local.</li>
<li>Hello, World! I am process 1 of 4 on kl-11638.local.</li>
<li>Hello, World! I am process 2 of 4 on kl-11638.local.</li>
<li>Hello, World! I am process 3 of 4 on kl-11638.local.</li>
</ul>
</dd>
</dl>
<p>for runalltest.py and helloworld.py, respectively.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../controller.html" title="Pyclaw Controller Class"
             >next</a> |</li>
        <li class="right" >
          <a href="about.html" title="About PetClaw"
             >previous</a> |</li>
<li><a href="http://www.clawpack.org"><font color="#7F0000">Clawpack Webpage</font></a>|&nbsp;</li>
<li><a href="../gallery/gallery_all.html.html"><font color="#7F0000">Gallery</font></a>|&nbsp;</li>
<li><a href="../index.html"><font color="#7F0000">Contents</font></a>|&nbsp;</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010-2011, Kyle Mandli, David I. Ketcheson, Amal Alghamdi, and Aron Ahmadia.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>