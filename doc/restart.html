

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Checkpointing and restarting &mdash; Clawpack 4.6.x documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '4.6.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/clawicon.ico"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="Clawpack 4.6.x documentation" href="index.html" />
    <link rel="next" title="Plotting options" href="plotting.html" />
    <link rel="prev" title="The mapc2p function" href="mapc2p.html" /> 
  </head>
  <body>

<div style="background-color: #FFFFE8; text-align: left; padding: 10px 10px 15px 15px">
<table>
<tr>
<!--
<td>
&nbsp;
<br>
<a href="http://www.clawpack.org/"><img src="_static/clawlogo.jpg" width=200 border="0" alt="Clawpack logo"/></a>
</td>
-->
<td>
&nbsp;
<br>
<p style="font-size:300%;color:#7F0000"> Clawpack Documentation
</p>
<br>
<p style="font-size:150%;color:#7F0000"> 
Version 5.0 --- Under Construction!  Not yet accurate
</p>

</td>
</tr>
</table>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="plotting.html" title="Plotting options"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="mapc2p.html" title="The mapc2p function"
             accesskey="P">previous</a> |</li>
<li><a href="http://www.clawpack.org"><font color="#7F0000">Clawpack Webpage</font></a>|&nbsp;</li>
<li><a href="index.html"><font color="#7F0000">Contents</font></a>|&nbsp;</li>
<li><a href="apps.html"><font color="#7F0000">Gallery</font></a>|&nbsp;</li>

 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/clawlogo.jpg" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Checkpointing and restarting</a><ul>
<li><a class="reference internal" href="#checkpointing-a-computation">Checkpointing a computation</a></li>
<li><a class="reference internal" href="#restarting-a-computation">Restarting a computation</a></li>
<li><a class="reference internal" href="#modifying-the-makefile-for-a-restart">Modifying the Makefile for a restart</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="mapc2p.html"
                        title="previous chapter">The mapc2p function</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="plotting.html"
                        title="next chapter">Plotting options</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/restart.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="checkpointing-and-restarting">
<span id="restart"></span><h1>Checkpointing and restarting<a class="headerlink" href="#checkpointing-and-restarting" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">These instructions currently only apply to <cite>amrclaw</cite> and
<cite>geoclaw</cite> codes.</p>
</div>
<div class="section" id="checkpointing-a-computation">
<span id="restart-checkpt"></span><h2>Checkpointing a computation<a class="headerlink" href="#checkpointing-a-computation" title="Permalink to this headline">¶</a></h2>
<p>In this section <cite>clawdata</cite> refers to the <cite>rundata.clawdata</cite> attribute
of an object of class <cite>ClawRunData</cite>, as is generally set at the top
of a <cite>setrun.py</cite> file.</p>
<p>The <cite>rundata.clawdata.checkpt_style</cite> parameter specified in <cite>setrun.py</cite> (see
<a class="reference internal" href="setrun.html#setrun"><em>Specifying run-time parameters in setrun.py</em></a>) determines how often checkpointing is done, if at all.</p>
<p>See the comments in <a class="reference internal" href="setrun_sample.html#setrun-sample"><em>Sample setrun.py module for classic Clawpack</em></a> for examples.</p>
<p>The checkpoint files are saved in the same output directory as the solution
output, with file names of the form <cite>fort.tchkNNNNN</cite> (a small ASCII file) and
<cite>fort.chkNNNNN</cite> (a large binary file)  where <cite>NNNNN</cite> is the
step number on the coarsest level.  These files containt all the information
needed to restart the computation at this point.</p>
</div>
<div class="section" id="restarting-a-computation">
<span id="restart-restart"></span><h2>Restarting a computation<a class="headerlink" href="#restarting-a-computation" title="Permalink to this headline">¶</a></h2>
<p>To restart a computation from any point where checkpoint files have been saved,
modify <cite>setrun.py</cite> to set:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">clawdata</span><span class="o">.</span><span class="n">restart</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">clawdata</span><span class="o">.</span><span class="n">restart_file</span> <span class="o">=</span> <span class="s">&#39;fort.chkNNNNN&#39;</span>
</pre></div>
</div>
<p>where <cite>NNNNN</cite> is the time step number from which the restart should
commence.</p>
<p>You should also modify the output time parameters to specify that the
computation should go to a later time than the time of the restart file
(which can be found in the file <cite>fort.tchkNNNNN</cite>).</p>
<p>Note the following in setting the new output times:</p>
<ul>
<li><p class="first">The value <cite>clawdata.t0</cite> should generally be left to the original starting
time of the computation.</p>
</li>
<li><p class="first">If <cite>clawdata.output_style==1</cite>, then <cite>clawdata.t0</cite> and <cite>clawdata.tfinal</cite>
along with <cite>clawdata.num_output_times</cite> are used to determine equally
spaced output times.  Only those times greater than the restart time will
be used as output times.</p>
<p>If <cite>clawdata.output_t0==True</cite> then a time frame will be output at the
restart time (not t0 in general).  This may duplicate the final frame that was
output from the original computation.  Set <cite>clawdata.output_t0 = False</cite>
to avoid this.</p>
</li>
<li><p class="first">If <cite>clawdata.output_style==2</cite>, then <cite>clawdata.output_times</cite> is a list of
output times and only those times greater than or equal to
the restart time will be used as output times.</p>
</li>
</ul>
</div>
<div class="section" id="modifying-the-makefile-for-a-restart">
<span id="restart-makefile"></span><h2>Modifying the Makefile for a restart<a class="headerlink" href="#modifying-the-makefile-for-a-restart" title="Permalink to this headline">¶</a></h2>
<p>To restart a computation, it is necessary to modify the <cite>Makefile</cite> as well
as <cite>setrun.py</cite>.  In the <cite>Makefile</cite>, set:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">RESTART</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p>This will ensure that the original set of output files (for times up to the
restart time) and the checkpoint
file will not be deleted.  They will still be available in the output directory
along with the newly created output files.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="plotting.html" title="Plotting options"
             >next</a> |</li>
        <li class="right" >
          <a href="mapc2p.html" title="The mapc2p function"
             >previous</a> |</li>
<li><a href="http://www.clawpack.org"><font color="#7F0000">Clawpack Webpage</font></a>|&nbsp;</li>
<li><a href="index.html"><font color="#7F0000">Contents</font></a>|&nbsp;</li>
<li><a href="apps.html"><font color="#7F0000">Gallery</font></a>|&nbsp;</li>

 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Randall J. LeVeque and others.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>