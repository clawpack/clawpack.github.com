

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Plotting hints and FAQ &mdash; Clawpack 5.0.0rc-alpha documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '5.0.0rc-alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/clawicon.ico"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="Clawpack 5.0.0rc-alpha documentation" href="index.html" />
    <link rel="next" title="GeoClaw plotting tools" href="geoplot.html" />
    <link rel="prev" title="Plotting examples" href="plotexamples.html" /> 
  </head>
  <body>

<div style="background-color: #FFFFE8; text-align: left; padding: 10px 10px 15px 15px">
<table>
<tr>
<!--
<td>
&nbsp;
<br>
<a href="http://www.clawpack.org/"><img src="_static/clawlogo.jpg" width=200 border="0" alt="Clawpack logo"/></a>
</td>
-->
<td>
&nbsp;
<br>
<p style="font-size:300%;color:#7F0000"> Clawpack Documentation
</p>
<br>
<p style="font-size:150%;color:#7F0000"> 
Version 5.0 --- Under Construction!  Not yet accurate
</p>

</td>
</tr>
</table>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="geoplot.html" title="GeoClaw plotting tools"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="plotexamples.html" title="Plotting examples"
             accesskey="P">previous</a> |</li>
<li><a href="http://www.clawpack.org"><font color="#7F0000">Clawpack Webpage</font></a>|&nbsp;</li>
<li><a href="index.html"><font color="#7F0000">Contents</font></a>|&nbsp;</li>
<li><a href="apps.html"><font color="#7F0000">Gallery</font></a>|&nbsp;</li>

 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/clawlogo.jpg" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Plotting hints and FAQ</a><ul>
<li><a class="reference internal" href="#what-s-the-difference-between-make-plots-and-make-plots">What&#8217;s the difference between <tt class="docutils literal"><span class="pre">make</span> <span class="pre">.plots</span></tt> and <tt class="docutils literal"><span class="pre">make</span> <span class="pre">plots</span></tt> ?</a></li>
<li><a class="reference internal" href="#how-to-plot-a-something-other-than-a-component-of-q">How to plot a something other than a component of q?</a></li>
<li><a class="reference internal" href="#how-to-add-another-curve-to-a-plot-e-g-the-true-solution">How to add another curve to a plot, e.g. the true solution?</a></li>
<li><a class="reference internal" href="#how-to-change-the-title-in-a-plot">How to change the title in a plot?</a></li>
<li><a class="reference internal" href="#how-to-specify-outdir-the-directory-to-find-fort-files-for-plotting">How to specify <tt class="docutils literal"><span class="pre">outdir</span></tt>, the directory to find <tt class="docutils literal"><span class="pre">fort.*</span></tt> files for plotting?</a></li>
<li><a class="reference internal" href="#how-to-specify-a-different-outdir-for-some-plot-item">How to specify a different <tt class="docutils literal"><span class="pre">outdir</span></tt> for some plot item?</a></li>
<li><a class="reference internal" href="#how-to-set-plot-parameters-that-are-not-provided-as-attributes-of-clawplotitem">How to set plot parameters that are not provided as attributes of <tt class="docutils literal"><span class="pre">ClawPlotItem</span></tt>?</a></li>
<li><a class="reference internal" href="#how-to-change-the-size-or-background-color-of-a-figure">How to change the size or background color of a figure?</a></li>
<li><a class="reference internal" href="#specifying-colormaps-for-pcolor-or-contourf-plots">Specifying colormaps for pcolor or contourf plots</a></li>
<li><a class="reference internal" href="#how-to-debug-setplot-py">How to debug setplot.py?</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="plotexamples.html"
                        title="previous chapter">Plotting examples</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="geoplot.html"
                        title="next chapter">GeoClaw plotting tools</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/plotting_faq.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="plotting-hints-and-faq">
<span id="plotting-faq"></span><h1><a class="toc-backref" href="#id1">Plotting hints and FAQ</a><a class="headerlink" href="#plotting-hints-and-faq" title="Permalink to this headline">¶</a></h1>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="plotting.html#plotting"><em>Plotting options</em></a>,
<a class="reference internal" href="setplot.html#setplot"><em>Using setplot.py to specify the desired plots</em></a>,
<a class="reference internal" href="plotexamples.html#plotexamples"><em>Plotting examples</em></a></p>
</div>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#plotting-hints-and-faq" id="id1">Plotting hints and FAQ</a><ul>
<li><a class="reference internal" href="#what-s-the-difference-between-make-plots-and-make-plots" id="id2">What&#8217;s the difference between <tt class="docutils literal"><span class="pre">make</span> <span class="pre">.plots</span></tt> and <tt class="docutils literal"><span class="pre">make</span> <span class="pre">plots</span></tt> ?</a></li>
<li><a class="reference internal" href="#how-to-plot-a-something-other-than-a-component-of-q" id="id3">How to plot a something other than a component of q?</a></li>
<li><a class="reference internal" href="#how-to-add-another-curve-to-a-plot-e-g-the-true-solution" id="id4">How to add another curve to a plot, e.g. the true solution?</a></li>
<li><a class="reference internal" href="#how-to-change-the-title-in-a-plot" id="id5">How to change the title in a plot?</a></li>
<li><a class="reference internal" href="#how-to-specify-outdir-the-directory-to-find-fort-files-for-plotting" id="id6">How to specify <tt class="docutils literal"><span class="pre">outdir</span></tt>, the directory to find <tt class="docutils literal"><span class="pre">fort.*</span></tt> files for plotting?</a></li>
<li><a class="reference internal" href="#how-to-specify-a-different-outdir-for-some-plot-item" id="id7">How to specify a different <tt class="docutils literal"><span class="pre">outdir</span></tt> for some plot item?</a></li>
<li><a class="reference internal" href="#how-to-set-plot-parameters-that-are-not-provided-as-attributes-of-clawplotitem" id="id8">How to set plot parameters that are not provided as attributes of <a class="reference internal" href="ClawPlotItem.html#clawplotitem"><em>ClawPlotItem</em></a>?</a></li>
<li><a class="reference internal" href="#how-to-change-the-size-or-background-color-of-a-figure" id="id9">How to change the size or background color of a figure?</a></li>
<li><a class="reference internal" href="#specifying-colormaps-for-pcolor-or-contourf-plots" id="id10">Specifying colormaps for pcolor or contourf plots</a></li>
<li><a class="reference internal" href="#how-to-debug-setplot-py" id="id11">How to debug setplot.py?</a></li>
</ul>
</li>
</ul>
</div>
<p>More to come!</p>
<div class="section" id="what-s-the-difference-between-make-plots-and-make-plots">
<h2><a class="toc-backref" href="#id2">What&#8217;s the difference between <tt class="docutils literal"><span class="pre">make</span> <span class="pre">.plots</span></tt> and <tt class="docutils literal"><span class="pre">make</span> <span class="pre">plots</span></tt> ?</a><a class="headerlink" href="#what-s-the-difference-between-make-plots-and-make-plots" title="Permalink to this headline">¶</a></h2>
<p>The default Makefile configuration in Version 4.5.1 was changed to allow two
different targets <tt class="docutils literal"><span class="pre">.plots</span></tt> and <tt class="docutils literal"><span class="pre">plots</span></tt>.  The former creates a
hidden file <tt class="docutils literal"><span class="pre">.plots</span></tt> whose modification time is used to check dependencies.
The plotting commands will be performed again only if the output of
<tt class="docutils literal"><span class="pre">setplot</span></tt> file has been changed, and will also re-run the code if it appears
that the output is out of date relative to the <tt class="docutils literal"><span class="pre">setrun</span></tt> file, for example.
If you want to create the plots without checking dependencies (and perhaps
accidentally re-running the code), use the <tt class="docutils literal"><span class="pre">make</span> <span class="pre">plots</span></tt> option.
<tt class="docutils literal"><span class="pre">plots</span></tt> is a phony target in the default Makefile.</p>
</div>
<div class="section" id="how-to-plot-a-something-other-than-a-component-of-q">
<h2><a class="toc-backref" href="#id3">How to plot a something other than a component of q?</a><a class="headerlink" href="#how-to-plot-a-something-other-than-a-component-of-q" title="Permalink to this headline">¶</a></h2>
<p>Objects of class <a class="reference internal" href="ClawPlotItem.html#clawplotitem"><em>ClawPlotItem</em></a> have an attribute <tt class="docutils literal"><span class="pre">plot_var</span></tt>.  If
this is set to an integer than the corresponding component of q is plotted
(remembering that Python indexing starts at 0, so <tt class="docutils literal"><span class="pre">plot_var</span> <span class="pre">=</span> <span class="pre">0</span></tt> will
specify plotting the first component of q, for example).</p>
<p>If plot_var is a function then this function is applied to applied to
<a class="reference internal" href="current_data.html#current-data"><em>current_data</em></a> and should return the array of values to be plotted.
For an example, see <em class="xref std std-ref">plotexample-acou-1d-6</em>.</p>
<p>Sometimes you want to plot something other than the solution on the patch,
for example to add another feature to a plot of the solution. This can be
done via an <tt class="docutils literal"><span class="pre">afteraxes</span></tt> command, for example, which is called after all
items have been plotted on the current axes.  See <a class="reference internal" href="ClawPlotAxes.html#clawplotaxes"><em>ClawPlotAxes</em></a> for
details and an example.</p>
</div>
<div class="section" id="how-to-add-another-curve-to-a-plot-e-g-the-true-solution">
<h2><a class="toc-backref" href="#id4">How to add another curve to a plot, e.g. the true solution?</a><a class="headerlink" href="#how-to-add-another-curve-to-a-plot-e-g-the-true-solution" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">afteraxes</span></tt> attribute of a <em class="xref std std-ref">ClawPlotAxes`</em> object can be specified as
either a string or a function.  The string is executed (using <tt class="docutils literal"><span class="pre">exec(...)</span></tt>) or
the function is called after performing
all plots on these axes (as specified by <em class="xref std std-ref">ClawPlotItem`</em> objects).
This can be used to add a curve to a plot.</p>
<p>For example, if the true solution to an advection equation
is known to be <span class="math">\(q(x,t) = \sin(x+t)\)</span>, this could be added to a plot  as a
red curve via:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">add_true_solution</span><span class="p">(</span><span class="n">current_data</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">sin</span><span class="p">,</span> <span class="n">plot</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">current_data</span><span class="o">.</span><span class="n">x</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">current_data</span><span class="o">.</span><span class="n">t</span>
    <span class="n">qtrue</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">t</span><span class="p">)</span>
    <span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">qtrue</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span>

<span class="n">plotaxes</span><span class="o">.</span><span class="n">afteraxes</span> <span class="o">=</span> <span class="n">add_true_solution</span>
</pre></div>
</div>
</div>
<div class="section" id="how-to-change-the-title-in-a-plot">
<h2><a class="toc-backref" href="#id5">How to change the title in a plot?</a><a class="headerlink" href="#how-to-change-the-title-in-a-plot" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">title</span></tt> attribute of a <em class="xref std std-ref">ClawPlotAxes`</em> object determines the title that
appears a the top of the plot.</p>
<p>The <tt class="docutils literal"><span class="pre">title_with_t</span></tt> attributed determines if the time is included in this title.
If True (the default value), then &#8220;at time t = ...&#8221; is appended to the title.
The time is printed using format <tt class="docutils literal"><span class="pre">14.8f</span></tt> if <tt class="docutils literal"><span class="pre">(t&gt;=0.001)</span> <span class="pre">&amp;</span> <span class="pre">(t&lt;1000.)</span></tt>,
or format <tt class="docutils literal"><span class="pre">14.8e</span></tt> more generally.</p>
<p>It is also possible to change the title using and afteraxes function.  For
example, to create a larger title with fontsize 20 and only 4 digits in t:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">add_title</span><span class="p">(</span><span class="n">current_data</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">title</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">current_data</span><span class="o">.</span><span class="n">t</span>
    <span class="n">title</span><span class="p">(</span><span class="s">&quot;Solution at time t = </span><span class="si">%10.4e</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">t</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="n">plotaxes</span><span class="o">.</span><span class="n">afteraxes</span> <span class="o">=</span> <span class="n">add_title</span>
</pre></div>
</div>
</div>
<div class="section" id="how-to-specify-outdir-the-directory-to-find-fort-files-for-plotting">
<h2><a class="toc-backref" href="#id6">How to specify <tt class="docutils literal"><span class="pre">outdir</span></tt>, the directory to find <tt class="docutils literal"><span class="pre">fort.*</span></tt> files for plotting?</a><a class="headerlink" href="#how-to-specify-outdir-the-directory-to-find-fort-files-for-plotting" title="Permalink to this headline">¶</a></h2>
<p>This is normally determined by the <tt class="docutils literal"><span class="pre">outdir</span></tt> attribute of
the <a class="reference internal" href="ClawPlotData.html#clawplotdata"><em>ClawPlotData</em></a> object directing the plotting.  But see the next FAQ
for the option of using different directories for some plot items (e.g. to
compare results of two computations).</p>
<p>If you are making a set of hardcopy plots using:</p>
<div class="highlight-python"><pre>$ make .plots</pre>
</div>
<p>or</p>
<blockquote>
<div>$ make plots</div></blockquote>
<p>then <tt class="docutils literal"><span class="pre">outdir</span></tt> is specified in the Makefile by setting the <tt class="docutils literal"><span class="pre">CLAW_OUTDIR</span></tt>
variable.</p>
<p>If you are making plots interactively using <a href="#id12"><span class="problematic" id="id13">Iplotclaw_</span></a>, then you can
directly specify the <tt class="docutils literal"><span class="pre">outdir</span></tt> as a parameter, e.g.:</p>
<div class="highlight-python"><pre>In[1]: ip=Iplotclaw(outdir="_output");   ip.plotloop()</pre>
</div>
<p>If you don&#8217;t specify this parameter, <a href="#id14"><span class="problematic" id="id15">`Iplotclaw`_</span></a> will look for a file
<tt class="docutils literal"><span class="pre">.output</span></tt> in the current directory.  If you created the <tt class="docutils literal"><span class="pre">fort.*</span></tt> files by
the command:</p>
<div class="highlight-python"><pre>$ make .output</pre>
</div>
<p>then the output directory is set in the Makefile and the file <tt class="docutils literal"><span class="pre">.output</span></tt>
contains the path to the output directory.</p>
<p>Note: If you use</p>
<blockquote>
<div>$ make output</div></blockquote>
<p>which does not check dependencies, this also
does not create a target file <tt class="docutils literal"><span class="pre">.output</span></tt>.</p>
<p>If the file <tt class="docutils literal"><span class="pre">.output</span></tt> does not exist,  <tt class="docutils literal"><span class="pre">outdir</span> <span class="pre">=</span> <span class="pre">'.'</span></tt> is used by
default, the current directory.</p>
<p>Note that if you stop a calculation mid-stream using <tt class="docutils literal"><span class="pre">&lt;ctrl&gt;-C</span></tt>, the file
<tt class="docutils literal"><span class="pre">.output</span></tt> may not exist or be correct, since this file is written after
the execution finishes.</p>
</div>
<div class="section" id="how-to-specify-a-different-outdir-for-some-plot-item">
<h2><a class="toc-backref" href="#id7">How to specify a different <tt class="docutils literal"><span class="pre">outdir</span></tt> for some plot item?</a><a class="headerlink" href="#how-to-specify-a-different-outdir-for-some-plot-item" title="Permalink to this headline">¶</a></h2>
<p>If you want one plot item on an axis to use the default <tt class="docutils literal"><span class="pre">plotdata.outdir</span></tt>
while another to take data from a different directory (in order to compare
two computations, for example), you can set the <tt class="docutils literal"><span class="pre">outdir</span></tt>
attribute of a <a class="reference internal" href="ClawPlotItem.html#clawplotitem"><em>ClawPlotItem</em></a> directly.  If you do not set it, by
default it inherits from the <a class="reference internal" href="ClawPlotFigure.html#clawplotfigure"><em>ClawPlotFigure</em></a> object this item belongs
to.</p>
<p>For example, you might have the following in your <tt class="docutils literal"><span class="pre">setplot</span></tt> function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">plotfigure</span> <span class="o">=</span> <span class="n">plotdata</span><span class="o">.</span><span class="n">new_plotfigure</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;compare&#39;</span><span class="p">,</span> <span class="n">figno</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plotaxes</span> <span class="o">=</span> <span class="n">plotfigure</span><span class="o">.</span><span class="n">new_plotaxes</span><span class="p">()</span>

<span class="n">plotitem</span> <span class="o">=</span> <span class="n">plotaxes</span><span class="o">.</span><span class="n">new_plotitem</span><span class="p">(</span><span class="n">plot_type</span><span class="o">=</span><span class="s">&#39;1d_plot&#39;</span><span class="p">)</span>
<span class="n">plotitem</span><span class="o">.</span><span class="n">plot_var</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">plotitem</span><span class="o">.</span><span class="n">plotstyle</span> <span class="o">=</span> <span class="s">&#39;-o&#39;</span>
<span class="n">plotitem</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s">&#39;b&#39;</span>

<span class="n">plotitem</span> <span class="o">=</span> <span class="n">plotaxes</span><span class="o">.</span><span class="n">new_plotitem</span><span class="p">(</span><span class="n">plot_type</span><span class="o">=</span><span class="s">&#39;1d_plot&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">plotitem</span><span class="o">.</span><span class="n">outdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s">&#39;_output2&#39;</span><span class="p">)</span>
<span class="n">plotitem</span><span class="o">.</span><span class="n">plot_var</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">plotitem</span><span class="o">.</span><span class="n">plotstyle</span> <span class="o">=</span> <span class="s">&#39;-+&#39;</span>
<span class="n">plotitem</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s">&#39;r&#39;</span>
</pre></div>
</div>
<p>This would plot results from <tt class="docutils literal"><span class="pre">plotdata.outdir</span></tt> as blue circles and results
from <tt class="docutils literal"><span class="pre">./_output2</span></tt> as red plus signs.  It&#8217;s best to give the full path
name, e.g. as done here using <tt class="docutils literal"><span class="pre">os.path.join(os.getcwd(),</span> <span class="pre">'_output2')</span></tt>.</p>
</div>
<div class="section" id="how-to-set-plot-parameters-that-are-not-provided-as-attributes-of-clawplotitem">
<h2><a class="toc-backref" href="#id8">How to set plot parameters that are not provided as attributes of <a class="reference internal" href="ClawPlotItem.html#clawplotitem"><em>ClawPlotItem</em></a>?</a><a class="headerlink" href="#how-to-set-plot-parameters-that-are-not-provided-as-attributes-of-clawplotitem" title="Permalink to this headline">¶</a></h2>
<p>Some commonly used plotting parameters can be specified as an attribute of a
<em class="xref std std-ref">ClawPlotItem`</em>, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">plotitem</span> <span class="o">=</span> <span class="n">plotaxes</span><span class="o">.</span><span class="n">new_plotitem</span><span class="p">(</span><span class="n">plot_type</span><span class="o">=</span><span class="s">&#39;1d_plot&#39;</span><span class="p">)</span>
<span class="n">plotitem</span><span class="o">.</span><span class="n">plot_var</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">plotitem</span><span class="o">.</span><span class="n">plotstyle</span> <span class="o">=</span> <span class="s">&#39;-&#39;</span>
<span class="n">plotitem</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s">&#39;b&#39;</span>
</pre></div>
</div>
<p>specifies plotting a blue line.  These attributes are used in the call to the
matplotlib <tt class="docutils literal"><span class="pre">plot</span></tt> function.  The <tt class="docutils literal"><span class="pre">plot</span></tt> function has many other keyword
parameters that are not all duplicated as attributes of <em class="xref std std-ref">ClawPlotItem`</em>.  To
change these, the <tt class="docutils literal"><span class="pre">kwargs</span></tt> attribute can be used.</p>
<p>For example, to plot as above, but with a wider blue line, append the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">plotitem</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;linewidth&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
</pre></div>
</div>
<p>If you try to specify the same keyword argument two different ways, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">plotitem</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s">&#39;b&#39;</span>
<span class="n">plotitem</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;linewidth&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;color&#39;</span><span class="p">:</span> <span class="s">&#39;r&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>the  value in <tt class="docutils literal"><span class="pre">kwargs</span></tt> takes precedence.  It is the <tt class="docutils literal"><span class="pre">kwargs</span></tt> dictionary that
is actually used in the call, and the <tt class="docutils literal"><span class="pre">color</span></tt> attribute is checked only if it
has not been defined by the user in the <tt class="docutils literal"><span class="pre">kwargs</span></tt> attribute.</p>
</div>
<div class="section" id="how-to-change-the-size-or-background-color-of-a-figure">
<h2><a class="toc-backref" href="#id9">How to change the size or background color of a figure?</a><a class="headerlink" href="#how-to-change-the-size-or-background-color-of-a-figure" title="Permalink to this headline">¶</a></h2>
<p>By default, a figure is created of the default matplotlib size, with a tan
background.  Any desired
keyword arguments to the matplotlib <a class="reference external" href="??">figure</a> command can
be passed using the <tt class="docutils literal"><span class="pre">kwargs</span></tt> attributed of <em class="xref std std-ref">ClawPlotFigure`</em>.  For
example, to create a figure that is 10 inches by 5 inches with a pink
background:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">plotfigure</span> <span class="o">=</span> <span class="n">plotdata</span><span class="o">.</span><span class="n">new_plotfigure</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;pinkfig&#39;</span><span class="p">,</span> <span class="n">figno</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plotfigure</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;figsize&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span>  <span class="s">&#39;facecolor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">7</span><span class="p">,</span> <span class="o">.</span><span class="mi">7</span><span class="p">]}</span>
</pre></div>
</div>
</div>
<div class="section" id="specifying-colormaps-for-pcolor-or-contourf-plots">
<h2><a class="toc-backref" href="#id10">Specifying colormaps for pcolor or contourf plots</a><a class="headerlink" href="#specifying-colormaps-for-pcolor-or-contourf-plots" title="Permalink to this headline">¶</a></h2>
<p>The matplotlib module <cite>matplotlib.cm</cite> provides many colormaps that can be
acquired as follows, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">cm</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s">&#39;Greens&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><cite>matplotlib.colors</cite> provides some tools for working with colormaps,
and some additional colormaps and tools can be found in
<cite>clawpack.visclaw.colormaps</cite>.</p>
<p>In particular, the <cite>make_colormaps</cite> function simplifies the creation of new
colormaps interpolating between specified colors.
For example, a colormap fading from blue to yellow to red can be created
with the command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">clawpack.visclaw</span> <span class="kn">import</span> <span class="n">colormaps</span>
<span class="n">yellow_red_blue</span> <span class="o">=</span> <span class="n">colormaps</span><span class="o">.</span><span class="n">make_colormap</span><span class="p">({</span><span class="mf">0.</span><span class="p">:</span><span class="s">&#39;#ffff00&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="mf">1.</span><span class="p">:</span><span class="s">&#39;b&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>The argument of <cite>make_colormaps</cite> is a dictionary that maps values to colors,
with linear interpolation between the specified values.  Each color can be
specified in various ways, e.g. in the example above blue is specified as
the matlab style &#8216;b&#8217;, yellow with an html hex string, and red with an RGB
tuple <cite>[1,0,0]</cite>.</p>
<p>The colormap above is also predefined as
<cite>clawpack.visclaw.colormaps.yellow_red_blue</cite> and is used in many Clawpack
examples.</p>
<p>The function
<cite>clawpack.visclaw.colormaps.showcolors(cmap)</cite> can be used to display a
colormap.
`</p>
</div>
<div class="section" id="how-to-debug-setplot-py">
<h2><a class="toc-backref" href="#id11">How to debug setplot.py?</a><a class="headerlink" href="#how-to-debug-setplot-py" title="Permalink to this headline">¶</a></h2>
<p>Suppose you are working in an interactive Python shell such as ipython and
encounter the following when trying to plot with <a href="#id16"><span class="problematic" id="id17">`Iplotclaw`_</span></a>:</p>
<div class="highlight-python"><pre>In [3]: ip=Iplotclaw(); ip.plotloop()
*** Error in call_setplot: Problem executing function setplot
*** Problem executing setplot in Iplotclaw
    setplot =  setplot.py
*** Either this file does not exist or
    there is a problem executing the function setplot in this file.
*** PLOT PARAMETERS MAY NOT BE SET! ***

Interactive plotting for Clawpack output...

Plotting data from outdir =  _output
Type ? at PLOTCLAW prompt for list of commands

    Start at which frame [default=0] ?</pre>
</div>
<p>This tells you that there was some problem importing <tt class="docutils literal"><span class="pre">setplot.py</span></tt>, but is not
very informative and it is hard to debug from within the
<tt class="docutils literal"><span class="pre">Iplotclaw.plotloop</span></tt>
method. You may also run into this if you modify <tt class="docutils literal"><span class="pre">setplot.py</span></tt>
(inadvertantly introducing a bug)
and then use the <tt class="docutils literal"><span class="pre">resetplot</span></tt> option:</p>
<div class="highlight-python"><pre>PLOTCLAW &gt; resetplot
Executing setplot from  setplot.py
*** Error in call_setplot: Problem executing function setplot
*** Problem re-executing setplot
PLOTCLAW &gt;</pre>
</div>
<p>If you can&#8217;t spot the bug by examing <tt class="docutils literal"><span class="pre">setplot.py</span></tt>, it is easiest to debug
by exiting the plotloop and doing:</p>
<div class="highlight-python"><pre>PLOTCLAW &gt; q
quitting...

In [4]: import setplot
In [5]: pd = ip.plotdata
In [6]: pd = setplot.setplot(pd)
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)

      8
      9     # Figure for q[0]
---&gt; 10     plotfigure = plotdata.new_plotfgure(name='q[0]', figno=1)
     11
     12     # Set up for axes in this figure:

AttributeError: 'ClawPlotData' object has no attribute 'new_plotfgure'</pre>
</div>
<p>In this case, the error is that <tt class="docutils literal"><span class="pre">new_plotfigure</span></tt> is mis-spelled.</p>
<p>In ipython you can also easily turn on the Python debugger pdb:</p>
<div class="highlight-python"><pre>In [9]: pdb
Automatic pdb calling has been turned ON

In [10]: pd = setplot.setplot(pd)
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
      8
      9     # Figure for q[0]
---&gt; 10     plotfigure = plotdata.new_plotfgure(name='q[0]', figno=1)
     11
     12     # Set up for axes in this figure:

AttributeError: 'ClawPlotData' object has no attribute 'new_plotfgure'

ipdb&gt;</pre>
</div>
<p>For more complicated debugging you could now explore the current state using
any pdb commands, described in the <a class="reference external" href="http://docs.python.org/library/pdb.html">documentation</a>.  See also
the <a class="reference external" href="http://ipython.scipy.org/doc/manual/html/index.html">ipython documentation</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="geoplot.html" title="GeoClaw plotting tools"
             >next</a> |</li>
        <li class="right" >
          <a href="plotexamples.html" title="Plotting examples"
             >previous</a> |</li>
<li><a href="http://www.clawpack.org"><font color="#7F0000">Clawpack Webpage</font></a>|&nbsp;</li>
<li><a href="index.html"><font color="#7F0000">Contents</font></a>|&nbsp;</li>
<li><a href="apps.html"><font color="#7F0000">Gallery</font></a>|&nbsp;</li>

 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Randall J. LeVeque and others.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>