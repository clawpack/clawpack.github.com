<!-- **** DO NOT EDIT THIS FILE *** 
         This file was generated automatically from file
              amr_module.f90
         using $CLAW/clawutil/src/python/clawutil/clawcode2html.py         -->

<html>
<title> amr_module.f90.html </title>


          <head>
           <link rel="icon" href="http://clawpack.github.io//clawicon.ico" />
          </head> 
           <BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000FF" 
                 VLINK="#5500DD" ALINK="#FF0000">
           <font FACE="HELVETICA,ARIAL">
           
<!-- Created from the file /Users/rjl/git/clawpack/geoclaw/examples/tsunami/chile2010/amr_module.f90 -->
<!-- Date: Wed Dec 28 2016 at 23:13:56 -->

<table bgcolor="#FFEE99"> <tr> <td>
&nbsp;<font size=6> amr_module.f90.html </font> </td>

            <td><a href="http://clawpack.github.io/doc/index.html"><img
            src="http://clawpack.github.io//clawlogo.jpg"
            width=100 alt="CLAWPACK"></a>&nbsp;&nbsp; </td> </tr> <tr> <td>
&nbsp;Source file: &nbsp;&nbsp;<a href="amr_module.f90">amr_module.f90 </a>
</td></tr><tr><td>
&nbsp;Directory:  &nbsp; /Users/rjl/git/clawpack/geoclaw/examples/tsunami/chile2010 
</td></tr><tr><td>
&nbsp;Converted:  &nbsp; Wed Dec 28 2016 at 23:13:56 
&nbsp; using <a href="http://clawpack.github.io//doc/application_documentation.html#clawcode2html">clawcode2html</a>
</td></tr><tr><td>
<font color="#BB3300"> &nbsp;This documentation file will 
not reflect any later changes in the source file. </font>
</td></tr></table></font>
<p>
<pre> 
module amr_module

    implicit none
       
    save
       
    <font color="blue">! ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</font>
    <font color="blue">! :::::   data structure info.</font>
    <font color="blue">! ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</font>
    integer, parameter :: rsize = 5
    integer, parameter :: nsize = 19

    <font color="blue">!  :::::::   integer part of node descriptor</font>
    integer, parameter :: levelptr  = 1
    integer, parameter :: tempptr   = 2
    integer, parameter :: errptr    = 3
    integer, parameter :: nestlevel = 4
    integer, parameter :: cfluxptr  = 5
    integer, parameter :: ffluxptr  = 6
    integer, parameter :: store1    = 7
    integer, parameter :: store2    = 8
    integer, parameter :: ndilo     = 9
    integer, parameter :: ndihi     = 10
    integer, parameter :: ndjlo     = 11
    integer, parameter :: ndjhi     = 12
    integer, parameter :: storeaux  = 13
    integer, parameter :: storeflags  = 14
    integer, parameter :: numflags  = 15
    integer, parameter :: domflags_base  = 16
    integer, parameter :: domflags2  = 17
    integer, parameter :: bndListSt  = 18
    integer, parameter :: bndListNum = 19

    <font color="blue">! :::::::  real part of node descriptor</font>
    integer, parameter :: cornxlo  = 1
    integer, parameter :: cornylo  = 2
    integer, parameter :: cornxhi  = 3
    integer, parameter :: cornyhi  = 4
    integer, parameter :: timemult = 5

    <font color="blue">! :::::::   for linking nodes</font>
    integer, parameter :: nextfree = 2
    integer, parameter :: null = 0
    integer, parameter :: nil  = 0

    integer, parameter :: gridNbor = 1 <font color="blue">!use 1st col, 2nd col is nextfree - the link</font>

    <font color="blue">! :::::::  for flagging points   </font>
    real(kind=8), parameter :: goodpt = 0.0
    real(kind=8), parameter :: badpt  = 2.0
    real(kind=8), parameter :: badpro = 3.0

    real(kind=8), parameter :: NEEDS_TO_BE_SET = 10.e33
    real(kind=8), parameter :: rinfinity = 10.e32
    integer, parameter :: iinfinity = 999999999
    integer, parameter :: horizontal = 1
    integer, parameter :: vertical = 2
    integer, parameter :: maxgr = 15000
    integer, parameter :: maxlv = 10
    integer, parameter :: maxcl = 5000

    <font color="blue">! The max1d parameter should be changed if using OpenMP grid based </font>
    <font color="blue">! looping, usually set to max1d = 60</font>
    integer, parameter :: max1d = 600

    integer, parameter :: maxvar = 10
    integer, parameter :: maxaux = 20
    integer, parameter :: maxwave = 10


    <font color="blue">! note use of sentinel in listStart</font>
    integer :: listOfGrids(maxgr),listStart(0:maxlv+1)
    integer,parameter :: bndListSize = 8*maxgr
    integer :: bndList(bndListSize,2)  <font color="blue">! guess size, average # nbors 4? manage as linked list</font>

    real(kind=8) hxposs(maxlv), hyposs(maxlv),possk(maxlv),rnode(rsize, maxgr) 



    real(kind=8) tol, tolsp
    integer ibuff,  mstart, ndfree, ndfree_bnd, lfine, node(nsize, maxgr), &
            icheck(maxlv),lstart(maxlv),newstl(maxlv), &
            listsp(maxlv),intratx(maxlv),intraty(maxlv), &
            kratio(maxlv), iregsz(maxlv),jregsz(maxlv), &
            iregst(maxlv),jregst(maxlv), &
            iregend(maxlv),jregend(maxlv), &
            numgrids(maxlv),numcells(maxlv), &
            iorder,mxnest,kcheck

    <font color="blue">! ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</font>
    <font color="blue">! ::::  for alloc array/memory</font>
    <font color="blue">! ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</font>

    <font color="blue">! Static memory implementation</font>
    <font color="blue">! parameter  (memsize = 10000000)</font>
    <font color="blue">! common  /calloc/   alloc(memsize)</font>

    <font color="blue">! Dynamic memory: </font>
    <font color="blue">!real(kind=8), allocatable, target, dimension(:) :: storage</font>
    <font color="blue">!real(kind=8), pointer, dimension(:) :: alloc   ! old way, changed mjb Sept. 2014</font>
    real(kind=8), allocatable, dimension(:) :: alloc    <font color="blue">! new way, use allocatable, not pointer</font>
    integer memsize
       
    <font color="blue">! ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\</font>
    <font color="blue">! :::::   for space management of alloc array</font>
    <font color="blue">! ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</font>
    integer, parameter :: lfdim=5000
    integer lfree(lfdim,2),lenf

    <font color="blue">! ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</font>
    <font color="blue">! :::::  domain description variables</font>
    <font color="blue">! ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</font>
    logical xperdom, yperdom, spheredom
    real(kind=8) :: xupper, yupper, xlower, ylower
    integer :: nghost, mthbc(4)

    <font color="blue">! ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</font>
    <font color="blue">! :::::  collect stats</font>
    <font color="blue">! ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</font>
    real(kind=8)  rvoll(maxlv),evol,rvol,avenumgrids(maxlv)
    integer ::  iregridcount(maxlv), tvoll(maxlv)
    integer :: timeRegridding, timeUpdating, timeValout
    integer :: timeFlglvl,timeGrdfit2,timeGrdfit3,timeGrdfitAll
    integer :: timeFilval,timeBound,timeStepgrid,timeFilvalTot
    integer :: timeFlagger, timeBufnst,timeTick
    real(kind=8) tvollCPU(maxlv), timeTickCPU
    real(kind=8) timeBoundCPU,timeStepgridCPU,timeRegriddingCPU
    real(kind=8) timeValoutCPU

    integer lentot,lenmax,lendim

    <font color="blue">! ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</font>
    <font color="blue">! :::::  method parameters</font>
    <font color="blue">! ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</font>
    character(len=10), allocatable :: auxtype(:)
    integer  method(7), mwaves, mcapa, dimensional_split
    integer, allocatable :: mthlim(:)
    real(kind=8) cfl,cflmax,cflv1,cfl_level

    logical :: use_fwaves
    logical :: flag_richardson,flag_gradient
    integer :: verbosity_regrid

    <font color="blue">! ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</font>
    <font color="blue">! ::::: Parameters and variables related to I/O and checkpointing</font>
    <font color="blue">! ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::</font>
    logical    printout,matlabout,ncarout

    <font color="blue">! variables for conservation checking:</font>
    real(kind=8) tmass0

    <font color="blue">! variables for specifying output format</font>
    integer :: output_style, nstop, nout, iout
    real(kind=8), allocatable :: tout(:)
    real(kind=8) :: t0, tfinal
    real(kind=8) :: tstart_thisrun  <font color="blue">! /= t0 in case of restart</font>
    integer :: nq_components, naux_components, output_format
    integer, allocatable :: output_q_components(:)
    integer, allocatable :: output_aux_components(:)
    logical :: output_aux_onlyonce

    <font color="blue">! checkpointing:</font>
    integer :: checkpt_style, nchkpt, checkpt_interval
    real(kind=8), allocatable :: tchk(:)

    integer :: matlabu

    <font color="blue">!  USE UNITS NUMBERS < 89.</font>
    <font color="blue">! 89 and + numthreads taken by gauge output</font>
    integer, parameter :: parmunit = 12
    integer, parameter :: chkunit = 10
    integer, parameter :: inunit  = 5
    integer, parameter :: outunit = 66
    integer, parameter :: pltunit1 = 3
    integer, parameter :: rstunit = 9
    integer, parameter :: dbugunit = 11
    integer, parameter :: matunit = 70

    <font color="blue">! ::::  Debugging flags (verbose output)</font>
    logical &
                dprint,     & <font color="blue">!  domain flags output</font>
                eprint,     & <font color="blue">!  error estimation output</font>
                edebug,     & <font color="blue">!  even more error estimation output</font>
                gprint,     & <font color="blue">!  verbose grid generation (clustering,colating...)</font>
                nprint,     & <font color="blue">!  nestck reporting</font>
                pprint,     & <font color="blue">!  projec tagged pts.</font>
                rprint,     & <font color="blue">!  regridding -  summary of new grids</font>
                sprint,     & <font color="blue">!  space (memory) output</font>
                tprint,     & <font color="blue">!  tick (time stepping) reporting</font>
                uprint        <font color="blue">!  updating/upbnding reporting</font>


    <font color="blue">! Restart file name:</font>
    character(len=200) :: rstfile
    logical :: check_a

end module amr_module
</pre></html>
