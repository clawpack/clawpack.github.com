<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Guide for updating this documentation &#8212; Clawpack dev documentation</title>
    
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/base.css" type="text/css" />
    <link rel="stylesheet" href="_static/layout.css" type="text/css" />
    <link rel="stylesheet" href="_static/banner.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/clawicon.ico"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Guide for doing a Clawpack release" href="howto_release.html" />
    <link rel="prev" title="Clawpack Community" href="community.html" /> 
  </head>
  <body role="document">
<div id="main-wrapper" class="sphinx">
<div id="header-wrapper">
  <section id="header">
    <!-- <h1><a href="http://clawpack.org/">Clawpack</a></h1> -->
    <h1><a href="http://clawpack.org/">Clawpack-5</a></h1> 
    <nav>
      <ul>
        <li>
          <a href="contents.html">Docs</a>
        </li>
        <li>
          <a href="installing.html">Install</a>
        </li>
        <li>
          <a class="" href="gallery/index.html">Gallery</a>
        </li>
        <li>
          <a class="" href="community.html">Community</a>
        </li>
        <li>
          <a class="active" href="http://github.com/clawpack">Source</a>
        </li>
        <li>
          <a class="" href="developers.html">Develop</a>
        </li>
      </ul>
    </nav>
  </section>
<div class="decoration"></div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="howto_release.html" title="Guide for doing a Clawpack release"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="community.html" title="Clawpack Community"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="contents.html">Clawpack dev documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="guide-for-updating-this-documentation">
<span id="howto-doc"></span><h1>Guide for updating this documentation<a class="headerlink" href="#guide-for-updating-this-documentation" title="Permalink to this headline">¶</a></h1>
<p>See also the README.md at <a class="reference external" href="https://github.com/clawpack/doc">https://github.com/clawpack/doc</a>.</p>
<p>When updating the documentation for a new release, see also
<a class="reference internal" href="howto_release.html#howto-release"><span class="std std-ref">Guide for doing a Clawpack release</span></a>.</p>
<p>The <a class="reference external" href="https://github.com/clawpack/doc">clawpack/doc</a> repository is not
included in the Clawpack distribution and must be cloned separately if you
want to work with these files.</p>
<p>After cloning into the <cite>$CLAW</cite> directory, the restructured text
files for the main documentation are in <cite>$CLAW/doc/doc</cite>.  All files
related to the gallery are in <cite>$CLAW/doc/gallery</cite>.  As of Version
5.4.1, these two subdirectories are separate Sphinx projects connected using
<a class="reference external" href="http://www.sphinx-doc.org/en/stable/ext/intersphinx.html">intersphinx</a>.
This is so that past versions of the main documentation pages can
be supported without past versions of the galleries.</p>
<p>Before proceeding, first make sure other repositories are checked out to
master, since some pages now have literalinclude&#8217;s that bring in code
(e.g. setaux_defaults.rst, etc).</p>
<p>To create html files:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $CLAW/doc/doc
make html
</pre></div>
</div>
<p>To view the files, point your browser to <cite>$CLAW/doc/doc/_build/html/index.html</cite></p>
</div>
<div class="section" id="to-generate-pages-with-old-clawpack-versions">
<h1>To generate pages with old Clawpack versions<a class="headerlink" href="#to-generate-pages-with-old-clawpack-versions" title="Permalink to this headline">¶</a></h1>
<p>This should be done when you are close to pushing changes to the website,
otherwise the above approach works fine and shows the current state of the
documentation based on files in your working directory.</p>
<p>This takes much longer than <cite>make html</cite> since it rebuilds pages for all
versions.</p>
<p>The instructions below make webpages that list v5.4.0, etc. and allow
viewing docs that may be more relevant to a previous version of Clawpack.</p>
<p>But note that the <cite>.rst</cite> files used to build these pages come form what is
checked into the <cite>v5.x.x</cite> branch on Github (and the commits corresponding to
tags such as <cite>v5.4.0</cite>).  So if you have changed <cite>.rst</cite> files but these have
not yet been merged into <cite>v5.x.x</cite> or <cite>dev</cite> on Github, you will not see the changes
reflected in the html files you build.</p>
<p>To make pages that show previous Clawpack versions, first install the
sphinx extension via:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">sphinx</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">sphinxcontrib</span><span class="o">-</span><span class="n">versioning</span>
</pre></div>
</div>
<p>and then do this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $CLAW/doc/doc
export SPHINX_WEB=False # to build for local viewing
sphinx-versioning build -i -r v5.x.x doc ./_build/html
    # change v5.x.x to the current version
</pre></div>
</div>
<p>Note that <cite>-i</cite> causes versions to be listed in reverse order at the bottom,
<cite>-r v5.x.x</cite> uses the <cite>v5.x.x</cite> branch for the main landing page, and <cite>doc</cite> is
the directory containing the <cite>.rst</cite> files relative to the top directory
of the Git repository. Only <cite>.rst</cite> files that are checked into Git on some
branch at <cite>origin</cite> are seen.</p>
<p>To view the files, point your browser to
<cite>$CLAW/doc/doc/_build/html/v5.x.x/index.html</cite>
(with <cite>5.x.x</cite> replaced by the current version).</p>
<p>If you like what you see, you can push back to your fork and then issue a
pull request to have these changes incorporated into the documentation.</p>
<p><strong>Note:</strong> To make versions where the links to the gallery work properly after the
pages are pushed to the Clawpack website (but not locally), set
the environment variable <cite>SPHINX_WEB</cite> to True in the above steps.
This variable is used in <cite>conf.py</cite> to adjust the links used in
<cite>intersphinx_mapping</cite> since two sphinx projects are linked together.</p>
<div class="section" id="updating-the-gallery">
<h2>Updating the gallery<a class="headerlink" href="#updating-the-gallery" title="Permalink to this headline">¶</a></h2>
<p>The gallery webpages are now decoupled from the main sphinx pages, and reside
in <cite>$CLAW/doc/gallery</cite> rather than <cite>$CLAW/doc/doc</cite>.</p>
<p>To remake the galleries, you need to first run all the examples that produce
results shown in the galleries.</p>
<p>For detailed instructions, see <a class="reference external" href="https://github.com/clawpack/doc/blob/dev/gallery/README.md">CLAW/doc/gallery/README.md</a>.</p>
<p>Then do the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $CLAW/doc/gallery
export SPHINX_WEB=False # to build for local viewing
make html
</pre></div>
</div>
<p>Note that <cite>sphinx-versioning build</cite> is not used in the gallery since we don&#8217;t
track versions here.</p>
<p>If the environment variable <cite>SPHINX_WEB</cite> is set to False (or not set) then
this makes files in which the links work to jump to the main doc files, when
viewed locally.</p>
<p>Set the environment variable <cite>SPHINX_WEB</cite> to True to make files where the
links work properly when pushed to the Clawpack webpages.
This variable is used in <cite>conf.py</cite> to adjust the links used in
<cite>intersphinx_mapping</cite> since two sphinx projects are linked together.</p>
<p>Note that <cite>doc/gallery/notebooks.rst</cite> contains pointers to html versions of many
notebooks, stored in <cite>doc/gallery/_static/notebooks</cite>.  If any notebooks were
updated for this release, the corresponding html files should be too.
<em>(We should automate this).</em></p>
</div>
<div class="section" id="updating-the-webpages">
<h2>Updating the webpages<a class="headerlink" href="#updating-the-webpages" title="Permalink to this headline">¶</a></h2>
<p>A few developers can push html files to the repository
<a class="reference external" href="https://github.com/clawpack/clawpack.github.com">clawpack/clawpack.github.com</a>
which causes them to show up on the web at
<a class="reference external" href="http://clawpack.github.io">http://clawpack.github.io</a>.</p>
<p>To do so, first create the html files as described above, with
<cite>SPHINX_WEB=True</cite> in both the <cite>doc</cite> and <cite>gallery</cite> directories.</p>
<p>Commit any changed source files and
push to <a class="reference external" href="https://github.com/clawpack/doc">clawpack/doc</a>.</p>
<p>Then do:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $CLAW/clawpack.github.com
git checkout v5.x.x
git pull origin  # make sure you are up to date before doing next steps!

cd $CLAW/doc/doc
rsync -azv _build/html/ ../../clawpack.github.com/
</pre></div>
</div>
<p>If you have updated the gallery, also do:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">rsync</span> <span class="o">-</span><span class="n">azv</span> <span class="o">../</span><span class="n">gallery</span><span class="o">/</span><span class="n">_build</span><span class="o">/</span><span class="n">html</span><span class="o">/</span> <span class="o">../../</span><span class="n">clawpack</span><span class="o">.</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">gallery</span><span class="o">/</span>
</pre></div>
</div>
<p>Then move to the <cite>clawpack.github.com</cite> repository and
add and commit any new or changed files.
All files are needed, so</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $CLAW/clawpack.github.com
git add .
</pre></div>
</div>
<p>should work.  For the commit message you might want to add the commit
hash of the most recent commit in $CLAW/doc/doc:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $CLAW/clawpack.github.com
git add .
git commit -m &quot;changes from doc/doc commit &lt;hash&gt;&quot;
</pre></div>
</div>
<p>And finally push to the web:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">push</span> <span class="n">origin</span>
</pre></div>
</div>
<p>which assumes that <cite>origin</cite> is
<cite>git&#64;github.com:clawpack/clawpack.github.com.git</cite>.</p>
<p>It may take a few minutes for the updated webpages to appear at
<a class="reference external" href="http://clawpack.github.io/">http://clawpack.github.io/</a>.</p>
<p>Note that <a class="reference external" href="http://clawpack.org">http://clawpack.org</a> and <a class="reference external" href="http://www.clawpack.com">http://www.clawpack.com</a>
should also resolve properly to <a class="reference external" href="http://clawpack.github.io/">http://clawpack.github.io/</a>.
and that <cite>www.clawpack.org</cite> should appear in the browser address bar.  The
file <cite>extra_files/CNAME</cite> combined with settings on the domain server
<cite>godaddy.com</cite> determine this behavior.</p>
</div>
<div class="section" id="extra-files-for-webpages-not-built-by-sphinx">
<span id="extra-files"></span><h2>Extra files for webpages not built by Sphinx<a class="headerlink" href="#extra-files-for-webpages-not-built-by-sphinx" title="Permalink to this headline">¶</a></h2>
<p>Any files placed in <cite>$CLAW/doc/doc/extra_files</cite> will be copied verbatim
(recursively for subdirectories) to the directory
<cite>$CLAW/doc/doc/_build/html</cite> when Sphinx is used to build the documentation.
These will be copied to <cite>$CLAW/clawpack.github.com/</cite> when the
<cite>rsync_clawpack.github.sh</cite> script is run and hence will appear on the
webpages.</p>
<p>For example, the file <cite>$CLAW/doc/doc/extra_files/clawdev2013/index.html</cite>
should appear at <a class="reference external" href="http://www.clawpack.org/clawdev2013/index.html">http://www.clawpack.org/clawdev2013/index.html</a>.</p>
<p>The files in <cite>$CLAW/doc/doc/extra_files/links</cite> provide redirects so that
links like <a class="reference external" href="http://www.clawpack.org/links/an11">http://www.clawpack.org/links/an11</a> resolve properly to
webpages on the University of Washington server.  Links of this nature have
been provided in published paper and some contain large amounts of data that
have not been copied to Github.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p><a href="http://clawpack.org/">
    <img class="logo" src= "_static/clawlogo.jpg" alt="Logo"/>
</a>
<h2>Version dev</h2>
</p>
  <h3><a href="contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Guide for updating this documentation</a></li>
<li><a class="reference internal" href="#to-generate-pages-with-old-clawpack-versions">To generate pages with old Clawpack versions</a><ul>
<li><a class="reference internal" href="#updating-the-gallery">Updating the gallery</a></li>
<li><a class="reference internal" href="#updating-the-webpages">Updating the webpages</a></li>
<li><a class="reference internal" href="#extra-files-for-webpages-not-built-by-sphinx">Extra files for webpages not built by Sphinx</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="contents.html">Documentation overview</a><ul>
      <li>Previous: <a href="community.html" title="previous chapter">Clawpack Community</a></li>
      <li>Next: <a href="howto_release.html" title="next chapter">Guide for doing a Clawpack release</a></li>
  </ul></li>
</ul>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/howto_doc.rst.txt"
           rel="nofollow">Show Source</a></li>
    <li><a href="https://github.com/clawpack/doc/blob/master/doc/howto_doc.rst"
           rel="nofollow">Show on GitHub</a></li>
    <li><a href="https://github.com/clawpack/doc/edit/master/doc/howto_doc.rst"
           rel="nofollow">Edit on GitHub</a></li>
  </ul>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<h3>Versions</h3>
<ul>
    <li><a href="../v5.4.1/howto_doc.html">v5.4.1</a></li>
    <li><a href="../v5.4.0/howto_doc.html">v5.4.0</a></li>
    <li><a href="../v5.3.1/howto_doc.html">v5.3.1</a></li>
    <li><a href="../v5.3.0/howto_doc.html">v5.3.0</a></li>
    <li><a href="../v5.2.1/howto_doc.html">v5.2.1</a></li>
    <li><a href="../v5.2.0/howto_doc.html">v5.2.0</a></li>
    <li><a href="../v5.1.0/howto_doc.html">v5.1.0</a></li>
    <li><a href="../v5.6.0/howto_doc.html">v5.6.0</a></li>
    <li><a href="../v5.5.0/howto_doc.html">v5.5.0</a></li>
    <li><a href="howto_doc.html">dev</a></li>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    &copy; Copyright CC-BY 2019, The Clawpack Development Team.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44811544-1', 'auto');
  ga('send', 'pageview');

  </script>
  
  </body>
</html>