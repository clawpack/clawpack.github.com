<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dtopotools module for moving topography &#8212; Clawpack 5.2.1 documentation</title>
    
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/base.css" type="text/css" />
    <link rel="stylesheet" href="_static/layout.css" type="text/css" />
    <link rel="stylesheet" href="_static/banner.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '5.2.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/clawicon.ico"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head>
  <body role="document">
<div id="main-wrapper" class="sphinx">
<div id="header-wrapper">
  <section id="header">
    <!-- <h1><a href="http://clawpack.org/">Clawpack</a></h1> -->
    <h1><a href="http://clawpack.org/">Clawpack-5</a></h1> 
    <nav>
      <ul>
        <li>
          <a href="toc_condensed.html">Docs</a>
        </li>
        <li>
          <a href="installing.html">Install</a>
        </li>
        <li>
          <a class="" href="galleries.html">Gallery</a>
        </li>
        <li>
          <a class="active" href="https://groups.google.com/forum/#!forum/claw-users">Support</a>
        </li>
        <li>
          <a class="active" href="http://github.com/organizations/clawpack">Source</a>
        </li>
        <li>
          <a class="" href="developers.html">Develop</a>
        </li>
      </ul>
    </nav>
  </section>
<div class="decoration"></div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="contents.html">Clawpack 5.2.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="dtopotools-module-for-moving-topography">
<span id="dtopotools-module"></span><h1>dtopotools module for moving topography<a class="headerlink" href="#dtopotools-module-for-moving-topography" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This describes new tools to be added in Clawpack 5.2.1</p>
</div>
<p>This IPython notebook <a class="reference external" href="http://nbviewer.ipython.org/url/clawpack.github.io/notebooks/dtopotools_examples.ipynb">dtopotools_examples.ipynb</a>
illustrates how to use some of the tools.</p>
<p>See also <a class="reference external" href="http://nbviewer.ipython.org/url/clawpack.github.io/notebooks/Okada.ipynb">Okada.ipynb</a>,
which illustrates the Okada model using some of these tools.</p>
<p>The file <cite>$CLAW/geoclaw/tests/test_dtopotools.py</cite> contains some tests of these
tools.  Looking at these test routines may also give some ideas on
how to use them.</p>
<div class="section" id="module-clawpack.geoclaw.dtopotools">
<span id="documentation-auto-generated-from-the-module-docstrings"></span><h2>Documentation auto-generated from the module docstrings<a class="headerlink" href="#module-clawpack.geoclaw.dtopotools" title="Permalink to this headline">¶</a></h2>
<p>GeoClaw dtopotools Module  <cite>$CLAW/geoclaw/src/python/geoclaw/dtopotools.py</cite></p>
<p>Module provides several functions for dealing with changes to topography (usually
due to earthquakes) including reading sub-fault specifications, writing out 
dtopo files, and calculating Okada based deformations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Classes:</th><td class="field-body"><ul class="first simple">
<li>DTopography</li>
<li>SubFault</li>
<li>Fault</li>
<li>UCSBFault</li>
<li>CSVFault</li>
<li>SiftFault</li>
<li>SegmentedPlaneFault</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Functions:</th><td class="field-body"><ul class="first last simple">
<li>convert_units</li>
<li>plot_dz_contours</li>
<li>plot_dz_colors</li>
<li>Mw</li>
<li>strike_direction</li>
<li>rise_fraction</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="clawpack.geoclaw.dtopotools.CSVFault">
<em class="property">class </em><code class="descclassname">clawpack.geoclaw.dtopotools.</code><code class="descname">CSVFault</code><span class="sig-paren">(</span><em>subfaults=None</em>, <em>input_units={}</em>, <em>coordinate_specification=None</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.CSVFault" title="Permalink to this definition">¶</a></dt>
<dd><p>Fault subclass for reading in CSV formatted files</p>
<p>Assumes that the first row gives the column headings</p>
<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.CSVFault.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>path</em>, <em>input_units={}</em>, <em>coordinate_specification='top center'</em>, <em>rupture_type='static'</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.CSVFault.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in subfault specification at <em>path</em>.</p>
<p>Creates a list of subfaults from the subfault specification file at
<em>path</em>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="clawpack.geoclaw.dtopotools.DTopography">
<em class="property">class </em><code class="descclassname">clawpack.geoclaw.dtopotools.</code><code class="descname">DTopography</code><span class="sig-paren">(</span><em>path=None</em>, <em>dtopo_type=None</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.DTopography" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic object representing moving topography</p>
<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.DTopography.dZ_at_t">
<code class="descname">dZ_at_t</code><span class="sig-paren">(</span><em>t</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.DTopography.dZ_at_t" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate dZ to specified time t and return deformation.</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.DTopography.dZ_max">
<code class="descname">dZ_max</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.DTopography.dZ_max" title="Permalink to this definition">¶</a></dt>
<dd><p>Return max(abs(dZ)) over all dz in self.dZ, the maximum
surface deformation for this dtopo.
DEPRECATE? &#8211; it&#8217;s now a 1-liner</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.DTopography.plot_dZ_colors">
<code class="descname">plot_dZ_colors</code><span class="sig-paren">(</span><em>t</em>, <em>axes=None</em>, <em>cmax_dZ=None</em>, <em>dZ_interval=None</em>, <em>colorbar_ticksize=10</em>, <em>colorbar_labelsize=10</em>, <em>fig_kwargs={}</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.DTopography.plot_dZ_colors" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate self.dZ to specified time t and then call module function
plot_dZ_colors.</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.DTopography.plot_dZ_contours">
<code class="descname">plot_dZ_contours</code><span class="sig-paren">(</span><em>t</em>, <em>dZ_interval=0.5</em>, <em>axes=None</em>, <em>fig_kwargs={}</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.DTopography.plot_dZ_contours" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate self.dZ to specified time t and then call module function
plot_dZ_contours.</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.DTopography.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>path=None</em>, <em>dtopo_type=None</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.DTopography.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in a dtopo file and use to set attributes of this object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Input:</th><td class="field-body"><ul class="first last simple">
<li><em>path</em> (path) - Path to existing dtopo file to read in.</li>
<li><dl class="first docutils">
<dt><em>dtopo_type</em> (int) - Type of topography file to read.  Default is 3</dt>
<dd>if not specified or apparent from file extension.</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.DTopography.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>path=None</em>, <em>dtopo_type=None</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.DTopography.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write out subfault resulting dtopo to file at <em>path</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Input:</th><td class="field-body"><ul class="first last simple">
<li><em>path</em> (path) - Path to the output file to written to.</li>
<li><em>dtopo_type</em> (int) - Type of topography file to write out.  Default
is 3.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="clawpack.geoclaw.dtopotools.Fault">
<em class="property">class </em><code class="descclassname">clawpack.geoclaw.dtopotools.</code><code class="descname">Fault</code><span class="sig-paren">(</span><em>subfaults=None</em>, <em>input_units={}</em>, <em>coordinate_specification=None</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.Fault" title="Permalink to this definition">¶</a></dt>
<dd><p>Base Fault class</p>
<p>A class describing a fault possibly composed of subfaults.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Properties:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Initialization:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Examples:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.Fault.Mo">
<code class="descname">Mo</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.Fault.Mo" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the seismic moment for a fault composed of subfaults,
in units N-m.</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.Fault.Mw">
<code class="descname">Mw</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.Fault.Mw" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the moment magnitude for a fault composed of subfaults.</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.Fault.containing_rect">
<code class="descname">containing_rect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.Fault.containing_rect" title="Permalink to this definition">¶</a></dt>
<dd><p>Find containing rectangle of fault in x-y plane.</p>
<p>Returns tuple of x-limits and y-limits.</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.Fault.create_dtopo_xy">
<code class="descname">create_dtopo_xy</code><span class="sig-paren">(</span><em>rect=None</em>, <em>dx=0.016666666666666666</em>, <em>buffer_size=0.5</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.Fault.create_dtopo_xy" title="Permalink to this definition">¶</a></dt>
<dd><p>Create coordinate arrays containing fault with a buffer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Input:</th><td class="field-body"><ul class="first simple">
<li><dl class="first docutils">
<dt><em>rect</em> - if None, use self.containing_rect</dt>
<dd>Otherwise a list [x1,x2,y1,y2]</dd>
</dl>
</li>
<li><em>dx</em> (int) - Spatial resolution. Defaults to 1&#8221; resolution.</li>
<li><em>buffer_size</em> (float) - Buffer distance around edge of fault in
degrees, defaults to 0.5 degrees.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Output:</th><td class="field-body"><ul class="first last simple">
<li><em>x,y</em> 1-dimensional arrays that cover the desired rect.
They start at (x1,y1) and may go a bit beyond (x2,y2) depending on dx</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.Fault.create_dtopography">
<code class="descname">create_dtopography</code><span class="sig-paren">(</span><em>x, y, times=[0.0, 1.0], verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.Fault.create_dtopography" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute change in topography and construct a dtopography object.</p>
<p>Use subfaults&#8217; <cite>okada</cite> routine and add all 
deformations together.</p>
<p>Raises a ValueError exception if the <em>rupture_type</em> is an unknown type.</p>
<p>returns a :class`DTopography` object.</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.Fault.plot_subfaults">
<code class="descname">plot_subfaults</code><span class="sig-paren">(</span><em>axes=None</em>, <em>plot_centerline=False</em>, <em>slip_color=False</em>, <em>cmap_slip=None</em>, <em>cmin_slip=None</em>, <em>cmax_slip=None</em>, <em>slip_time=None</em>, <em>plot_rake=False</em>, <em>xylim=None</em>, <em>plot_box=True</em>, <em>colorbar_shrink=1</em>, <em>verbose=False</em>, <em>colorbar_labelsize=10</em>, <em>colorbar_ticksize=10</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.Fault.plot_subfaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot each subfault projected onto the surface.</p>
<p><em>axes</em> can be passed in to specify the <em>matplotlib.axes.AxesSubplot</em>
on which to add this plot.  If <em>axes == None</em>, a new figure window
will be opened.  The <em>axes</em> on which it is plotted is the return
value of this call.</p>
<p>If <em>plot_centerline == True</em>, plot a line from the centroid to the
top center of each subfault to show what direction is up-dip.</p>
<p>If <em>slip_color == True</em> then use the color map <em>cmap_slip</em> 
(which defaults to <em>matplotlib.cm.jet</em>) to color the subplots based
on the magnitude of slip, scaled between <em>cmin_slip</em> and <em>cmax_slip</em>.  
(If these are <em>None</em> then scaled automatically based on range of slip.)
If <em>slip_time == None</em> then colors are based on the final slip.
For dynamic faults, <em>slip_time</em> can be set to a time and the 
dynamic timing of each subfault will be used to compute and 
plot the slip at this time.</p>
<p>If <em>plot_rake == True</em>, plot a line from the centroid pointing in
the direction of the rake (the direction in which the top block is
moving relative to the lower block.  The distance it moves is given
by the <em>slip</em>.)</p>
<p><em>xylim</em> can be set to a list or tuple of length 4 of the form
[x1,x2,y1,y2] to specify the x- and y-axis limits.</p>
<p>If <em>plot_box == True</em>, a box will be drawn around each subfault.</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.Fault.plot_subfaults_depth">
<code class="descname">plot_subfaults_depth</code><span class="sig-paren">(</span><em>axes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.Fault.plot_subfaults_depth" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the depth of each subfault vs. x and vs. y in a second plot.</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.Fault.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>path</em>, <em>column_map</em>, <em>coordinate_specification='centroid'</em>, <em>rupture_type='static'</em>, <em>skiprows=0</em>, <em>delimiter=None</em>, <em>input_units={}</em>, <em>defaults=None</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.Fault.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in subfault specification at <em>path</em>.</p>
<p>Creates a list of subfaults from the subfault specification file at
<em>path</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Inputs:</th><td class="field-body"><ul class="first last">
<li><p class="first"><em>path</em> (str) file to read in, should contain subfaults, one per line</p>
</li>
<li><p class="first"><em>column_map</em> (dict) specifies mapping from parameter to the column
of the input file that contains values for this parameter, e.g.</p>
<blockquote>
<div><p>column_map = {&#8220;latitude&#8221;:0, &#8220;longitude&#8221;:1, &#8220;depth&#8221;:2, &#8220;slip&#8221;:3,
&#8220;rake&#8221;:4, &#8220;strike&#8221;:5, &#8220;dip&#8221;:6}</p>
</div></blockquote>
</li>
<li><p class="first"><em>coordinate_specification</em> (str) specifies the location on each
subfault that corresponds to the (longitude,latitude) and depth 
of the subfault.  See the documentation for 
<em>SubFault.calculate_geometry</em>.</p>
</li>
<li><p class="first"><em>rupture_type</em> (str) either &#8220;static&#8221; or &#8220;kinematic&#8221;</p>
</li>
<li><p class="first"><em>skiprows</em> (int) number of header lines to skip before data</p>
</li>
<li><p class="first"><em>delimiter</em> (str) e.g. &#8216;,&#8217; for csv files</p>
</li>
<li><dl class="first docutils">
<dt><em>input_units</em> (dict) indicating units for length, width, slip, depth,</dt>
<dd><p class="first last">and for rigidity mu as specified in file.  These
will be converted to &#8220;standard units&#8221;.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><em>defaults</em> (dict) default values for all subfaults, for values not</dt>
<dd><p class="first last">included in subfault file on each line.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.Fault.set_dynamic_slip">
<code class="descname">set_dynamic_slip</code><span class="sig-paren">(</span><em>t</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.Fault.set_dynamic_slip" title="Permalink to this definition">¶</a></dt>
<dd><p>Set <em>slip_at_dynamic_t</em> attribute of all subfaults to slip at the
requested time <em>t</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Input:</th><td class="field-body"><ul class="first last simple">
<li><em>t</em> (float) -</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Raises a ValueError exception if this object&#8217;s rupture_type attribute
is set to static.</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.Fault.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>path</em>, <em>style=None</em>, <em>column_list=None</em>, <em>output_units={}</em>, <em>delimiter='  '</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.Fault.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write subfault format file with one line for each subfault.
Can either specify a <em>style</em> that determines the columns, 
or a <em>column_list</em>.  Must specify one but not both.  See below for
details.</p>
<dl class="docutils">
<dt>Inputs:</dt>
<dd><ul class="first last">
<li><p class="first"><em>path</em> (str) file to write to.</p>
</li>
<li><p class="first"><em>style</em> (str) to write in a style that matches standard styles
adopted by various groups.  One of the following:</p>
<blockquote>
<div><ul class="simple">
<li>&#8220;usgs&#8221;  (Not implemented)</li>
<li>&#8220;noaa sift&#8221;  (Not implemented)</li>
<li>&#8220;ucsb&#8221;  (Not implemented)</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><em>column_list</em> (list) specifies what order the parameters should
be written in the output file, e.g.</p>
<blockquote>
<div><p>column_list = [&#8216;longitude&#8217;,&#8217;latitude&#8217;,&#8217;length&#8217;,&#8217;width&#8217;,
&#8216;depth&#8217;,&#8217;strike&#8217;,&#8217;rake&#8217;,&#8217;dip&#8217;,&#8217;slip&#8217;]</p>
</div></blockquote>
</li>
<li><p class="first"><em>output_units</em> (dict) specifies units to convert to before writing.
Defaults to &#8220;standard units&#8221;.</p>
</li>
<li><p class="first"><em>delimiter</em> (str) specifies delimiter between columns, e.g.
&#8221;,&#8221; to create a csv file.  Defaults to &#8221;  &#8221;.</p>
</li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="clawpack.geoclaw.dtopotools.Mw">
<code class="descclassname">clawpack.geoclaw.dtopotools.</code><code class="descname">Mw</code><span class="sig-paren">(</span><em>Mo</em>, <em>units='N-m'</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.Mw" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate moment magnitude based on seismic moment Mo.
Follows USGS recommended definition from</p>
<blockquote>
<div><a class="reference external" href="http://earthquake.usgs.gov/aboutus/docs/020204mag_policy.php">http://earthquake.usgs.gov/aboutus/docs/020204mag_policy.php</a></div></blockquote>
<p>The SubFault and Fault classes each have a function Mo to compute
the seismic moment for a single subfault or collection respectively.</p>
</dd></dl>

<dl class="class">
<dt id="clawpack.geoclaw.dtopotools.SiftFault">
<em class="property">class </em><code class="descclassname">clawpack.geoclaw.dtopotools.</code><code class="descname">SiftFault</code><span class="sig-paren">(</span><em>sift_slip=None</em>, <em>longitude_shift=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SiftFault" title="Permalink to this definition">¶</a></dt>
<dd><p>Define a fault by specifying the slip on a subset of the SIFT unit sources.
The database is read in by load_sift_unit_sources.
See <a class="reference external" href="http://www.pmel.noaa.gov/pubs/PDF/gica2937/gica2937.pdf">http://www.pmel.noaa.gov/pubs/PDF/gica2937/gica2937.pdf</a>
for a discussion of these unit sources, although the database used
is more recent than what is reported in that paper and uses different
notation for the subfault names.
The subfault database used was downloaded from</p>
<blockquote>
<div><a class="reference external" href="http://sift.pmel.noaa.gov/ComMIT/compressed/info_sz.dat">http://sift.pmel.noaa.gov/ComMIT/compressed/info_sz.dat</a></div></blockquote>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sift_slip</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;acsza1&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;acszb1&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fault</span> <span class="o">=</span> <span class="n">SiftFault</span><span class="p">(</span><span class="n">sift_slip</span><span class="p">)</span>
</pre></div>
</div>
<p>results in a fault with two specified subfaults with slip of 2 and 3 meters.</p>
<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.SiftFault.set_subfaults">
<code class="descname">set_subfaults</code><span class="sig-paren">(</span><em>sift_slip</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SiftFault.set_subfaults" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt><em>sift_slip</em> (dict) is a dictionary with key = name of unit source</dt>
<dd>and value = magnitude of slip to assign (in meters).</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="clawpack.geoclaw.dtopotools.SubFault">
<em class="property">class </em><code class="descclassname">clawpack.geoclaw.dtopotools.</code><code class="descname">SubFault</code><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic sub-fault specification.</p>
<p>Locate fault plane in 3D space
Note that the coodinate specification is in reference to the fault</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Coordinates of Fault Plane:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>The attributes <em>centers</em> and <em>corners</em> are described by the figure below.</p>
<dl class="docutils">
<dt><em>centers[0,1,2]</em> refer to the points labeled 0,1,2 below.</dt>
<dd>In particular the centroid is given by <em>centers[1]</em>.
Each will be a tuple <em>(x, y, depth)</em>.</dd>
<dt><em>corners[0,1,2,3]</em> refer to the points labeled a,b,c,d resp. below.</dt>
<dd><p class="first">Each will be a tuple <em>(x, y, depth)</em>.</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="n">Top</span> <span class="n">edge</span>    <span class="n">Bottom</span> <span class="n">edge</span>
  <span class="n">a</span> <span class="o">-----------</span> <span class="n">b</span>          <span class="o">^</span> 
  <span class="o">|</span>             <span class="o">|</span>          <span class="o">|</span>         <span class="o">^</span>
  <span class="o">|</span>             <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span>
  <span class="o">|</span>             <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">along</span><span class="o">-</span><span class="n">strike</span> <span class="n">direction</span>
  <span class="o">|</span>             <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span>
  <span class="mi">0</span><span class="o">------</span><span class="mi">1</span><span class="o">------</span><span class="mi">2</span>          <span class="o">|</span> <span class="n">length</span>  <span class="o">|</span>
  <span class="o">|</span>             <span class="o">|</span>          <span class="o">|</span>
  <span class="o">|</span>             <span class="o">|</span>          <span class="o">|</span>
  <span class="o">|</span>             <span class="o">|</span>          <span class="o">|</span>
  <span class="o">|</span>             <span class="o">|</span>          <span class="o">|</span>
  <span class="n">d</span> <span class="o">-----------</span> <span class="n">c</span>          <span class="n">v</span>
  <span class="o">&lt;-------------&gt;</span>
       <span class="n">width</span>

  <span class="o">&lt;--</span> <span class="n">up</span> <span class="n">dip</span> <span class="n">direction</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.SubFault.Mo">
<code class="descname">Mo</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.Mo" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the seismic moment for a single subfault</p>
<p>Returns in units of N-m and assumes mu is in Pascals.</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.SubFault.calculate_geometry">
<code class="descname">calculate_geometry</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.calculate_geometry" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the fault geometry.</p>
<p>Routine calculates the class attributes <em>corners</em> and 
<em>centers</em> which are the corners of the fault plane and 
points along the centerline respecitvely in 3D space.</p>
<p><strong>Note:</strong> <em>self.coordinate_specification</em>  specifies the location on each
subfault that corresponds to the (longitude,latitude) and depth 
of the subfault.
Currently must be one of these strings:</p>
<blockquote>
<div><ul class="simple">
<li>&#8220;bottom center&#8221;: (longitude,latitude) and depth at bottom center</li>
<li>&#8220;top center&#8221;: (longitude,latitude) and depth at top center</li>
<li>&#8220;centroid&#8221;: (longitude,latitude) and depth at centroid of plane</li>
<li><dl class="first docutils">
<dt>&#8220;noaa sift&#8221;: (longitude,latitude) at bottom center, depth at top,  </dt>
<dd>This mixed convention is used by the NOAA SIFT
database and &#8220;unit sources&#8221;, see:
<a class="reference external" href="http://nctr.pmel.noaa.gov/propagation-database.html">http://nctr.pmel.noaa.gov/propagation-database.html</a></dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>&#8220;top upstrike corner&#8221;: (longitude,latitude) and depth at </dt>
<dd>corner of fault that is both updip and upstrike.</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>The Okada model is expressed assuming (longitude,latitude) and depth
are at the bottom center of the fault plane, so values must be
shifted or other specifications.</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.SubFault.calculate_geometry_triangles">
<code class="descname">calculate_geometry_triangles</code><span class="sig-paren">(</span><em>rake=90.0</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.calculate_geometry_triangles" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate geometry for triangular subfaults</p>
<ul class="simple">
<li>it uses <em>corners</em> to calculate <em>centers</em>, <em>longitude</em>, <em>latitude</em>,</li>
</ul>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">/Users/rjl/git/clawpack/clawpack/geoclaw/dtopotools.py:docstring of clawpack.geoclaw.dtopotools.SubFault.calculate_geometry_triangles</tt>, line 4)</p>
Bullet list ends without a blank line; unexpected unindent.</div>
<p><em>depth</em>, <em>strike</em>, <em>dip</em>, <em>rake</em>, <em>length</em>, <em>width</em>.</p>
<ul class="simple">
<li>sets <em>coordinate_specification</em> as &#8220;triangular&#8221;</li>
<li>Note that calculate_geometry() computes 
long/lat/strik/dip/rake/length/width to calculate centers/corners</li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.centers">
<code class="descname">centers</code><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.centers" title="Permalink to this definition">¶</a></dt>
<dd><p>Coordinates along the center-line of the fault plane.</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.SubFault.convert_to_standard_units">
<code class="descname">convert_to_standard_units</code><span class="sig-paren">(</span><em>input_units</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.convert_to_standard_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert parameters from the units used for input into the standard
units used in this module.</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.coordinate_specification">
<code class="descname">coordinate_specification</code><em class="property"> = None</em><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.coordinate_specification" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies where the latitude, longitude and depth are measured from.</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.corners">
<code class="descname">corners</code><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.corners" title="Permalink to this definition">¶</a></dt>
<dd><p>Coordinates of the corners of the fault plane.</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.depth">
<code class="descname">depth</code><em class="property"> = None</em><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.depth" title="Permalink to this definition">¶</a></dt>
<dd><p>Depth of subfault based on <em>coordinate_specification</em> in meters.</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.dip">
<code class="descname">dip</code><em class="property"> = None</em><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.dip" title="Permalink to this definition">¶</a></dt>
<dd><p>Subfault&#8217;s angle of dip</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.SubFault.dynamic_slip">
<code class="descname">dynamic_slip</code><span class="sig-paren">(</span><em>t</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.dynamic_slip" title="Permalink to this definition">¶</a></dt>
<dd><p>For a dynamic fault, compute the slip at time t.
Assumes the following attributes are set:</p>
<blockquote>
<div><ul class="simple">
<li><em>rupture_time</em></li>
<li><em>rise_time</em></li>
<li><em>rise_time_starting</em>: optional, defaults to <em>rise_time/2</em></li>
<li><em>rise_shape</em>: optional, defaults to <em>quadratic</em></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.gauss_pts">
<code class="descname">gauss_pts</code><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.gauss_pts" title="Permalink to this definition">¶</a></dt>
<dd><p>Coordinates along the center-line of the fault plane.</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.latitude">
<code class="descname">latitude</code><em class="property"> = None</em><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.latitude" title="Permalink to this definition">¶</a></dt>
<dd><p>Latitutde of the subfault based on <em>coordinate_specification</em>.</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.length">
<code class="descname">length</code><em class="property"> = None</em><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.length" title="Permalink to this definition">¶</a></dt>
<dd><p>Length of subfault in meters.</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.longitude">
<code class="descname">longitude</code><em class="property"> = None</em><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.longitude" title="Permalink to this definition">¶</a></dt>
<dd><p>Longitude of the subfault based on <em>coordinate_specification</em>.</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.mu">
<code class="descname">mu</code><em class="property"> = None</em><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.mu" title="Permalink to this definition">¶</a></dt>
<dd><p>Rigidity (== shear modulus) in Pascals.</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.SubFault.okada">
<code class="descname">okada</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.okada" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply Okada to this subfault and return a DTopography object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Input:</th><td class="field-body"><ul class="first simple">
<li>x,y are 1d arrays</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Output:</th><td class="field-body"><ul class="first last simple">
<li><dl class="first docutils">
<dt>DTopography object with dZ array of shape (1,len(x),len(y))</dt>
<dd>with single static displacement and times = [0.].</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Currently only calculates the vertical displacement.</p>
<p>Okada model is a mapping from several fault parameters
to a surface deformation.
See Okada 1985 <a class="reference internal" href="biblio.html#okada85" id="id1">[Okada85]</a>, or Okada 1992, Bull. Seism. Soc. Am.</p>
<p>okadamap function riginally written in Python by Dave George for
Clawpack 4.6 okada.py routine, with some routines adapted
from fortran routines written by Xiaoming Wang.</p>
<p>Rewritten and made more flexible by Randy LeVeque</p>
<p><strong>Note:</strong> <em>self.coordinate_specification</em> (str) specifies the location on 
each subfault that corresponds to the (longitude,latitude) and depth 
subfault.</p>
<p>See the documentation for <em>SubFault.calculate_geometry</em> for dicussion of the 
possible values <em>self.coordinate_specification</em> can take.</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.rake">
<code class="descname">rake</code><em class="property"> = None</em><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.rake" title="Permalink to this definition">¶</a></dt>
<dd><p>Rake of subfault movement in degrees.</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.rise_shape">
<code class="descname">rise_shape</code><em class="property"> = None</em><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.rise_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Shape of rise, &#8216;linear&#8217; or &#8216;quadratic&#8217; (piecewise)</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.rise_time">
<code class="descname">rise_time</code><em class="property"> = None</em><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.rise_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Total rise time of subfault (sec)</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.rise_time_starting">
<code class="descname">rise_time_starting</code><em class="property"> = None</em><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.rise_time_starting" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional time of first part of rise, before break in pw smooth rise</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.rupture_time">
<code class="descname">rupture_time</code><em class="property"> = None</em><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.rupture_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Time subfault starts to rupture (sec)</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.rupture_type">
<code class="descname">rupture_type</code><em class="property"> = None</em><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.rupture_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Either &#8216;static&#8217; or &#8216;kinematic&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.SubFault.set_corners">
<code class="descname">set_corners</code><span class="sig-paren">(</span><em>corners</em>, <em>rake=90.0</em>, <em>projection_zone=None</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.set_corners" title="Permalink to this definition">¶</a></dt>
<dd><p>set three corners for a triangular fault.
Input <em>corners</em> should be iterable of length 3.</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.slip">
<code class="descname">slip</code><em class="property"> = None</em><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.slip" title="Permalink to this definition">¶</a></dt>
<dd><p>Slip on subfault in strike direction in meters.</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.strike">
<code class="descname">strike</code><em class="property"> = None</em><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.strike" title="Permalink to this definition">¶</a></dt>
<dd><p>Strike direction of subfault in degrees.</p>
</dd></dl>

<dl class="attribute">
<dt id="clawpack.geoclaw.dtopotools.SubFault.width">
<code class="descname">width</code><em class="property"> = None</em><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubFault.width" title="Permalink to this definition">¶</a></dt>
<dd><p>Width of subfault in meters.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="clawpack.geoclaw.dtopotools.SubdividedPlaneFault">
<em class="property">class </em><code class="descclassname">clawpack.geoclaw.dtopotools.</code><code class="descname">SubdividedPlaneFault</code><span class="sig-paren">(</span><em>base_subfault</em>, <em>nstrike=1</em>, <em>ndip=1</em>, <em>slip_function=None</em>, <em>Mo=None</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubdividedPlaneFault" title="Permalink to this definition">¶</a></dt>
<dd><p>Define a fault by starting with a single fault plane (specified as 
<em>base_subfault</em> of class <em>SubFault</em>) and subdividing the fault plane
into a rectangular array of <em>nstrike</em> by <em>ndip</em> equally sized subfaults.</p>
<p>By default,the slip on each subfault will be initialized to
<em>base_subfault.slip</em> so that the slip is uniform over the original plane
and the seismic moment is independent of the number of subdivisions.</p>
<p>Alternatively, the slip distribution can be specified by providing a
function <em>slip_distribution</em>, which should be a function of <em>(xi,eta)</em>
with each variable ranging from 0 to 1.  <em>xi</em> varies from 0 at the top
of the fault to 1 at the bottom in the down-dip direction. 
<em>eta</em> varies from one edge of the fault to the other moving in the
strike direction.  This function will be evaluated at the centroid of
each subfault to set the slip.</p>
<p>Can also specify a desired seismic moment Mo in which case the slips will
be rescaled at the end so the total seismic moment is Mo.  In this case
the <em>slip_distribution</em> function only indicates the relative slip
between subfaults.</p>
<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.SubdividedPlaneFault.subdivide">
<code class="descname">subdivide</code><span class="sig-paren">(</span><em>nstrike=1</em>, <em>ndip=1</em>, <em>slip_function=None</em>, <em>Mo=None</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.SubdividedPlaneFault.subdivide" title="Permalink to this definition">¶</a></dt>
<dd><p>Subdivide the fault plane into nstrike * ndip subfaults.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="clawpack.geoclaw.dtopotools.TensorProductFault">
<em class="property">class </em><code class="descclassname">clawpack.geoclaw.dtopotools.</code><code class="descname">TensorProductFault</code><span class="sig-paren">(</span><em>fault_plane</em>, <em>slip_along_strike=None</em>, <em>slip_down_dip=None</em>, <em>nstrike=1</em>, <em>ndip=1</em>, <em>Mo=None</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.TensorProductFault" title="Permalink to this definition">¶</a></dt>
<dd><p>Define a fault by starting with a single fault plane (specified as 
<em>fault_plane</em> of class <em>SubFault</em>) and subdividing the fault plane
into a rectangular array of <em>nstrike</em> by <em>ndip</em> equally sized subfaults.</p>
<p>Then define the slip on each subfault via
two one-dimensional functions <em>slip_along_strike</em> and
<em>slip_down_dip</em> that specify the slip as a function of fractional
distance in the along-strike and down-dip direction respectively
(i.e. the argument of each goes from 0 to 1).</p>
<p>Setting either to None defaults to constant function 1.</p>
<p>The slip is set by evaluating the tensor product at the centroid of
each subfault.</p>
<p>Can specify a desired seismic moment Mo in which case the slips will
be rescaled at the end.</p>
</dd></dl>

<dl class="class">
<dt id="clawpack.geoclaw.dtopotools.UCSBFault">
<em class="property">class </em><code class="descclassname">clawpack.geoclaw.dtopotools.</code><code class="descname">UCSBFault</code><span class="sig-paren">(</span><em>path=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.UCSBFault" title="Permalink to this definition">¶</a></dt>
<dd><p>Fault subclass for reading in subfault format models from UCSB</p>
<p>Read in subfault format models produced by Chen Ji&#8217;s group at UCSB,
downloadable from:</p>
<blockquote>
<div><a class="reference external" href="http://www.geol.ucsb.edu/faculty/ji/big_earthquakes/home.html">http://www.geol.ucsb.edu/faculty/ji/big_earthquakes/home.html</a></div></blockquote>
<dl class="method">
<dt id="clawpack.geoclaw.dtopotools.UCSBFault.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>path</em>, <em>rupture_type='static'</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.UCSBFault.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in subfault specification at <em>path</em>.</p>
<p>Creates a list of subfaults from the subfault specification file at
<em>path</em>.</p>
<p>Subfault format contains info for dynamic rupture, so can specify 
rupture_type = &#8216;static&#8217; or &#8216;kinematic&#8217; (or &#8216;dynamic&#8217; for backward 
compatibility).</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="clawpack.geoclaw.dtopotools.convert_units">
<code class="descclassname">clawpack.geoclaw.dtopotools.</code><code class="descname">convert_units</code><span class="sig-paren">(</span><em>value</em>, <em>io_units</em>, <em>direction=1</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.convert_units" title="Permalink to this definition">¶</a></dt>
<dd><p>convert <em>value</em> to standard units from <em>io_units</em> or vice versa.
<em>io_units</em> (str) refers to the units used in the subfault file read or to be
written.  The standard units are those used internally in this module.
See the comments below for the standard units.
If <em>direction==1</em>, <em>value</em> is in <em>io_units</em> and convert to standard.
If <em>direction==2</em>, <em>value</em> is in standard units and convert to <em>io_units</em>.</p>
</dd></dl>

<dl class="function">
<dt id="clawpack.geoclaw.dtopotools.plot_dZ_colors">
<code class="descclassname">clawpack.geoclaw.dtopotools.</code><code class="descname">plot_dZ_colors</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>dZ</em>, <em>axes=None</em>, <em>cmax_dZ=None</em>, <em>dZ_interval=None</em>, <em>add_colorbar=True</em>, <em>verbose=False</em>, <em>colorbar_labelsize=10</em>, <em>colorbar_ticksize=10</em>, <em>fig_kwargs={}</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.plot_dZ_colors" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot sea floor deformation dZ as colormap with contours</p>
</dd></dl>

<dl class="function">
<dt id="clawpack.geoclaw.dtopotools.plot_dZ_contours">
<code class="descclassname">clawpack.geoclaw.dtopotools.</code><code class="descname">plot_dZ_contours</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>dZ</em>, <em>axes=None</em>, <em>dZ_interval=0.5</em>, <em>verbose=False</em>, <em>fig_kwargs={}</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.plot_dZ_contours" title="Permalink to this definition">¶</a></dt>
<dd><p>For plotting seafloor deformation dZ</p>
</dd></dl>

<dl class="function">
<dt id="clawpack.geoclaw.dtopotools.rise_fraction">
<code class="descclassname">clawpack.geoclaw.dtopotools.</code><code class="descname">rise_fraction</code><span class="sig-paren">(</span><em>t</em>, <em>rupture_time</em>, <em>rise_time</em>, <em>rise_time_starting=None</em>, <em>rise_shape='quadratic'</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.rise_fraction" title="Permalink to this definition">¶</a></dt>
<dd><p>A continuous piecewise quadratic or linear function of t that is</p>
<blockquote>
<div><ul class="simple">
<li>0 for t &lt;= rupture_time,</li>
<li>1 for t &gt;= rupture_time + rise_time</li>
</ul>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Inputs:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><em>t</em> (scalar, list, or np.array): times at which to evaluate the 
rise function.</li>
<li><em>rupture_time</em> (float): time (seconds) when rupture starts.</li>
<li><em>rise_time</em> (float): duration of rupture (seconds).</li>
<li><em>rise_time_starting</em> (float or None): If None, it is internally set to 
<cite>rise_time/2</cite>.</li>
<li><em>rise_shape</em> (str): 
If <cite>rise_shape == &#8220;quadratic&#8221;</cite>, the rise time function is piecewise quadratic,
continuously differentiable, with maximum slope at 
<cite>t = rupture_time + rise_time_starting</cite>
and zero slope at <cite>t = rupture_time</cite> and <cite>t = rupture_time + rise_time</cite>.
If <cite>rise_shape == &#8220;linear&#8221;</cite>, the rise time function is piecewise linear,
with value 0.5 at 
<cite>t = rupture_time + rise_time_starting</cite>.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Outputs:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p><em>rf</em> (float or np.array): The rise time function evaluated at <cite>t</cite>.
If the input is a list or tuple of times, returns a numpy array.</p>
</dd></dl>

<dl class="function">
<dt id="clawpack.geoclaw.dtopotools.strike_direction">
<code class="descclassname">clawpack.geoclaw.dtopotools.</code><code class="descname">strike_direction</code><span class="sig-paren">(</span><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em><span class="sig-paren">)</span><a class="headerlink" href="#clawpack.geoclaw.dtopotools.strike_direction" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate strike direction between two points.
Actually calculates &#8220;initial bearing&#8221; from (x1,y1) in direction
towards (x2,y2), following
<a class="reference external" href="http://www.movable-type.co.uk/scripts/latlong.html">http://www.movable-type.co.uk/scripts/latlong.html</a></p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p><a href="http://clawpack.org/">
    <img class="logo" src= "_static/clawlogo.jpg" alt="Logo"/>
</a>
<h2>Version 5.2.1</h2>
</p>
  <h3><a href="contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">dtopotools module for moving topography</a><ul>
<li><a class="reference internal" href="#module-clawpack.geoclaw.dtopotools">Documentation auto-generated from the module docstrings</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="contents.html">Documentation overview</a><ul>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/dtopotools_module.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<h3>Versions</h3>
<ul>
    <li><a href="../v5.4.1/dtopotools_module.html">v5.4.1</a></li>
    <li><a href="../v5.4.0/dtopotools_module.html">v5.4.0</a></li>
    <li><a href="../v5.3.1/dtopotools_module.html">v5.3.1</a></li>
    <li><a href="../v5.3.0/dtopotools_module.html">v5.3.0</a></li>
    <li><a href="dtopotools_module.html">v5.2.1</a></li>
    <li><a href="../v5.2.0/contents.html">v5.2.0</a></li>
    <li><a href="../v5.1.0/contents.html">v5.1.0</a></li>
    <li><a href="../v5.5.0_future/dtopotools_module.html">v5.5.0_future</a></li>
    <li><a href="../master/dtopotools_module.html">master</a></li>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    &copy; Copyright 2014, The Clawpack Development Team.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  
  </body>
</html>