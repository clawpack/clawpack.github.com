<!-- **** DO NOT EDIT THIS FILE *** 
         This file was generated automatically from file
              plotclaw1xt.m
         using $CLAW/clawutil/src/python/clawutil/clawcode2html.py         -->

<html>
<title> plotclaw1xt.m.html </title>


          <head>
           <link rel="icon" href="http://www.clawpack.org//clawicon.ico" />
          </head> 
           <BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000FF" 
                 VLINK="#5500DD" ALINK="#FF0000">
           <font FACE="HELVETICA,ARIAL">
           
<!-- Created from the file /Users/rjl/Downloads/clawpack-v5.6.0_test/clawpack-v5.6.0_galleries/apps/fvmbook/chap11/congestion/plotclaw1xt.m -->
<!-- Date: Sat Jun  1 2019 at 12:28:52 -->

<table bgcolor="#FFEE99"> <tr> <td>
&nbsp;<font size=6> plotclaw1xt.m.html </font> </td>

            <td><a href="http://www.clawpack.org/index.html"><img
            src="http://www.clawpack.org//clawlogo.jpg"
            width=100 alt="CLAWPACK"></a>&nbsp;&nbsp; </td> </tr> <tr> <td>
&nbsp;Source file: &nbsp;&nbsp;<a href="plotclaw1xt.m">plotclaw1xt.m </a>
</td></tr><tr><td>
&nbsp;Directory:  &nbsp; /Users/rjl/Downloads/clawpack-v5.6.0_test/clawpack-v5.6.0_galleries/apps/fvmbook/chap11/congestion 
</td></tr><tr><td>
&nbsp;Converted:  &nbsp; Sat Jun  1 2019 at 12:28:52 
&nbsp; using <a href="http://www.clawpack.org//doc/application_documentation.html#clawcode2html">clawcode2html</a>
</td></tr><tr><td>
<font color="#BB3300"> &nbsp;This documentation file will 
not reflect any later changes in the source file. </font>
</td></tr></table></font>
<p>
<pre> 
<font color="blue">%</font>
<font color="blue">% plotclaw1xt.m</font>
<font color="blue">%</font>
<font color="blue">% generic plotting routine for claw1d and amrclaw1d output in matlab</font>
<font color="blue">% R. J. LeVeque, 1999</font>
<font color="blue">%</font>
<font color="blue">% Various styles of plots are included, the routines prompts for type.</font>
<font color="blue">%</font>
<font color="blue">% plotclaw1 can be started before clawpack is finished with the computation</font>
<font color="blue">% It will pause and wait for the next output time as needed.</font>
<font color="blue">% For this to work, remove any old files fort.* before starting the </font>
<font color="blue">% new computation.</font>
<font color="blue">%</font>
<font color="blue">%</font>
<font color="blue">% Various parameters are hardwired in but can be changed by setting</font>
<font color="blue">% them explicitly in matlab before calling plotclaw1:</font>
<font color="blue">%</font>
<font color="blue">%   MappedGrid == 1 means that a function mapc2p.m exists which maps </font>
<font color="blue">%              computational points on rectangular grid to physical points.</font>
<font color="blue">%            </font>
<font color="blue">%------------------------------</font>


qxt = [];
txt = [];

<font color="blue">% general set-up:</font>


plotstyle = '-';   <font color="blue">% plot as a line by default</font>


mqrange = input('Which component of q?  (default=1, 0 for user-defined variable) '); 
			<font color="blue">% Determine which element(s)</font>
			<font color="blue">% should be plotted.</font>
if isempty(mqrange)
  mqrange = 1;  <font color="blue">% defaults to 1</font>
  end

if mqrange==0
    UserVariable = 1;
    UserVariableFile = ...
	input('File name of function defining variable (in quotes) ');
  else
    UserVariable = 0;
  end


if exist('MappedGrid')~=1
  MappedGrid = 0;  <font color="blue">% default is no coordinate mapping</font>
  end

if exist('setprob')==2
   <font color="blue">% the file setprob.m can be used to set up any necessary physical parameters</font>
   <font color="blue">% or desired values of plotting parameters for this particular problem.</font>
   setprob
   end

clf


n = 0;  <font color="blue">% frame counter</font>
maxframes = 1000;



<font color="blue">%=============================================</font>
<font color="blue">% MAIN LOOP ON FRAMES:</font>
<font color="blue">%=============================================</font>

while n <= maxframes
 <font color="blue">% read time and number of grids:</font>
 n1 = n+10000;
 fname = ['fort.',num2str(n1)];
 fname(6) = 't';
 
 if ~exist(fname) 
     disp(' ');
     disp(['Frame ',num2str(n),' does not exist ***']);
     if n==0
	<font color="blue">% no initial data to plot, go on to Frame 1:</font>
	n = 1;
	fname(length(fname))='1';
	end
     end

 if exist(fname)

<font color="blue">% start reading data, beginning with parameters for this frame:</font>

 fid = fopen(fname);

 t = fscanf(fid,'<font color="blue">%g',1);     fscanf(fid,'%s',1);</font>
 meqn = fscanf(fid,'<font color="blue">%d',1);     fscanf(fid,'%s',1);</font>
 ngrids = fscanf(fid,'<font color="blue">%d',1);     fscanf(fid,'%s',1);</font>

 if ngrids==0 
   <font color="blue">% flag that the computation has ended, in case nframes wasn't known</font>
   <font color="blue">% initially</font>
   break
   end

 disp(' ')
 disp(['Frame ',num2str(n),' at time t = ',num2str(t)]);


 clf

 if exist('beforeframe')==2
    beforeframe  <font color="blue">% make an m-file with this name for any other commands you</font>
                <font color="blue">% want executed before drawing each frame, for example</font>
                 <font color="blue">% if you want to use axes to specify exactly where the</font>
                 <font color="blue">% plot will be in the window, aspect ratio, etc.</font>
    end


 <font color="blue">% change the file name to read the q data:</font>
 fname(6) = 'q';
 fid = fopen(fname);


 <font color="blue">%=============================================</font>
 <font color="blue">% MAIN LOOP ON GRIDS FOR THIS FRAME:</font>
 <font color="blue">%=============================================</font>

 for ng = 1:ngrids

   <font color="blue">% read parameters for this grid:</font>

   gridno = fscanf(fid,'<font color="blue">%d',1);     fscanf(fid,'%s',1);</font>
   level = fscanf(fid,'<font color="blue">%d',1);     fscanf(fid,'%s',1);</font>
   mx = fscanf(fid,'<font color="blue">%d',1);     fscanf(fid,'%s',1);</font>

   xlow = fscanf(fid,'<font color="blue">%g',1);     fscanf(fid,'%s',1);</font>
   dx = fscanf(fid,'<font color="blue">%g',1);     fscanf(fid,'%s',1);</font>

   <font color="blue">% read q data:</font>

   data = fscanf(fid,'<font color="blue">%g',[meqn,mx]);</font>
   data = data';


   if UserVariable==1
       <font color="blue">% User has supplied a function to convert original q variables to</font>
       <font color="blue">% the variable which is to be plotted, e.g. Mach number, entropy.</font>
       q = feval(UserVariableFile,data);
       end

   x = xlow + ((1:mx) - 0.5)*dx;

   if MappedGrid
      <font color="blue">% coordinate mapping must be applied</font>
      x = mapc2p(x);
      end

<font color="blue">%=====================================================================</font>
<font color="blue">%  The plot command:</font>
<font color="blue">%=====================================================================</font>

 if UserVariable==1
     plot(x,q,plotstyle)
     title([UserVariableFile,'   at time t = ', num2str(t)])
  else
   for  mq=mqrange
     subplot(length(mqrange),1,find(mqrange==mq))
     q = data(:,mq);
     plot(x,q,plotstyle)
     title(['q(',num2str(mq),')   at time t = ', num2str(t)])
     end  <font color="blue">% loop on mq</font>
  end 


 <font color="blue">% done with this frame</font>
 hold on

 if exist('afterframe')==2  
    afterframe  <font color="blue">% make an m-file with this name for any other commands you</font>
	        <font color="blue">% want executed at the end of drawing each frame</font>
                <font color="blue">% for example to change the axes, or add something to the plot</font>
    end
 hold off

 status = fclose(fid);

 <font color="blue">% store data for x-t plot:</font>
 qxt(:,n+1) = q;
 txt(:,n+1) = t;

 if n==0
    q0 = q;
    end


 end
 n = n+1;
end <font color="blue">% if exist(fname)</font>

if ~exist(fname)
  break
  end


 end <font color="blue">% main loop on frames</font>
 <font color="blue">%=============================================</font>

xlim = [-30 20];
tlim = [-1 20];
figure(1)
clf
cline = [-.05:.02:1];
contour(x,txt,qxt',cline)
colormap([0 0 1])
axis([xlim tlim])

hold on
<font color="blue">% add contour from (0,0)</font>
plot([0 -11.2], [0 12.4], 'b');
hold off

figure(3)
clf
hdensity = axes('position',[.1 .1 .8 .35]);
plot(x,q)
title(['density at time ', num2str(t)])
axis([xlim -.1 1.1])

figure(2)
clf
hdensity = axes('position',[.1 .1 .8 .35]);
plot(x,q0)
title('density at time 0')
axis([xlim -.1 1.1])

exno = 1;
figure(1)
eval(['print claw',num2str(exno),'xt -deps'])
figure(2)
eval(['print claw',num2str(exno),'rho0 -deps'])
figure(3)
eval(['print claw',num2str(exno),'rho1 -deps'])

</pre></html>
