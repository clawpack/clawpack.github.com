<!-- **** DO NOT EDIT THIS FILE *** 
         This file was generated automatically from file
              nbtools.py
         using $CLAW/clawutil/src/python/clawutil/clawcode2html.py         -->

<html>
<title> nbtools.py.html </title>


          <head>
           <link rel="icon" href="http://www.clawpack.org//_static/clawicon_new.ico" />
          </head> 
           <BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000FF" 
                 VLINK="#5500DD" ALINK="#FF0000">
           <font FACE="HELVETICA,ARIAL">
           
<!-- Created from the file /Users/rjl/clawpack_src/clawpack_master/apps/tsunami/shelf1d/nbtools.py -->
<!-- Date: Sat Apr 18 2020 at 20:30:15 -->

<table bgcolor="#FFEE99"> <tr> <td>
&nbsp;<font size=6> nbtools.py.html </font> </td>

            <td><a href="http://www.clawpack.org/index.html"><img
            src="http://www.clawpack.org//_static/clawlogo_border.jpg"
            width=150 alt="CLAWPACK"></a>&nbsp;&nbsp; </td> </tr> <tr> <td>
&nbsp;Source file: &nbsp;&nbsp;<a href="nbtools.py">nbtools.py </a>
</td></tr><tr><td>
&nbsp;Directory:  &nbsp; /Users/rjl/clawpack_src/clawpack_master/apps/tsunami/shelf1d 
</td></tr><tr><td>
&nbsp;Converted:  &nbsp; Sat Apr 18 2020 at 20:30:15 
&nbsp; using <a href="http://www.clawpack.org//doc/application_documentation.html#clawcode2html">clawcode2html</a>
</td></tr><tr><td>
<font color="#BB3300"> &nbsp;This documentation file will 
not reflect any later changes in the source file. </font>
</td></tr></table></font>
<p>
<pre> 

from IPython.core.display import display
try:
    from IPython.display import FileLink
except:
    print "*** Ipython version does not support FileLink"


def make_htmls(outfile=None, verbose=False, readme_link=True):
    """Perform 'make .htmls' and display link."""
    import os,sys
    
    if outfile is None:
        outfile='htmls_output.txt'
    cmd = 'make .htmls &> %s' % outfile

    if verbose:
        print "Making html documentation files... %s" % cmd
        sys.stdout.flush()

    status = os.system(cmd)
    
    if verbose:
        local_file = FileLink(outfile)
        print "Done...  Check this file to see output:" 
        display(local_file)
    if readme_link:
        print "See the README.html file for links to input files..."
        display(FileLink('README.html'))
    

def make_exe(outfile=None, verbose=True):
    """Perform 'make .exe' and display link."""
    import os,sys
    
    if outfile is None:
        outfile='compile_output.txt'
    cmd = 'make .exe &> %s' % outfile

    if verbose:
        print "Compiling code... %s" % cmd
        sys.stdout.flush()

    status = os.system(cmd)
    
    if verbose:
        local_file = FileLink(outfile)
        print "Done...  Check this file to see output:" 
        display(local_file)
    
def make_output(outdir=None, outfile=None, verbose=True):
    """Perform 'make output' and display link."""
    import os,sys
    
    cmd = 'make output'
    if outdir is not None:
        cmd = cmd + ' OUTDIR=%s' % outdir
    if outfile is None:
        outfile = 'run_output.txt'
        cmd = cmd + ' &> %s' % outfile
    else:
        cmd = cmd + ' &> %s' % outfile
    if verbose:
        print "Running code... %s" % cmd
        sys.stdout.flush()
    status = os.system(cmd)
    
    if verbose:
        local_file = FileLink(outfile)
        print "Done... Check this file to see output:"
        display(local_file)
    
def make_plots(outdir=None, plotdir=None, outfile=None, verbose=True):
    """Perform 'make plots' and display links"""
    import os, sys

    cmd = 'make plots'
    if outdir is not None:
        cmd = cmd + ' OUTDIR=%s' % outdir

    if plotdir is None:
        plotdir = '_plots'
    else:
        cmd = cmd + ' PLOTDIR=%s' % plotdir

    if outfile is None:
        outfile = 'plot_output.txt'
        cmd = cmd + ' &> %s' % outfile
    else:
        cmd = cmd + ' &> %s' % outfile


    if verbose:
        print "Making plots... %s" % cmd
        sys.stdout.flush()

    status = os.system(cmd)
    
    if verbose:
        local_file = FileLink(outfile)
        print "Done... Check this file to see output:"
        display(local_file)
    
        index_file = FileLink('%s/_PlotIndex.html' % plotdir)
        print "View plots created at this link:"
        display(index_file)
    

def make_output_and_plots(label=None, verbose=True):

    import sys
    if label is None: 
        label = ''
    else:
        if label[0] != '_':
            label = '_' + label
    outdir = '_output%s' % str(label)
    outfile = 'run_output%s.txt' % str(label)
    make_output(outdir,outfile,verbose)

    plotdir = '_plots%s' % str(label)
    outfile = 'plot_output%s.txt' % str(label)
    make_plots(outdir,plotdir,outfile,verbose)
    return plotdir
</pre></html>
