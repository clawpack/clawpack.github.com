<!-- **** DO NOT EDIT THIS FILE *** 
         This file was generated automatically from file
              maketopo_testnew.py
         using $CLAW/clawutil/src/python/clawutil/clawcode2html.py         -->

<html>
<title> maketopo_testnew.py.html </title>


          <head>
           <link rel="icon" href="http://clawpack.github.io//clawicon.ico" />
          </head> 
           <BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000FF" 
                 VLINK="#5500DD" ALINK="#FF0000">
           <font FACE="HELVETICA,ARIAL">
           
<!-- Created from the file /Users/rjl/git/clawpack/geoclaw/examples/tsunami/chile2010/maketopo_testnew.py -->
<!-- Date: Mon Sep  1 2014 at 16:47:48 -->

<table bgcolor="#FFEE99"> <tr> <td>
&nbsp;<font size=6> maketopo_testnew.py.html </font> </td>

            <td><a href="http://clawpack.github.io/doc/index.html"><img
            src="http://clawpack.github.io//clawlogo.jpg"
            width=100 alt="CLAWPACK"></a>&nbsp;&nbsp; </td> </tr> <tr> <td>
&nbsp;Source file: &nbsp;&nbsp;<a href="maketopo_testnew.py">maketopo_testnew.py </a>
</td></tr><tr><td>
&nbsp;Directory:  &nbsp; /Users/rjl/git/clawpack/geoclaw/examples/tsunami/chile2010 
</td></tr><tr><td>
&nbsp;Converted:  &nbsp; Mon Sep  1 2014 at 16:47:48 
&nbsp; using <a href="http://clawpack.github.io//doc/application_documentation.html#clawcode2html">clawcode2html</a>
</td></tr><tr><td>
<font color="#BB3300"> &nbsp;This documentation file will 
not reflect any later changes in the source file. </font>
</td></tr></table></font>
<p>
<pre> 
import os,sys
import numpy
from matplotlib import pyplot as plt

from clawpack.geoclaw import dtopotools

usgs_subfault = dtopotools.SubFault()
usgs_subfault.strike = 16.
usgs_subfault.length = 450.e3
usgs_subfault.width = 100.e3
usgs_subfault.depth = 35.e3
usgs_subfault.slip = 15.
usgs_subfault.rake = 104.
usgs_subfault.dip = 14.
usgs_subfault.longitude = -72.668
usgs_subfault.latitude = -35.826
usgs_subfault.coordinate_specification = "top center"

x = numpy.linspace(-77, -67, 100)
y = numpy.linspace(-40, -30, 100)
times = [0., 1.]

fault = dtopotools.Fault()
fault.subfaults = [usgs_subfault]
fault.create_dtopography(x,y,times)
dtopo = fault.dtopo
dtopo.write('usgs100227_new.tt3', 3)
print "Mw = ",fault.Mw()
plt.figure()
dtopo.plot_dz_colors(1.)
dz = dtopo.dz_list[1]

if 1:
    plt.figure(figsize=(12,7))
    ax1 = plt.subplot(121)
    ax2 = plt.subplot(122)
    fault.plot_subfaults(axes=ax1,slip_color=True)
    ax1.set_xlim(x.min(),x.max())
    ax1.set_ylim(y.min(),y.max())
    dtopo.plot_dz_colors(1.,axes=ax2)
    plt.savefig('dtopo.png')


<font color="blue"># compare to old:</font>
CLAW = os.environ['CLAW']
exdir = os.path.join(CLAW,'examples/tsunami/chile2010')
dtopo1 = dtopotools.DTopography('usgs100227.tt1',dtopo_type=1)
plt.figure()
dtopo1.plot_dz_colors(1.)
dz1 = dtopo1.dz_list[1]

ddz = dz - dz1
print "max change in dz is ",abs(ddz).max()
plt.figure()
plt.pcolor(dtopo.X,dtopo.Y,dz-dz1)
plt.colorbar()
</pre></html>
