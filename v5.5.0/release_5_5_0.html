
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Release 5.5.0 &#8212; Clawpack 5.5.0 documentation</title>
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/base.css" type="text/css" />
    <link rel="stylesheet" href="_static/layout.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/clawicon.ico"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
<div id="main-wrapper" class="sphinx">
<div id="header-wrapper">
  <section id="header">
    <!-- <h1><a href="http://clawpack.org/">Clawpack</a></h1> -->
    <h1><a href="http://clawpack.org/">Clawpack-5</a></h1> 
    <nav>
      <ul>
        <li>
          <!--<a class="" href="http://clawpack.org">Overview</a>-->
          <a href="index.html">Overview</a>
        </li>
        <li>
          <a href="contents.html">Docs</a>
        </li>
        <li>
          <a href="installing.html">Install</a>
        </li>
        <li>
          <a class="" href="http://clawpack.org/gallery/index.html">Gallery</a>
        </li>
        <li>
          <a class="active" href="http://github.com/clawpack">GitHub</a>
        </li>
        <li>
          <a class="" href="community.html">Community</a>
        </li>
      </ul>
    </nav>
  </section>
<div class="decoration"></div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="contents.html">Clawpack 5.5.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="release-5-5-0">
<span id="id1"></span><h1>Release 5.5.0<a class="headerlink" href="#release-5-5-0" title="Permalink to this headline">¶</a></h1>
<p>Clawpack 5.5.0 was released on August 28, 2018.  See <a class="reference internal" href="installing.html#installing"><span class="std std-ref">Installing Clawpack</span></a>.</p>
<p>Changes relative to Clawpack 5.4.1 (June 28, 2017) are shown below.</p>
<div class="section" id="changes-to-documentation">
<h2>Changes to documentation<a class="headerlink" href="#changes-to-documentation" title="Permalink to this headline">¶</a></h2>
<p>For developers:  There is no longer a <cite>master</cite> branch in the
<a class="reference external" href="https://github.com/clawpack/doc/">clawpack/doc</a> repository.</p>
<p>Use branch <cite>v5.5.0</cite> for updates to current documentation and the <cite>dev</cite> branch
for developing documentation for changes or new features that are in the
<cite>master</cite> branch of the code repositories but are not yet in an official
release.</p>
</div>
<div class="section" id="changes-that-are-not-backward-compatible">
<h2>Changes that are not backward compatible<a class="headerlink" href="#changes-that-are-not-backward-compatible" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The format of checkpoint styles has changed for AMRClaw and GeoClaw, so old
checkpoint files can not be used to restart with newer code.</p></li>
<li><p>In GeoClaw, the way some topofiles are interpreted has been changed to conform with
the intended “grid registration”.
This is not backward compatable for files with headers that specify
<cite>xllower, yllower</cite>.  See below for more details.</p></li>
<li><p>Many of the previous storm surge capabilies in GeoClaw have been enhanced and
simplified in terms of handling storm input.  Some of these changes are not
backwards compatible due to the way storm data is now specified and how
time references to landfall are now specified.  The examples in GeoClaw now
are updated to reflect these changes however and it is highly recommended
that users look at these examples for how to change their own existing
examples.</p></li>
</ul>
</div>
<div class="section" id="general-changes">
<h2>General changes<a class="headerlink" href="#general-changes" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p><cite>LICENSE</cite> file added to all repositories, with BSD license</p></li>
<li><p><cite>CODE_OF_CONDUCT.md</cite> has been added to the super repository so as to
define a code of conduct for the community.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="changes-to-classic">
<h2>Changes to classic<a class="headerlink" href="#changes-to-classic" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>None other than addition of License.</p></li>
</ul>
</div></blockquote>
<p>See <a class="reference external" href="https://github.com/clawpack/classic/compare/v5.4.1...v5.5.0">classic diffs</a></p>
</div>
<div class="section" id="changes-to-clawutil">
<h2>Changes to clawutil<a class="headerlink" href="#changes-to-clawutil" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>Minor changes</p></li>
</ul>
</div></blockquote>
<p>See <a class="reference external" href="https://github.com/clawpack/clawutil/compare/v5.4.1...v5.5.0">clawutil diffs</a></p>
</div>
<div class="section" id="changes-to-visclaw">
<h2>Changes to visclaw<a class="headerlink" href="#changes-to-visclaw" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>The script <cite>src/python/visclaw/plot_timing_stats.py</cite>
can be used to plot timing data that is now printed out following
AMRClaw and GeoClaw runs.  See the AMRClaw notes below for more details.</p></li>
<li><p>Minor changes to Matlab codes</p></li>
<li><p>Minor changes to kml functionality, and printing of more digits</p></li>
<li><p><cite>ClawPlotItem.colorbar_kwargs</cite> added for setting other colorbar keyword
arguments</p></li>
<li><p><cite>ClawPlotAxes.beforeframe</cite> added to allow e.g. plotting on a background
image, see <a class="reference external" href="https://github.com/clawpack/visclaw/pull/226">PR #226</a> for an
example.</p></li>
</ul>
</div></blockquote>
<p>See <a class="reference external" href="https://github.com/clawpack/visclaw/compare/v5.4.1...v5.5.0">visclaw diffs</a></p>
</div>
<div class="section" id="changes-to-riemann">
<h2>Changes to riemann<a class="headerlink" href="#changes-to-riemann" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>Add some vectorized Riemann solvers</p></li>
<li><p>Changes to layered shallow water solvers</p></li>
<li><p>Add some Riemann solvers for adjoint equations</p></li>
</ul>
</div></blockquote>
<p>See <a class="reference external" href="https://github.com/clawpack/riemann/compare/v5.4.1...v5.5.0">riemann diffs</a></p>
</div>
<div class="section" id="changes-to-amrclaw">
<h2>Changes to amrclaw<a class="headerlink" href="#changes-to-amrclaw" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The <cite>valout.f</cite> routine in <cite>amrclaw/src/Nd</cite> (for <cite>N=1,2,3</cite>)
has been cleaned up as <cite>valout.f90</cite>, and now also prints out timing
information to two files in the output directory: <cite>timing.txt</cite> contains a
summary at the end of the run, while <cite>timing.csv</cite> contains cumulative timing
information at each output time.</p></li>
<li><p>The boundary condition routines <cite>amrclaw/src/Nd/bcNamr.f</cite>  (for <cite>N=1,2,3</cite>)
have been replaced with modernized versions <cite>amrclaw/src/Nd/bcNamr.f90</cite>
that should be easier to read and modify by users if necessary.</p></li>
<li><p>The script <cite>$CLAW/visclaw/src/python/visclaw/plot_timing_stats.py</cite>
can be used to plot this data (or modify this script as desired).
Information on both wall time and CPU time is
included, particularly useful for multi-core simulations.</p></li>
<li><p>Write more digits in <cite>regions.data</cite> file.</p></li>
<li><p>Clean up some timing variables.</p></li>
<li><p>The maximum number of allowable refined grids is now
variable, and no longer static. If the current maximum
is exceeded, all arrays dimension at <cite>maxgr</cite>, namely
<cite>rnode</cite>, <cite>node</cite>, and <cite>listOfGrids</cite> (currently set
to 10000) are resized by another 10K.
<cite>bndList</cite> is also now resizable.</p></li>
<li><p>The format of checkpoint files changed to include <cite>maxgr</cite>.
<strong>This is not backward compatible – old checkpoint files can not be used
to restart with the new code.</strong></p></li>
<li><p><cite>Makefile.amr_2d</cite> changed to include the new files to initialize,
restart, and resize the nodal arrays and boundary lists.</p></li>
<li><p>The gauges had one some variable that depended
on <cite>maxgr</cite>. By changing the gauges algorithm, this was
eliminated. The old algorithm did not scale well for
<cite>O(10^5)</cite> grids and <cite>O(100)</cite> gauges. The new algorithm just
has each grid patch sort the gauge list to see if it has any
gauges to update. (The old algorithm sorted all grid owners and
their owner gauges, (thus needing to save that mapping), and
therefore was  an index lookup by grid number. But again, 10^5
grids needing 2 arrays for only 100 gauges did not make sense.
Also changed the algorithm for finding the best source grid for a
gauge. By starting at the finest level, and rearranging the order
of the loops, once a grid owner was found for a gauge there was no
need to search the rest of the grids.</p></li>
</ul>
<p>See <a class="reference external" href="https://github.com/clawpack/amrclaw/compare/v5.4.1...v5.5.0">amrclaw diffs</a></p>
</div>
<div class="section" id="changes-to-geoclaw">
<h2>Changes to geoclaw<a class="headerlink" href="#changes-to-geoclaw" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Makefile.geoclaw changed to include the new files to initialize,
restart, and resize the nodal arrays and boundary lists.</p></li>
<li><p>The way some topofiles are interpreted has been changed to conform with
the intended “grid registration”.  In particular, topofiles with a header
containing <cite>xllower</cite> and <cite>yllower</cite> contain data that should be viewed as
cell-centered data on a uniform grid that starts at
<cite>(xllower + dx/2, yllower + dy/2)</cite> and not at <cite>(xllower, yllower)</cite>.
See <a class="reference external" href="https://github.com/clawpack/geoclaw/pull/303">PR #303</a> for more
discussion and <a class="reference internal" href="grid_registration.html#grid-registration"><span class="std std-ref">Grid registration</span></a> for documentation.
<strong>This is not backward compatable for files with these headers.</strong>
Change the header to specify <cite>xlower</cite> and <cite>ylower</cite> (or <cite>xllcenter,
yllcenter</cite>) if you want the data to be interpreted in the old manner.</p></li>
<li><p>The boundary condition routine <cite>geoclaw/src/2d/shallow/bc2amr.f</cite>
have been replaced with a modernized version <cite>geoclaw/src/2d/shallow/bc2amr.f</cite>
that should be easier to read and modify by users if necessary.
(Similar to changes made in amrclaw.)  In the case of extrapolation boundary
conditions all aux variables are also copied rather than just bathymetry.</p></li>
<li><p>The format of checkpoint files changed to include <cite>maxgr</cite>.
<strong>This is not backward compatible – old checkpoint files can not be used
to restart with the new code.</strong></p></li>
<li><p>The <cite>valout.f</cite> routine in <cite>src/2d/shallow</cite>
has been cleaned up as <cite>valout.f90</cite>, and now also prints out timing
information to two files in the output directory.  See the notes
for amrclaw above for more details.</p></li>
<li><p>The storm surge capabilties have been significantly changed including:</p>
<ul>
<li><p>A new storm format that GeoClaw now reads in directly.  There is also
a new Python storm module that contains the capability of converting
many common formats into the format that GeoClaw now expects.  These
formats currently include ATCF, HURDAT, JMA, IBtRACS, and TCVITALS.</p></li>
<li><p>Time reference is now specific to landfall or anything else that the
use requests.  In other words you no longer need absolute values of
start and stop times but everything is relative to landfall.</p></li>
<li><p>The Fortran code for storms is now simplified following the above
restricted format.  This is all handled via the Python module.</p></li>
<li><p>Additional parameterized wind and pressure fields are now included
in addition to the existing Holland 1980 field.</p></li>
<li><p>Additional preliminary support for storm data beyond parameterized
versions have been added.  This is primarily in the form of stubs
so that an API can be establised for the different data sources that
we intend to add in the future including HWRF and other formats.</p></li>
<li><p>Changes to plotting storm surge applications have also been included
that mimic the ones above.  Again please refer to the examples in
GeoClaw to see how to adapt your application.</p></li>
</ul>
</li>
<li><p>Multi-layer shallow water solvers have been extended to work with AMR.
(This is still under development and may have some bugs.)</p></li>
<li><p>There is a new Makefile.multilayer file that should be used for
multilayer applications.</p></li>
<li><p>Makefile.geoclaw changed to include the new files to initialize,
restart, and resize the nodal arrays and boundary lists.</p></li>
<li><p>New capabilities have been added to read topofiles in netCDF, and also to
download topo DEMs from <cite>.nc</cite> files at remote URLs.  This allows downloading
only a subset of the DEM and at a coarsened resolution.
See <cite>topotools.read_netcdf</cite> in <a class="reference internal" href="topotools_module.html#topotools-module"><span class="std std-ref">topotools module for working with topography data</span></a>,
and <cite>tests/test_etopo1.py</cite> for an example of usage.
<em>More documentation needed.</em></p></li>
<li><p>The <cite>etopotools.py</cite> module has been deprecated in favor of the
<cite>topotools.read_netcdf</cite> function, which can be called with
<cite>path = ‘etopo1</cite> to read from the online etopo1 database in netCDF format.
This allows downloading only a subset of the DEM and at a coarsened resolution.
The old way of doing this is not robust and sometimes gave incorrect results
due to issues with the old etopo1 server (which is no longer maintained).
See <a class="reference internal" href="topo.html#topo-netcdf"><span class="std std-ref">NetCDF format</span></a> and
<a class="reference external" href="https://github.com/clawpack/geoclaw/pull/308">PR #308</a>.
An example can be found in <cite>tests/test_etopo1.py</cite>.</p></li>
<li><p>More generally, topofiles can now be read in from netCDF files either
locally or from the web.  See <a class="reference internal" href="topo.html#topo-netcdf"><span class="std std-ref">NetCDF format</span></a> for some documentation.</p></li>
<li><p>New capabilities have been added to download NOAA tide gauge data, see
<a class="reference external" href="https://github.com/clawpack/geoclaw/pull/287">PR #287</a>.</p></li>
<li><p>Some plotting issues have been resolved.</p></li>
<li><p><cite>dtopotools.SiftFault</cite> now has the rigidity <cite>mu</cite> set properly, which
changes the magnitude <cite>Mw</cite> that is reported for a fault created using
the NOAA SIFT database.</p></li>
<li><p><cite>dtopotools.SubFault</cite> has been extended to allow triangular subfaults
in addition to rectangular subfaults.  Some examples illustrating this
should be added to the <cite>apps</cite> repository.</p></li>
<li><p><cite>topotools.read</cite> now allows <cite>dx != dy</cite> in a header for <cite>topo_type in [2,3]</cite>.</p></li>
<li><p>Many other minor changes.</p></li>
</ul>
<p>See <a class="reference external" href="https://github.com/clawpack/geoclaw/compare/v5.4.1...v5.5.0">geoclaw diffs</a></p>
</div>
<div class="section" id="changes-to-pyclaw">
<h2>Changes to PyClaw<a class="headerlink" href="#changes-to-pyclaw" title="Permalink to this headline">¶</a></h2>
<p>For changes in PyClaw, see the <a class="reference external" href="https://github.com/clawpack/pyclaw/blob/master/CHANGES.md">PyClaw changelog</a>.</p>
<p>See <a class="reference external" href="https://github.com/clawpack/pyclaw/compare/v5.4.1...v5.5.0">pyclaw diffs</a></p>
</div>
</div>
<div class="section" id="other-clawpack-repositories">
<h1>Other Clawpack Repositories<a class="headerlink" href="#other-clawpack-repositories" title="Permalink to this headline">¶</a></h1>
<p>The repositories below are not included in the Clawpack tarfile or pip
install, but changes to these repositories may also be of interest.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/clawpack/apps/compare/v5.4.1...v5.5.0">apps diffs</a></p></li>
<li><p><a class="reference external" href="https://github.com/clawpack/doc/compare/v5.4.1...v5.5.0">doc diffs</a></p></li>
<li><p><a class="reference external" href="https://github.com/clawpack/docker-files/compare/v5.4.1...v5.5.0">docker-files diffs</a></p></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p><a href="http://clawpack.org/">
    <img class="logo" src= "_static/clawlogo.jpg" alt="Logo"/>
</a>
<h2>Version 5.5.0</h2>
</p>
  <h3><a href="contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Release 5.5.0</a><ul>
<li><a class="reference internal" href="#changes-to-documentation">Changes to documentation</a></li>
<li><a class="reference internal" href="#changes-that-are-not-backward-compatible">Changes that are not backward compatible</a></li>
<li><a class="reference internal" href="#general-changes">General changes</a></li>
<li><a class="reference internal" href="#changes-to-classic">Changes to classic</a></li>
<li><a class="reference internal" href="#changes-to-clawutil">Changes to clawutil</a></li>
<li><a class="reference internal" href="#changes-to-visclaw">Changes to visclaw</a></li>
<li><a class="reference internal" href="#changes-to-riemann">Changes to riemann</a></li>
<li><a class="reference internal" href="#changes-to-amrclaw">Changes to amrclaw</a></li>
<li><a class="reference internal" href="#changes-to-geoclaw">Changes to geoclaw</a></li>
<li><a class="reference internal" href="#changes-to-pyclaw">Changes to PyClaw</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-clawpack-repositories">Other Clawpack Repositories</a></li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="contents.html">Documentation overview</a><ul>
  </ul></li>
</ul>
<div class="widget navlinks">
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/release_5_5_0.rst.txt"
            rel="nofollow"
            target="_blank">Source .rst</a></li>
    <li><a href="https://github.com/clawpack/doc/blob/dev/doc/release_5_5_0.rst"
            rel="nofollow"
            target="_blank">Source on GitHub</a></li>
     <li><a href="https://github.com/clawpack/doc/commits/dev/doc/release_5_5_0.rst"
             rel="nofollow"
             target="_blank">History</a></li>
    <li><a href="https://github.com/clawpack/doc/edit/dev/doc/release_5_5_0.rst"
            rel="nofollow"
            target="_blank">Suggest Edits</a></li>
     <li><a href="https://github.com/clawpack/doc/issues/new/choose"
             rel="nofollow"
             target="_blank">Raise an Issue</a></li>
  </ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
<h4>Latest Version</h4>
<ul>
  <li><a href="../dev/release_5_5_0.html">dev</a></li>
  <li><a href="../v5.7.0/release_5_5_0.html">v5.7.0</a></li>
</ul>
<h4>Older Versions</h4>
<ul>
  <li><a href="../v5.1.0/index.html">v5.1.0</a></li>
  <li><a href="../v5.2.0/index.html">v5.2.0</a></li>
  <li><a href="../v5.2.1/index.html">v5.2.1</a></li>
  <li><a href="../v5.3.0/index.html">v5.3.0</a></li>
  <li><a href="../v5.3.1/index.html">v5.3.1</a></li>
  <li><a href="../v5.4.0/index.html">v5.4.0</a></li>
  <li><a href="../v5.4.1/index.html">v5.4.1</a></li>
  <li><a href="release_5_5_0.html">v5.5.0</a></li>
  <li><a href="../v5.6.0/release_5_5_0.html">v5.6.0</a></li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    &copy; Copyright CC-BY 2020, The Clawpack Development Team.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44811544-1', 'auto');
  ga('send', 'pageview');

  </script>
  
  </body>
</html>